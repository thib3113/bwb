import{g as M,a as T,r as h,u as k,j as e,c as A,b as R,s as C,m as w,d as z,B as F,e as S,f as P,h as E,i as $,k as x,T as f,l as W,C as _,t as K,n as q,o as G,p as J,q as Q,O as X}from"./index-ChgWv7eL.js";function Y(t){return M("MuiBottomNavigation",t)}T("MuiBottomNavigation",["root"]);const Z=t=>{const{classes:o}=t;return R({root:["root"]},Y,o)},tt=C("div",{name:"MuiBottomNavigation",slot:"Root"})(w(({theme:t})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(t.vars||t).palette.background.paper}))),ot=h.forwardRef(function(o,s){const n=k({props:o,name:"MuiBottomNavigation"}),{children:i,className:c,component:a="div",onChange:p,showLabels:r=!1,value:l,...u}=n,g={...n,component:a,showLabels:r},y=Z(g);return e.jsx(tt,{as:a,className:A(y.root,c),ref:s,ownerState:g,...u,children:h.Children.map(i,(d,b)=>{if(!h.isValidElement(d))return null;const m=d.props.value===void 0?b:d.props.value;return h.cloneElement(d,{selected:m===l,showLabel:d.props.showLabel!==void 0?d.props.showLabel:r,value:m,onChange:p})})})});function et(t){return M("MuiBottomNavigationAction",t)}const D=T("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),st=t=>{const{classes:o,showLabel:s,selected:n}=t;return R({root:["root",!s&&!n&&"iconOnly",n&&"selected"],label:["label",!s&&!n&&"iconOnly",n&&"selected"]},et,o)},nt=C(F,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:s}=t;return[o.root,!s.showLabel&&!s.selected&&o.iconOnly]}})(w(({theme:t})=>({transition:t.transitions.create(["color","padding-top"],{duration:t.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(t.vars||t).palette.text.secondary,flexDirection:"column",flex:"1",[`&.${D.selected}`]:{color:(t.vars||t).palette.primary.main},variants:[{props:({showLabel:o,selected:s})=>!o&&!s,style:{paddingTop:14}},{props:({showLabel:o,selected:s,label:n})=>!o&&!s&&!n,style:{paddingTop:0}}]}))),at=C("span",{name:"MuiBottomNavigationAction",slot:"Label"})(w(({theme:t})=>({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s",[`&.${D.selected}`]:{fontSize:t.typography.pxToRem(14)},variants:[{props:({showLabel:o,selected:s})=>!o&&!s,style:{opacity:0,transitionDelay:"0s"}}]}))),L=h.forwardRef(function(o,s){const n=k({props:o,name:"MuiBottomNavigationAction"}),{className:i,icon:c,label:a,onChange:p,onClick:r,selected:l,showLabel:u,value:g,slots:y={},slotProps:d={},...b}=n,m=n,j=st(m),O=v=>{p&&p(v,g),r&&r(v)},B={slots:y,slotProps:d},[H,I]=z("root",{elementType:nt,externalForwardedProps:{...B,...b},shouldForwardComponentProp:!0,ownerState:m,ref:s,className:A(j.root,i),additionalProps:{focusRipple:!0},getSlotProps:v=>({...v,onClick:N=>{v.onClick?.(N),O(N)}})}),[U,V]=z("label",{elementType:at,externalForwardedProps:B,ownerState:m,className:j.label});return e.jsxs(H,{...I,children:[c,e.jsx(U,{...V,children:a})]})}),it=S(e.jsx("path",{d:"M19 5v14H5V5zm1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"})),rt=S(e.jsx("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"})),ct=({showNotification:t})=>{const{t:o}=P(),s=E(),{connect:n,isConnecting:i}=$(),[c,a]=h.useState(null),p=async()=>{a(null);try{await n(),t(o("ble.connected"),"success")}catch(r){const l=K(r),u=l.startsWith("errors.")?o(l):l;a(u),t(`${o("ble.connection_failed")}: ${u}`,"error")}};return e.jsxs(x,{"data-testid":"onboarding-view",sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",p:3,textAlign:"center"},children:[e.jsx(f,{variant:"h4",component:"h1",gutterBottom:!0,children:o("app_title")}),e.jsx(f,{variant:"h6",sx:{mb:4,color:s.palette.text.secondary},children:o("not_connected.message")}),e.jsx(W,{"data-testid":"connect-button",variant:"contained",size:"large",onClick:p,disabled:i,sx:{py:1.5,px:4,fontSize:"1.1rem",mb:2},children:i?e.jsxs(x,{"data-testid":"onboarding-view",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_,{size:24,sx:{color:"white"}}),o("connecting")]}):o("connection.connect")}),c&&e.jsx(f,{variant:"body2",color:"error",sx:{mt:2},children:c})]})},dt=()=>{const{t}=P(["common","codes","logs","settings"]),o=E(),{knownDevices:s}=q(),{showNotification:n,hideNotification:i}=G(),c=J(),a=Q(),r=c.pathname.endsWith("/logs")?1:0;if(s.length===0)return e.jsx(ct,{showNotification:n});const l=(u,g)=>{switch(g){case 0:a("/codes");break;case 1:a("/logs");break;default:a("/codes");break}};return e.jsxs(x,{sx:{width:"100%",display:"flex",flexDirection:"column",height:"100%"},children:[e.jsxs(x,{sx:{flexGrow:1,overflow:"auto"},children:[e.jsx(X,{context:{showNotification:n,hideNotification:i}}),e.jsx(x,{sx:{height:160}})]}),e.jsxs(ot,{"data-testid":"main-nav",value:r,onChange:l,showLabels:!0,sx:{width:"100%",position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,backgroundColor:o.palette.background.paper},children:[e.jsx(L,{"data-testid":"nav-codes",label:t("codes:title"),icon:e.jsx(rt,{})}),e.jsx(L,{"data-testid":"nav-logs",label:t("logs:title"),icon:e.jsx(it,{})})]})]})};export{dt as HomePage};
