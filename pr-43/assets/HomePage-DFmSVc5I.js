import{g as M,a as T,r as h,u as k,j as e,c as A,b as S,s as j,m as w,d as L,B as F,e as R,f as P,h as E,i as W,k as x,T as f,l as $,C as _,t as K,n as q,o as G,p as J,q as Q,O as X,S as Y}from"./index-DT-u9sD_.js";function Z(t){return M("MuiBottomNavigation",t)}T("MuiBottomNavigation",["root"]);const tt=t=>{const{classes:o}=t;return S({root:["root"]},Z,o)},ot=j("div",{name:"MuiBottomNavigation",slot:"Root"})(w(({theme:t})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(t.vars||t).palette.background.paper}))),et=h.forwardRef(function(o,s){const n=k({props:o,name:"MuiBottomNavigation"}),{children:i,className:r,component:a="div",onChange:p,showLabels:c=!1,value:l,...g}=n,u={...n,component:a,showLabels:c},b=tt(u);return e.jsx(ot,{as:a,className:A(b.root,r),ref:s,ownerState:u,...g,children:h.Children.map(i,(d,y)=>{if(!h.isValidElement(d))return null;const m=d.props.value===void 0?y:d.props.value;return h.cloneElement(d,{selected:m===l,showLabel:d.props.showLabel!==void 0?d.props.showLabel:c,value:m,onChange:p})})})});function st(t){return M("MuiBottomNavigationAction",t)}const D=T("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),nt=t=>{const{classes:o,showLabel:s,selected:n}=t;return S({root:["root",!s&&!n&&"iconOnly",n&&"selected"],label:["label",!s&&!n&&"iconOnly",n&&"selected"]},st,o)},at=j(F,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:s}=t;return[o.root,!s.showLabel&&!s.selected&&o.iconOnly]}})(w(({theme:t})=>({transition:t.transitions.create(["color","padding-top"],{duration:t.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(t.vars||t).palette.text.secondary,flexDirection:"column",flex:"1",[`&.${D.selected}`]:{color:(t.vars||t).palette.primary.main},variants:[{props:({showLabel:o,selected:s})=>!o&&!s,style:{paddingTop:14}},{props:({showLabel:o,selected:s,label:n})=>!o&&!s&&!n,style:{paddingTop:0}}]}))),it=j("span",{name:"MuiBottomNavigationAction",slot:"Label"})(w(({theme:t})=>({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s",[`&.${D.selected}`]:{fontSize:t.typography.pxToRem(14)},variants:[{props:({showLabel:o,selected:s})=>!o&&!s,style:{opacity:0,transitionDelay:"0s"}}]}))),C=h.forwardRef(function(o,s){const n=k({props:o,name:"MuiBottomNavigationAction"}),{className:i,icon:r,label:a,onChange:p,onClick:c,selected:l,showLabel:g,value:u,slots:b={},slotProps:d={},...y}=n,m=n,B=nt(m),O=v=>{p&&p(v,u),c&&c(v)},N={slots:b,slotProps:d},[H,I]=L("root",{elementType:at,externalForwardedProps:{...N,...y},shouldForwardComponentProp:!0,ownerState:m,ref:s,className:A(B.root,i),additionalProps:{focusRipple:!0},getSlotProps:v=>({...v,onClick:z=>{v.onClick?.(z),O(z)}})}),[U,V]=L("label",{elementType:it,externalForwardedProps:N,ownerState:m,className:B.label});return e.jsxs(H,{...I,children:[r,e.jsx(U,{...V,children:a})]})}),rt=R(e.jsx("path",{d:"M19 5v14H5V5zm1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"})),ct=R(e.jsx("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"})),lt=({showNotification:t})=>{const{t:o}=P(),s=E(),{connect:n,isConnecting:i}=W(),[r,a]=h.useState(null),p=async()=>{a(null);try{await n(),t(o("ble.connected"),"success")}catch(c){const l=K(c),g=l.startsWith("errors.")?o(l):l;a(g),t(`${o("ble.connection_failed")}: ${g}`,"error")}};return e.jsxs(x,{"data-testid":"onboarding-view",sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",p:3,textAlign:"center"},children:[e.jsx(f,{variant:"h4",component:"h1",gutterBottom:!0,children:o("app_title")}),e.jsx(f,{variant:"h6",sx:{mb:4,color:s.palette.text.secondary},children:o("not_connected.message")}),e.jsx($,{"data-testid":"connect-button",variant:"contained",size:"large",onClick:p,disabled:i,sx:{py:1.5,px:4,fontSize:"1.1rem",mb:2},children:i?e.jsxs(x,{"data-testid":"onboarding-view",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_,{size:24,sx:{color:"white"}}),o("connecting")]}):o("connection.connect")}),r&&e.jsx(f,{variant:"body2",color:"error",sx:{mt:2},children:r})]})},pt=()=>{const{t}=P(["common","codes","logs","settings"]),o=E(),{knownDevices:s}=q(),{showNotification:n,hideNotification:i}=G(),r=J(),a=Q(),c=r.pathname.endsWith("/logs")?1:r.pathname.endsWith("/settings")?2:0;if(s.length===0)return e.jsx(lt,{showNotification:n});const l=(g,u)=>{switch(u){case 0:a("/codes");break;case 1:a("/logs");break;case 2:a("/settings");break;default:a("/codes")}};return e.jsxs(x,{sx:{width:"100%",display:"flex",flexDirection:"column",height:"100%"},children:[e.jsxs(x,{sx:{flexGrow:1,overflow:"auto"},children:[e.jsx(X,{context:{showNotification:n,hideNotification:i}}),e.jsx(x,{sx:{height:160}})]}),e.jsxs(et,{"data-testid":"main-nav",value:c,onChange:l,showLabels:!0,sx:{width:"100%",position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,backgroundColor:o.palette.background.paper},children:[e.jsx(C,{"data-testid":"nav-codes",label:t("codes:title"),icon:e.jsx(ct,{})}),e.jsx(C,{"data-testid":"nav-logs",label:t("logs:title"),icon:e.jsx(rt,{})}),e.jsx(C,{"data-testid":"nav-settings",label:t("settings:title"),icon:e.jsx(Y,{})})]})]})};export{pt as HomePage};
