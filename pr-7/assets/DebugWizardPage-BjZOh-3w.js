import{D as K,z as qe,b as e,c as N,av as ke,aw as be,ax as et,ay as tt,az as nt,d as X,g as J,O as Ue,_ as We,E as ot,aA as Re,a as se,u as Z,f as Q,V as ne,W as ue,s as k,P as Ve,e as q,aB as rt,aC as Be,R as re,aD as $e,h as le,aE as at,aF as it,k as Ce,t as P,l as V,a3 as Ne,aG as st,aH as lt,aI as Me,aJ as ct,aK as G,i as ce,T as u,o as b,at as $,n as R,C as oe,aL as Fe,H as ae,F as ie,I as Ee,aM as dt,aN as Pe,a8 as we,aO as pt,aa as je,aP as ut,aQ as mt,an as ht,ao as yt,ap as vt,aR as gt,aS as ft,K as bt,aT as xt,aU as St,aV as Ct,j as wt,aW as It,q as Lt,aX as zt,X as Tt,Q as Y,aY as Dt}from"./index-fBLbf__j.js";import{s as _t,u as kt,C as Rt}from"./Container-BbRcaS0N.js";import{C as Mt}from"./Chip-BHlqTu3r.js";import{L as Pt}from"./LinearProgress-QRvGzmgp.js";const At=ot(),Ut=_t("div",{name:"MuiStack",slot:"Root"});function Wt(t){return kt({props:t,name:"MuiStack",defaultTheme:At})}function Vt(t,o){const n=Ue.toArray(t).filter(Boolean);return n.reduce((r,l,s)=>(r.push(l),s<n.length-1&&r.push(We(o,{key:`separator-${s}`})),r),[])}const Bt=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],$t=({ownerState:t,theme:o})=>{let n={display:"flex",flexDirection:"column",...ke({theme:o},be({values:t.direction,breakpoints:o.breakpoints.values}),r=>({flexDirection:r}))};if(t.spacing){const r=et(o),l=Object.keys(o.breakpoints.values).reduce((p,m)=>((typeof t.spacing=="object"&&t.spacing[m]!=null||typeof t.direction=="object"&&t.direction[m]!=null)&&(p[m]=!0),p),{}),s=be({values:t.direction,base:l}),g=be({values:t.spacing,base:l});typeof s=="object"&&Object.keys(s).forEach((p,m,f)=>{if(!s[p]){const a=m>0?s[f[m-1]]:"column";s[p]=a}}),n=tt(n,ke({theme:o},g,(p,m)=>t.useFlexGap?{gap:Re(r,p)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Bt(m?s[m]:t.direction)}`]:Re(r,p)}}))}return n=nt(o.breakpoints,n),n};function Nt(t={}){const{createStyledComponent:o=Ut,useThemeProps:n=Wt,componentName:r="MuiStack"}=t,l=()=>X({root:["root"]},p=>J(r,p),{}),s=o($t);return K(function(p,m){const f=n(p),c=qe(f),{component:a="div",direction:S="column",spacing:y=0,divider:x,children:d,className:h,useFlexGap:v=!1,...C}=c,z={direction:S,spacing:y,useFlexGap:v},w=l();return e(s,{as:a,ownerState:z,ref:m,className:N(w.root,h),...C,children:x?Vt(d,x):d})})}function Ft(t){return J("MuiMobileStepper",t)}se("MuiMobileStepper",["root","positionBottom","positionTop","positionStatic","dots","dot","dotActive","progress"]);const Et=t=>{const{classes:o,position:n}=t,r={root:["root",`position${ue(n)}`],dots:["dots"],dot:["dot"],dotActive:["dotActive"],progress:["progress"]};return X(r,Ft,o)},jt=k(Ve,{name:"MuiMobileStepper",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,o[`position${ue(n.position)}`]]}})(q(({theme:t})=>({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:(t.vars||t).palette.background.default,padding:8,variants:[{props:({position:o})=>o==="top"||o==="bottom",style:{position:"fixed",left:0,right:0,zIndex:(t.vars||t).zIndex.mobileStepper}},{props:{position:"top"},style:{top:0}},{props:{position:"bottom"},style:{bottom:0}}]}))),Ot=k("div",{name:"MuiMobileStepper",slot:"Dots"})({variants:[{props:{variant:"dots"},style:{display:"flex",flexDirection:"row"}}]}),Ht=k("div",{name:"MuiMobileStepper",slot:"Dot",shouldForwardProp:t=>rt(t)&&t!=="dotActive",overridesResolver:(t,o)=>{const{dotActive:n}=t;return[o.dot,n&&o.dotActive]}})(q(({theme:t})=>({variants:[{props:{variant:"dots"},style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),backgroundColor:(t.vars||t).palette.action.disabled,borderRadius:"50%",width:8,height:8,margin:"0 2px"}},{props:{variant:"dots",dotActive:!0},style:{backgroundColor:(t.vars||t).palette.primary.main}}]}))),Gt=k(Pt,{name:"MuiMobileStepper",slot:"Progress"})({variants:[{props:{variant:"progress"},style:{width:"50%"}}]}),Yt=K(function(o,n){const r=Z({props:o,name:"MuiMobileStepper"}),{activeStep:l=0,backButton:s,className:g,LinearProgressProps:i,nextButton:p,position:m="bottom",steps:f,variant:c="dots",slots:a={},slotProps:S={},...y}=r,x={...r,activeStep:l,position:m,variant:c};let d;c==="progress"&&(f===1?d=100:d=Math.ceil(l/(f-1)*100));const h=Et(x),v={slots:a,slotProps:{progress:i,...S}},[C,z]=Q("root",{ref:n,elementType:jt,shouldForwardComponentProp:!0,className:N(h.root,g),externalForwardedProps:{...v,...y},ownerState:x,additionalProps:{square:!0,elevation:0}}),[w,T]=Q("dots",{className:h.dots,elementType:Ot,externalForwardedProps:v,ownerState:x}),[I,D]=Q("dot",{elementType:Ht,externalForwardedProps:v,ownerState:x}),[_,U]=Q("progress",{className:h.progress,elementType:Gt,shouldForwardComponentProp:!0,externalForwardedProps:v,ownerState:x,additionalProps:{value:d,variant:"determinate"}});return e(C,{...z,children:[s,c==="text"&&e(ne,{children:[l+1," / ",f]}),c==="dots"&&e(w,{...T,children:[...new Array(f)].map((M,W)=>e(I,{...D,className:N(h.dot,D.className,W===l&&h.dotActive),dotActive:W===l},W))}),c==="progress"&&e(_,{...U}),p]})}),A=Nt({createStyledComponent:k("div",{name:"MuiStack",slot:"Root"}),useThemeProps:t=>Z({props:t,name:"MuiStack"})}),me=Be({}),Ie=Be({});function Qt(t){return J("MuiStep",t)}se("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Kt=t=>{const{classes:o,orientation:n,alternativeLabel:r,completed:l}=t;return X({root:["root",n,r&&"alternativeLabel",l&&"completed"]},Qt,o)},Xt=k("div",{name:"MuiStep",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,o[n.orientation],n.alternativeLabel&&o.alternativeLabel,n.completed&&o.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),Jt=K(function(o,n){const r=Z({props:o,name:"MuiStep"}),{active:l,children:s,className:g,component:i="div",completed:p,disabled:m,expanded:f=!1,index:c,last:a,...S}=r,{activeStep:y,connector:x,alternativeLabel:d,orientation:h,nonLinear:v}=re(me);let[C=!1,z=!1,w=!1]=[l,p,m];y===c?C=l!==void 0?l:!0:!v&&y>c?z=p!==void 0?p:!0:!v&&y<c&&(w=m!==void 0?m:!0);const T=$e(()=>({index:c,last:a,expanded:f,icon:c+1,active:C,completed:z,disabled:w}),[c,a,f,C,z,w]),I={...r,active:C,orientation:h,alternativeLabel:d,completed:z,disabled:w,expanded:f,component:i},D=Kt(I),_=e(Xt,{as:i,className:N(D.root,g),ref:n,ownerState:I,...S,children:[x&&d&&c!==0?x:null,s]});return e(Ie.Provider,{value:T,children:x&&!d&&c!==0?e(ne,{children:[x,_]}):_})}),Zt=le(e("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"})),qt=le(e("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}));function en(t){return J("MuiStepIcon",t)}const xe=se("MuiStepIcon",["root","active","completed","error","text"]);var Ae;const tn=t=>{const{classes:o,active:n,completed:r,error:l}=t;return X({root:["root",n&&"active",r&&"completed",l&&"error"],text:["text"]},en,o)},Se=k(at,{name:"MuiStepIcon",slot:"Root"})(q(({theme:t})=>({display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),color:(t.vars||t).palette.text.disabled,[`&.${xe.completed}`]:{color:(t.vars||t).palette.primary.main},[`&.${xe.active}`]:{color:(t.vars||t).palette.primary.main},[`&.${xe.error}`]:{color:(t.vars||t).palette.error.main}}))),nn=k("text",{name:"MuiStepIcon",slot:"Text"})(q(({theme:t})=>({fill:(t.vars||t).palette.primary.contrastText,fontSize:t.typography.caption.fontSize,fontFamily:t.typography.fontFamily}))),on=K(function(o,n){const r=Z({props:o,name:"MuiStepIcon"}),{active:l=!1,className:s,completed:g=!1,error:i=!1,icon:p,...m}=r,f={...r,active:l,completed:g,error:i},c=tn(f);if(typeof p=="number"||typeof p=="string"){const a=N(s,c.root);return i?e(Se,{as:qt,className:a,ref:n,ownerState:f,...m}):g?e(Se,{as:Zt,className:a,ref:n,ownerState:f,...m}):e(Se,{className:a,ref:n,ownerState:f,...m,children:[Ae||(Ae=e("circle",{cx:"12",cy:"12",r:"12"})),e(nn,{className:c.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:f,children:p})]})}return p});function rn(t){return J("MuiStepLabel",t)}const O=se("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),an=t=>{const{classes:o,orientation:n,active:r,completed:l,error:s,disabled:g,alternativeLabel:i}=t;return X({root:["root",n,s&&"error",g&&"disabled",i&&"alternativeLabel"],label:["label",r&&"active",l&&"completed",s&&"error",g&&"disabled",i&&"alternativeLabel"],iconContainer:["iconContainer",r&&"active",l&&"completed",s&&"error",g&&"disabled",i&&"alternativeLabel"],labelContainer:["labelContainer",i&&"alternativeLabel"]},rn,o)},sn=k("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,o[n.orientation]]}})({display:"flex",alignItems:"center",[`&.${O.alternativeLabel}`]:{flexDirection:"column"},[`&.${O.disabled}`]:{cursor:"default"},variants:[{props:{orientation:"vertical"},style:{textAlign:"left",padding:"8px 0"}}]}),ln=k("span",{name:"MuiStepLabel",slot:"Label"})(q(({theme:t})=>({...t.typography.body2,display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),[`&.${O.active}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${O.completed}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${O.alternativeLabel}`]:{marginTop:16},[`&.${O.error}`]:{color:(t.vars||t).palette.error.main}}))),cn=k("span",{name:"MuiStepLabel",slot:"IconContainer"})({flexShrink:0,display:"flex",paddingRight:8,[`&.${O.alternativeLabel}`]:{paddingRight:0}}),dn=k("span",{name:"MuiStepLabel",slot:"LabelContainer"})(q(({theme:t})=>({width:"100%",color:(t.vars||t).palette.text.secondary,[`&.${O.alternativeLabel}`]:{textAlign:"center"}}))),Oe=K(function(o,n){const r=Z({props:o,name:"MuiStepLabel"}),{children:l,className:s,componentsProps:g={},error:i=!1,icon:p,optional:m,slots:f={},slotProps:c={},StepIconComponent:a,StepIconProps:S,...y}=r,{alternativeLabel:x,orientation:d}=re(me),{active:h,disabled:v,completed:C,icon:z}=re(Ie),w=p||z;let T=a;w&&!T&&(T=on);const I={...r,active:h,alternativeLabel:x,completed:C,disabled:v,error:i,orientation:d},D=an(I),_={slots:f,slotProps:{stepIcon:S,...g,...c}},[U,M]=Q("root",{elementType:sn,externalForwardedProps:{..._,...y},ownerState:I,ref:n,className:N(D.root,s)}),[W,ee]=Q("label",{elementType:ln,externalForwardedProps:_,ownerState:I}),[B,he]=Q("stepIcon",{elementType:T,externalForwardedProps:_,ownerState:I});return e(U,{...M,children:[w||B?e(cn,{className:D.iconContainer,ownerState:I,children:e(B,{completed:C,active:h,error:i,icon:w,...he})}):null,e(dn,{className:D.labelContainer,ownerState:I,children:[l?e(W,{...ee,className:N(D.label,ee?.className),children:l}):null,m]})]})});Oe.muiName="StepLabel";function pn(t){return J("MuiStepConnector",t)}se("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const un=t=>{const{classes:o,orientation:n,alternativeLabel:r,active:l,completed:s,disabled:g}=t,i={root:["root",n,r&&"alternativeLabel",l&&"active",s&&"completed",g&&"disabled"],line:["line",`line${ue(n)}`]};return X(i,pn,o)},mn=k("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,o[n.orientation],n.alternativeLabel&&o.alternativeLabel,n.completed&&o.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),hn=k("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.line,o[`line${ue(n.orientation)}`]]}})(q(({theme:t})=>{const o=t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600];return{display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:o,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),yn=K(function(o,n){const r=Z({props:o,name:"MuiStepConnector"}),{className:l,...s}=r,{alternativeLabel:g,orientation:i="horizontal"}=re(me),{active:p,disabled:m,completed:f}=re(Ie),c={...r,alternativeLabel:g,orientation:i,active:p,completed:f,disabled:m},a=un(c);return e(mn,{className:N(a.root,l),ref:n,ownerState:c,...s,children:e(hn,{className:a.line,ownerState:c})})});function vn(t){return J("MuiStepper",t)}se("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const gn=t=>{const{orientation:o,nonLinear:n,alternativeLabel:r,classes:l}=t;return X({root:["root",o,n&&"nonLinear",r&&"alternativeLabel"]},vn,l)},fn=k("div",{name:"MuiStepper",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,o[n.orientation],n.alternativeLabel&&o.alternativeLabel,n.nonLinear&&o.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),bn=e(yn,{}),xn=K(function(o,n){const r=Z({props:o,name:"MuiStepper"}),{activeStep:l=0,alternativeLabel:s=!1,children:g,className:i,component:p="div",connector:m=bn,nonLinear:f=!1,orientation:c="horizontal",...a}=r,S={...r,nonLinear:f,alternativeLabel:s,orientation:c,component:p},y=gn(S),x=Ue.toArray(g).filter(Boolean),d=x.map((v,C)=>We(v,{index:C,last:C+1===x.length,...v.props})),h=$e(()=>({activeStep:l,alternativeLabel:s,connector:m,nonLinear:f,orientation:c}),[l,s,m,f,c]);return e(me.Provider,{value:h,children:e(fn,{as:p,ownerState:S,className:N(y.root,i),ref:n,...a,children:d})})}),Sn=le(e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),Cn=le(e("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"})),wn=le(e("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1m-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1"})),In=le(e("path",{d:"M19.8 18.4 14 10.67V6.5l1.35-1.69c.26-.33.03-.81-.39-.81H9.04c-.42 0-.65.48-.39.81L10 6.5v4.17L4.2 18.4c-.49.66-.02 1.6.8 1.6h14c.82 0 1.29-.94.8-1.6"})),Ln=()=>{const t=re(it);if(t===void 0)throw new Error("useSession must be used within a SessionProvider");return t},zn=t=>{const{readCharacteristic:o}=Ce(),[n,r]=P(V(!1),"isReading"),[l,s]=P(V(t?.batteryData||null),"batteryData"),[g,i]=P(V(t?.analysis||null),"analysis"),p=Ne(async(m,f)=>{if(!m||!m.gatt||!m.gatt.connected)throw new Error("Device not connected");console.log("[BatteryDiag] Starting diagnostics using context read..."),r(!0);const c={standardLevel:null,standardError:null,rawHex:null,serviceUuid:null,parsed:null,error:null};try{try{console.log("[BatteryDiag] Reading Standard Battery Service...");const a=await o(st,lt);c.standardLevel=a.getUint8(0),console.log("[BatteryDiag] Standard Level:",c.standardLevel)}catch(a){const S=a instanceof Error?a.message:String(a);console.warn("[BatteryDiag] Standard Battery Read Failed:",S),c.standardError=S}try{console.log("[BatteryDiag] Reading Proprietary Battery Characteristic...");const a=await o(Me,ct),S=new Uint8Array(a.buffer);c.rawHex=Array.from(S).map(h=>h.toString(16).padStart(2,"0").toUpperCase()).join(" "),c.serviceUuid=Me,console.log("[BatteryDiag] Proprietary Data (HEX):",c.rawHex);const y=a.byteLength;let x="Unknown";y===1?x="Single Measure":y===4?x="T1/T5/T10":y===6&&(x="Min/Mean/Max");const d={format:x};if(y===1)d.level=a.getUint8(0);else if(y===4)d.level=a.getUint8(0),d.t1=a.getUint8(1),d.t5=a.getUint8(2),d.temp_C=a.getUint8(3)-25;else if(y===6){const h=new Uint8Array(a.buffer),v=C=>C===G;v(h[0])&&v(h[1])&&v(h[2])&&v(h[3])&&v(h[4])?c.error="Données invalides (255)":(d.first_mV=h[0]===G?null:h[0]*100,d.min_mV=h[1]===G?null:h[1]*100,d.mean_mV=h[2]===G?null:h[2]*100,d.max_mV=h[3]===G?null:h[3]*100,d.last_mV=h[4]===G?null:h[4]*100,d.temp_C=h[5]===G?null:h[5]-25)}else d.rawLength=y;c.parsed=d}catch(a){const S=a instanceof Error?a.message:String(a);console.error("[BatteryDiag] Proprietary Read Error:",S),c.error=S}if(s(c),c.parsed)try{const a=Tn(c,f);i(a)}catch(a){console.error("Error analyzing battery data:",a);const S=a instanceof Error?a.message:String(a);c.error=(c.error||"")+` | Analysis failed: ${S}`}}catch(a){console.error("[BatteryDiag] Global Error:",a)}finally{r(!1)}},[o]);return{isReading:n,batteryData:l,analysis:g,readBatteryDiagnostics:p}};function Tn(t,o){const n={userClaimType:null,userClaimText:"Inconnue",detectedType:"Unknown",detectedText:"Incertain",finalType:"aaa",consistencyStatus:"neutral",consistencyText:""};if(!t.parsed)return n.consistencyStatus="error",n.consistencyText="Données propriétaires non disponibles",n;const r=t.parsed.last_mV;return o&&(o.answer==="Oui"&&o.inference?(n.userClaimType=o.inference.battery,n.userClaimText=o.inference.label+" (Confirmé)"):o.answer==="Non"?(n.userClaimText="Infirmé par l'utilisateur",n.userClaimType="rejected"):o.answer==="Inconnu"&&(n.userClaimText="Inconnu (Utilisateur)",n.userClaimType="unknown")),r&&(r>5e3?(n.detectedType="aaa",n.detectedText="8x AAA ( > 5V )"):r<4500?(n.detectedType="lsh14",n.detectedText="LSH14 ( < 4.5V )"):n.detectedText=`Ambigu (${(r/1e3).toFixed(2)}V)`),n.userClaimType==="aaa"||n.userClaimType==="lsh14"?n.detectedType!=="Unknown"?n.userClaimType===n.detectedType?(n.finalType=n.detectedType||"aaa",n.consistencyStatus="success",n.consistencyText="✅ Cohérent : Le voltage confirme le matériel."):(n.finalType=n.detectedType||"aaa",n.consistencyStatus="error",n.consistencyText="❌ Incohérence : Le voltage contredit le matériel déclaré !"):(n.finalType=n.userClaimType,n.consistencyStatus="warning",n.consistencyText="⚠️ Voltage ambigu, utilisation du type déclaré."):n.detectedType!=="Unknown"?(n.finalType=n.detectedType||"aaa",n.consistencyStatus="success",n.consistencyText="ℹ️ Type déduit automatiquement du voltage."):(n.finalType="aaa",n.consistencyStatus="warning",n.consistencyText="⚠️ Impossible de déterminer le type (Voltage ambigu). Par défaut : AAA."),n}const Dn=({isConnected:t,isConnecting:o,connect:n,error:r,device:l,firmwareVersion:s,isLoadingInfo:g,onRetryFetch:i})=>{const{t:p}=ce(["wizard","common"]);return e(b,{sx:{mt:2},children:[e(u,{variant:"h6",gutterBottom:!0,children:p("connect.title")}),e(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:p("connect.desc")}),t?e(ae,{variant:"outlined",sx:{mt:2,borderColor:"success.main"},children:e(ie,{children:[e(A,{direction:"row",alignItems:"center",spacing:2,sx:{mb:2},children:[e(Sn,{color:"success",fontSize:"large"}),e(b,{children:[e(u,{variant:"h6",color:"success.main",children:p("connect.success")}),e(u,{variant:"body2",color:"text.secondary",children:p("connect.ready")})]})]}),e(Ee,{sx:{my:2}}),e(u,{variant:"subtitle2",gutterBottom:!0,children:"Informations de l'appareil :"}),e(A,{spacing:1,children:[e(b,{display:"flex",justifyContent:"space-between",children:[e(u,{variant:"body2",color:"text.secondary",children:"Nom :"}),e(u,{variant:"body2",fontWeight:"medium",children:l?.name||"Inconnu"})]}),e(b,{display:"flex",justifyContent:"space-between",children:[e(u,{variant:"body2",color:"text.secondary",children:"ID :"}),e(u,{variant:"body2",fontWeight:"medium",children:l?.id||"Inconnu"})]}),e(b,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e(u,{variant:"body2",color:"text.secondary",children:"Firmware :"}),e(b,{display:"flex",alignItems:"center",gap:1,children:[e(u,{variant:"body2",fontWeight:"medium",children:g?e(oe,{size:12}):s||"Inconnu"}),!g&&e(R,{size:"small",onClick:i,sx:{minWidth:0,p:.5},children:e(dt,{sx:{fontSize:16}})})]})]})]})]})}):e(b,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,py:4},children:[r&&e($,{severity:"error",sx:{width:"100%",mb:2},children:r.startsWith("errors.")?p(`common:${r}`):r}),e(R,{variant:"contained",size:"large",startIcon:o?e(oe,{size:20,color:"inherit"}):e(Fe,{}),onClick:()=>n(),disabled:o,children:p(o?"common:connecting":"connect.button")})]})]})},_n=({pinCode:t,updateDebugWizardState:o,onOpenDoor:n,isOpening:r,isConnected:l,openDoorSuccess:s,openDoorError:g,batteryData:i,waitingForClose:p,isReadingBattery:m,isPreparing:f,analysis:c})=>{const{t:a}=ce();return e(b,{sx:{mt:2},children:[e(u,{variant:"h6",gutterBottom:!0,children:a("wizard:door.title")}),e(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:a("wizard:door.desc")}),e(A,{spacing:3,children:[e(ae,{variant:"outlined",children:e(ie,{children:[e(A,{direction:"row",alignItems:"center",spacing:1,sx:{mb:2},children:[e(Pe,{color:"primary"}),e(u,{variant:"h6",children:a("wizard:door.open")})]}),e(b,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(we,{label:a("codes:pin_label"),variant:"outlined",size:"small",value:t||"",onChange:S=>{const y=S.currentTarget.value.toUpperCase();/^[0-9AB]*$/.test(y)&&y.length<=6&&o({pinCode:y})},placeholder:a("wizard:door.pin_placeholder"),type:"text",fullWidth:!0,inputProps:{maxLength:6}}),e(R,{variant:"contained",onClick:n,disabled:r||!l,startIcon:r?e(oe,{size:20,color:"inherit"}):e(Pe,{}),children:a(r?"wizard:door.opening":"wizard:door.open")}),s&&!g&&e($,{severity:"success",children:a("wizard:door.success")}),g&&e($,{severity:"error",children:g})]})]})}),e(ae,{variant:"outlined",children:e(ie,{children:[e(A,{direction:"row",alignItems:"center",spacing:1,sx:{mb:2},children:[e(pt,{color:"primary"}),e(u,{variant:"h6",children:a("battery_level")})]}),e(b,{sx:{display:"flex",flexDirection:"column",gap:2},children:[!i&&!p&&!m&&!f&&e($,{severity:"info",children:a("wizard:battery.wait")}),p&&e($,{severity:"info",icon:e(oe,{size:20}),children:a("wizard:battery.waiting_close")}),(m||f)&&e($,{severity:"info",icon:e(oe,{size:20}),children:a("wizard:battery.analyzing")}),i&&e(b,{sx:{mt:2,p:2,bgcolor:"background.paper",borderRadius:1,border:1,borderColor:"divider"},children:[e(b,{display:"flex",justifyContent:"space-between",mb:1,children:[e(u,{variant:"body2",color:"text.primary",children:[a("wizard:battery.standard_level"),":"]}),e(u,{variant:"body2",fontWeight:"bold",color:"text.primary",children:i.standardLevel!==null?`${i.standardLevel}%`:"N/A"})]}),i.parsed&&e(ne,{children:[e(Ee,{sx:{my:1}}),e(u,{variant:"subtitle2",gutterBottom:!0,color:"text.primary",children:[a("wizard:battery.proprietary_data")," (",i.parsed.format,")"]}),i.parsed.level!==void 0&&e(b,{display:"flex",justifyContent:"space-between",children:[e(u,{variant:"body2",color:"text.primary",children:[a("battery_level")," (Proprietary):"]}),e(u,{variant:"body2",fontWeight:"bold",color:"text.primary",children:[i.parsed.level,"%"]})]}),i.parsed.first_mV!==void 0&&e(b,{display:"flex",justifyContent:"space-between",children:[e(u,{variant:"body2",color:"text.primary",children:"Voltage (First):"}),e(u,{variant:"body2",fontWeight:"bold",color:"text.primary",children:i.parsed.first_mV!==null?`${(i.parsed.first_mV/1e3).toFixed(2)} V`:"N/A"})]}),i.parsed.min_mV!==void 0&&e(b,{display:"flex",justifyContent:"space-between",children:[e(u,{variant:"body2",color:"text.primary",children:"Voltage (Min):"}),e(u,{variant:"body2",fontWeight:"bold",color:"text.primary",children:i.parsed.min_mV!==null?`${(i.parsed.min_mV/1e3).toFixed(2)} V`:"N/A"})]}),i.parsed.mean_mV!==void 0&&e(b,{display:"flex",justifyContent:"space-between",children:[e(u,{variant:"body2",color:"text.primary",children:"Voltage (Mean):"}),e(u,{variant:"body2",fontWeight:"bold",color:"text.primary",children:i.parsed.mean_mV!==null?`${(i.parsed.mean_mV/1e3).toFixed(2)} V`:"N/A"})]}),i.parsed.max_mV!==void 0&&e(b,{display:"flex",justifyContent:"space-between",children:[e(u,{variant:"body2",color:"text.primary",children:"Voltage (Max):"}),e(u,{variant:"body2",fontWeight:"bold",color:"text.primary",children:i.parsed.max_mV!==null?`${(i.parsed.max_mV/1e3).toFixed(2)} V`:"N/A"})]}),i.parsed.last_mV!==void 0&&e(b,{display:"flex",justifyContent:"space-between",children:[e(u,{variant:"body2",color:"text.primary",children:[a("wizard:battery.voltage_last"),":"]}),e(u,{variant:"body2",fontWeight:"bold",color:"text.primary",children:i.parsed.last_mV!==null?`${(i.parsed.last_mV/1e3).toFixed(2)} V`:"N/A"})]}),i.parsed.t1!==void 0&&e(b,{display:"flex",justifyContent:"space-between",children:[e(u,{variant:"body2",color:"text.primary",children:"T1:"}),e(u,{variant:"body2",fontWeight:"bold",color:"text.primary",children:i.parsed.t1})]}),i.parsed.t5!==void 0&&e(b,{display:"flex",justifyContent:"space-between",children:[e(u,{variant:"body2",color:"text.primary",children:"T5:"}),e(u,{variant:"body2",fontWeight:"bold",color:"text.primary",children:i.parsed.t5})]}),i.parsed.temp_C!==void 0&&e(b,{display:"flex",justifyContent:"space-between",children:[e(u,{variant:"body2",color:"text.primary",children:[a("wizard:battery.temperature"),":"]}),e(u,{variant:"body2",fontWeight:"bold",color:"text.primary",children:i.parsed.temp_C!==null?`${i.parsed.temp_C}°C`:"N/A"})]}),c&&e(b,{sx:{mt:2,p:1,border:"1px solid",borderColor:"divider",borderRadius:1,bgcolor:"background.paper"},children:[e(u,{variant:"caption",display:"block",color:"text.secondary",children:[a("wizard:battery.analysis"),":"]}),e(u,{variant:"body2",gutterBottom:!0,color:"text.primary",children:[a("wizard:battery.detected_type"),":"," ",e("strong",{children:c.detectedText})]}),e(u,{variant:"body2",color:c.consistencyStatus==="success"?"success.main":c.consistencyStatus==="error"?"error.main":"warning.main",fontWeight:"medium",children:c.consistencyText})]})]}),i.error&&e($,{severity:"warning",sx:{mt:1},children:i.error})]})]})]})})]})]})},kn=({questionAnswers:t,onAnswerQuestion:o})=>{const{t:n}=ce(["wizard","common"]),r=[{id:"has_scale",text:n("questions.has_scale"),expected:"Non"},{id:"anything_special",text:n("questions.anything_special"),expected:"Non"}];return e(b,{sx:{mt:2},children:[e(u,{variant:"h6",gutterBottom:!0,children:n("questions.title")}),e(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:n("questions.desc")}),e(A,{spacing:2,children:r.map(l=>{const s=t.find(g=>g.id===l.id);return e(ae,{variant:"outlined",children:e(ie,{children:[e(A,{direction:"row",spacing:1,alignItems:"flex-start",mb:2,children:[e(wn,{color:"action"}),e(u,{variant:"subtitle1",fontWeight:"medium",children:l.text})]}),e(A,{direction:"row",spacing:1,children:[e(R,{variant:s?.answer==="Oui"?"contained":"outlined",onClick:()=>o(l.id,"Oui",l.expected),color:s?.answer==="Oui"?"primary":"inherit",children:n("common:yes")}),e(R,{variant:s?.answer==="Non"?"contained":"outlined",onClick:()=>o(l.id,"Non",l.expected),color:s?.answer==="Non"?"primary":"inherit",children:n("common:no")}),e(R,{variant:s?.answer==="Inconnu"?"contained":"outlined",onClick:()=>o(l.id,"Inconnu",l.expected),color:s?.answer==="Inconnu"?"secondary":"inherit",children:n("common:unknown")})]})]})},l.id)})})]})},Rn=({customUuids:t,customResults:o,updateDebugWizardState:n})=>{const{t:r}=ce(["wizard","common","codes"]),{connect:l,disconnect:s,device:g}=Ce(),[i,p]=P(V(!1),"showAdvanced"),[m,f]=P(V(""),"customUuidInput"),[c,a]=P(V(!1),"isDiscoveringCustom"),S=()=>{if(!m)return;const d=m.trim().toLowerCase();t.includes(d)||(n({customUuids:[...t,d]}),f(""))},y=d=>{n({customUuids:t.filter(h=>h!==d)})},x=async()=>{if(t.length!==0){a(!0);try{console.log("DebugWizard: Disconnecting for custom discovery..."),s(),await new Promise(v=>setTimeout(v,gt)),console.log("DebugWizard: Reconnecting with custom services:",t),await l(t),await new Promise(v=>setTimeout(v,ft));const d=[],h=g;h?.gatt?.connected||console.warn("Device not marked as connected yet, checking GATT directly...");for(const v of t)try{console.log(`DebugWizard: Accessing service ${v}`);const C=h?.gatt;if(!C)continue;const w=await(await C.getPrimaryService(v)).getCharacteristics();for(const T of w)try{console.log(`DebugWizard: Reading characteristic ${T.uuid}`);const I=await T.readValue(),D=new Uint8Array(I.buffer),_=Array.from(D).map(U=>U.toString(16).padStart(2,"0").toUpperCase()).join(" ");d.push({serviceUuid:v,charUuid:T.uuid,value:_,timestamp:new Date().toISOString()})}catch(I){console.warn(`Failed to read char ${T.uuid} in service ${v}`,I)}}catch(C){console.warn(`Failed to access service ${v}`,C)}n({customResults:d})}catch(d){console.error("Custom discovery failed:",d)}finally{a(!1)}}};return e(b,{sx:{mt:2},children:[e(u,{variant:"h6",gutterBottom:!0,children:r("advanced.title")}),e($,{severity:"info",sx:{mb:3},children:r("advanced.warning")}),e(A,{spacing:3,children:[e(ae,{variant:"outlined",children:e(ie,{children:[e(b,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},onClick:()=>p(!i),children:[e(A,{direction:"row",alignItems:"center",spacing:1,children:[e(In,{color:"primary"}),e(u,{variant:"h6",children:r("advanced.tutorial_title")})]}),e(je,{children:i?e(Cn,{}):e(ut,{})})]}),e(mt,{in:i,children:e(b,{sx:{mt:3},children:[e(u,{variant:"body2",sx:{mb:2},children:r("advanced.tutorial_desc")}),e(A,{direction:"row",spacing:2,sx:{mt:2,justifyContent:"center"},children:[e(R,{variant:"outlined",href:"https://play.google.com/store/apps/details?id=no.nordicsemi.android.mcp",target:"_blank",rel:"noopener noreferrer",children:"Android (Play Store)"}),e(R,{variant:"outlined",href:"https://apps.apple.com/us/app/nrf-connect-for-mobile/id1054362403",target:"_blank",rel:"noopener noreferrer",children:"iOS (App Store)"})]})]})})]})}),e(ae,{variant:"outlined",children:e(ie,{children:[e(u,{variant:"subtitle1",gutterBottom:!0,fontWeight:"bold",children:r("advanced.explorer_title")}),e(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:r("advanced.explorer_desc")}),e(b,{sx:{display:"flex",gap:1,mb:2},children:[e(we,{size:"small",fullWidth:!0,placeholder:"ex: 0000180f-0000-1000-8000-00805f9b34fb",value:m,onChange:d=>f(d.currentTarget.value),onKeyPress:d=>d.key==="Enter"&&S()}),e(R,{variant:"outlined",onClick:S,children:r("codes:add_new")})]}),e(b,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:3},children:t.map(d=>e(Mt,{label:d,onDelete:()=>y(d),size:"small",color:"primary",variant:"outlined"},d))}),e(R,{variant:"contained",fullWidth:!0,disabled:t.length===0||c,onClick:x,startIcon:c?e(oe,{size:20,color:"inherit"}):e(Fe,{}),children:r(c?"advanced.exploring":"advanced.explore_button")}),o.length>0&&e(b,{sx:{mt:3},children:[e(u,{variant:"subtitle2",gutterBottom:!0,children:["Résultats trouvés : ",o.length]}),e(ht,{dense:!0,children:o.map((d,h)=>e(yt,{divider:!0,children:e(vt,{primary:`Char: ${d.charUuid.substring(0,8)}...`,secondary:`Service: ${d.serviceUuid.substring(0,8)}... | Val: ${d.value}`,secondaryTypographyProps:{sx:{fontFamily:"monospace",fontSize:"0.75rem"}}})},h))})]})]})})]})]})},Mn=({device:t,firmwareVersion:o,hardwareInference:n,deviceInfo:r,batteryData:l,analysis:s,pinCode:g,openDoorSuccess:i,openDoorError:p,questionAnswers:m,customUuids:f,customResults:c,serviceUuid:a,serviceResults:S})=>{const{t:y}=ce(["wizard","common","codes"]),[x,d]=P(V(!1),"copySuccess"),h={device:{name:t?.name,id:t?.id,firmwareVersion:o,hardwareInference:n,deviceInfo:r},status:{battery:l,analysis:s,doorTest:{attempted:!!g,success:i,error:p}},questionAnswers:m,customDiscovery:{uuids:f,results:c},advanced:{serviceUuid:a,results:S},timestamp:new Date().toISOString()},v=JSON.stringify(h,null,2),C=()=>{navigator.clipboard.writeText(v),d(!0)},z=!n||n.version==="Unknown",w=c.length>0,T=s?.consistencyStatus==="error"||s?.consistencyStatus==="warning",I=m.find(M=>M.id==="has_scale"&&M.answer==="Oui"),D=m.find(M=>M.id==="anything_special"&&M.answer==="Oui"),_=z||w||T||I||D,U=()=>{const M=`Debug Data: ${t?.name||"Unknown Boks"} - ${o||"Unknown FW"}`,W="```",ee=`Please find below the debug data captured via the Boks Web BLE tool.

${W}json
${v}
${W}`,B=new URLSearchParams;return B.set("title",M),B.set("body",ee),`${Ct}?${B.toString()}`};return e(b,{sx:{mt:2},children:[e(u,{variant:"h6",gutterBottom:!0,children:y("recap.title")}),e(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:y("recap.desc")}),_&&e($,{severity:"info",icon:e(bt,{}),sx:{mb:3},action:e(R,{color:"inherit",size:"small",href:U(),target:"_blank",onClick:()=>{},children:[" ",y("recap.open_issue")]}),children:y("recap.interesting_found")}),e(b,{sx:{position:"relative"},children:[e(we,{multiline:!0,fullWidth:!0,minRows:10,maxRows:20,value:v,variant:"outlined",InputProps:{readOnly:!0,style:{fontFamily:"monospace",fontSize:"0.875rem"}}}),e(je,{onClick:C,sx:{position:"absolute",top:8,right:8,bgcolor:"background.paper"},title:y("codes:copy_to_clipboard"),children:e(xt,{})})]}),e(St,{open:x,autoHideDuration:3e3,onClose:()=>d(!1),message:"Données de débogage copiées dans le presse-papier"})]})},Vn=()=>{const{t}=ce(),o=[t("wizard:steps.step1"),t("wizard:steps.step2"),t("wizard:steps.step3"),t("wizard:steps.step4"),t("wizard:steps.step5")],n=wt(),r=It(n.breakpoints.down("sm")),{debugWizardState:l,updateDebugWizardState:s,resetDebugWizardState:g}=Ln(),{activeDevice:i}=Lt(),{device:p,isConnected:m,connect:f,disconnect:c,getAllDeviceInfo:a,error:S}=Ce(),{activeStep:y,firmwareVersion:x,hardwareInference:d,deviceInfo:h,pinCode:v,openDoorSuccess:C,openDoorError:z,questionAnswers:w=[],serviceUuid:T,serviceResults:I=[],batteryData:D,batteryAnalysis:_,customUuids:U=[],customResults:M=[]}=l,{openDoor:W,isOpening:ee,doorStatus:B}=zt(),{isReading:he,batteryData:ye,analysis:Le,readBatteryDiagnostics:ze}=zn({batteryData:l.batteryData,analysis:l.batteryAnalysis}),[pe,Te]=P(V(!1),"isLoadingInfo"),de=P(Tt(!1),"isFetchingRef"),[ve,ge]=P(V(!1),"waitingForClose"),[fe,De]=P(V(!1),"isPreparing");Y(()=>(console.log("DebugWizard: Component Mounted"),()=>console.log("DebugWizard: Component Unmounted")),[]),Y(()=>{console.log(`DebugWizard: isConnected=${m}, activeDevice=${i?.id||"none"}`)},[m,i?.id]),Y(()=>{i?.door_pin_code&&!v&&s({pinCode:i.door_pin_code})},[i,v,s]),Y(()=>{console.log("DebugWizard: Check conditions - isConnected:",m,"firmwareVersion:",x,"isLoadingInfo:",pe,"isFetchingRef:",de.current);const L=!0;m&&!x&&!pe&&!de.current&&(async()=>{if(de.current){console.log("DebugWizard: already fetching, skipping");return}console.log("DebugWizard: condition met, starting fetchInfo"),de.current=!0,Te(!0);try{console.log("DebugWizard: Starting device info fetch sequence...");const F=await a(),E=F["Firmware Revision"];console.log("DebugWizard: Raw firmware revision:",E);const j=Dt(E);console.log("DebugWizard: Hardware Inference result:",j);let H=E||"Inconnu";j.version!=="Unknown"&&(H+=` (v${j.version} - ${j.label})`),console.log("DebugWizard: Final display version string:",H),s({firmwareVersion:H,hardwareInference:j,deviceInfo:F}),console.log("DebugWizard: Called updateDebugWizardState with:",H)}catch(F){console.error("DebugWizard: Error in fetchInfo:",F)}finally{setTimeout(()=>{Te(!1),de.current=!1,console.log("DebugWizard: Fetch sequence finished and lock cleared.")},500)}})()},[m,x,pe,s,a]);const He=()=>{s({firmwareVersion:null})},Ge=()=>{s({activeStep:y+1})},Ye=()=>{s({activeStep:y-1})},Qe=()=>{g(),c()},Ke=async()=>{if(s({openDoorError:null,openDoorSuccess:!1}),!v||v.length<4){s({openDoorError:"Veuillez entrer un code PIN valide (au moins 4 chiffres)"});return}try{await W(v),ge(!0),s({openDoorSuccess:!0})}catch(L){ge(!1);const te=L instanceof Error?L.message:String(L);s({openDoorError:te||"Échec de l'ouverture de la porte"})}},_e=Ne(async()=>{if(!p){console.warn("DebugWizard: No device for battery check");return}console.log("DebugWizard: Executing battery diagnostics...");const L=w.find(F=>F.id==="hardware_check"),te=L?{answer:L.answer,inference:d}:void 0;await ze(p,te)},[p,w,d,ze]);Y(()=>{ve&&B==="closed"&&(console.log("DebugWizard: Door closed, initiating battery check sequence"),ge(!1),De(!0))},[B,ve]),Y(()=>{if(fe){const L=setTimeout(()=>{console.log("DebugWizard: Preparation delay finished, checking battery..."),De(!1),_e()},2e3);return()=>clearTimeout(L)}},[fe,_e]),Y(()=>{ye&&s({batteryData:ye,batteryAnalysis:Le})},[ye,Le,s]);const Xe=(L,te,F)=>{const E=[...w||[]],j=E.findIndex(Ze=>Ze.id===L),H={id:L,answer:te,expected:F,timestamp:new Date().toISOString()};j>=0?E[j]=H:E.push(H),s({questionAnswers:E})},Je=L=>{switch(L){case 0:return e(Dn,{isConnected:m,isConnecting:!1,connect:f,error:S,device:p,firmwareVersion:x,isLoadingInfo:pe,onRetryFetch:He});case 1:return e(_n,{pinCode:v,updateDebugWizardState:s,onOpenDoor:Ke,isOpening:ee,isConnected:m,openDoorSuccess:C,openDoorError:z,batteryData:D,waitingForClose:ve,isReadingBattery:he,isPreparing:fe,analysis:_});case 2:return e(kn,{questionAnswers:w,onAnswerQuestion:Xe});case 3:return e(Rn,{customUuids:U,customResults:M,updateDebugWizardState:s});case 4:return e(Mn,{device:p,firmwareVersion:x,hardwareInference:d,deviceInfo:h,batteryData:D,analysis:_,pinCode:v,openDoorSuccess:C,openDoorError:z,questionAnswers:w,customUuids:U,customResults:M,serviceUuid:T,serviceResults:I});default:return"Unknown step"}};return e(Rt,{maxWidth:"md",sx:{mt:4,mb:4,px:r?1:3},children:e(Ve,{sx:{p:r?2:4},children:[e(u,{variant:r?"h5":"h4",component:"h1",gutterBottom:!0,align:"center",children:t("wizard:title")}),r?e(b,{sx:{mb:2},children:[e(Yt,{variant:"text",steps:o.length,position:"static",activeStep:y,nextButton:null,backButton:null,sx:{bgcolor:"transparent",justifyContent:"center","& .MuiMobileStepper-dot":{mx:.5}}}),e(u,{variant:"subtitle2",align:"center",color:"primary",sx:{mt:1},children:y<o.length?o[y]:t("common:finish")})]}):e(xn,{activeStep:y,sx:{pt:3,pb:5},alternativeLabel:!0,children:o.map(L=>e(Jt,{children:e(Oe,{children:L})},L))}),e(ne,{children:y===o.length?e(ne,{children:[e(u,{variant:"h5",gutterBottom:!0,children:t("wizard:finished.title")}),e(u,{variant:"subtitle1",children:t("wizard:finished.desc")}),e(b,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:e(R,{onClick:Qe,children:t("common:reset")})})]}):e(ne,{children:[Je(y),e(b,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:[y!==0&&e(R,{onClick:Ye,sx:{mr:1},children:t("common:back")}),e(R,{variant:"contained",onClick:Ge,disabled:y===0&&!m,children:y===o.length-1?t("common:finish"):t("common:next")})]})]})})]})})};export{Vn as DebugWizardPage};
