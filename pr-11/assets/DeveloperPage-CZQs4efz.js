import{g as Y,a as Z,D as q,u as G,f as y,T as d,b as e,d as ee,s as I,aQ as w,h as R,i as D,t as C,l as x,aR as _,aS as te,aT as ae,aU as oe,aV as re,o as u,aW as se,aa as ne,aX as le,aY as ie,as as ce,aZ as de,a9 as pe,a6 as ue,an as he,n as T,a8 as E,w as me,a_ as ge,Y as ve,H as P,I as A,F as H,a$ as be,b0 as ye,b1 as fe}from"./index-Cw714h1J.js";import{S as Se}from"./Stack-BifJ1U5Y.js";import{E as Ce}from"./Edit-DFY2ENTZ.js";import{D as xe}from"./Delete-Cn8Uo_qg.js";import{C as _e}from"./Container-CQ1bEQSY.js";function Te(t){return Y("MuiCardHeader",t)}const k=Z("MuiCardHeader",["root","avatar","action","content","title","subheader"]),ke=t=>{const{classes:o}=t;return ee({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Te,o)},Ie=I("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(t,o)=>[{[`& .${k.title}`]:o.title},{[`& .${k.subheader}`]:o.subheader},o.root]})({display:"flex",alignItems:"center",padding:16}),De=I("div",{name:"MuiCardHeader",slot:"Avatar"})({display:"flex",flex:"0 0 auto",marginRight:16}),we=I("div",{name:"MuiCardHeader",slot:"Action"})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Ee=I("div",{name:"MuiCardHeader",slot:"Content"})({flex:"1 1 auto",[`.${w.root}:where(& .${k.title})`]:{display:"block"},[`.${w.root}:where(& .${k.subheader})`]:{display:"block"}}),M=q(function(o,r){const i=G({props:o,name:"MuiCardHeader"}),{action:s,avatar:a,component:l="div",disableTypography:n=!1,subheader:h,subheaderTypographyProps:c,title:g,titleTypographyProps:p,slots:B={},slotProps:N={},...z}=i,m={...i,component:l,disableTypography:n},v=ke(m),b={slots:B,slotProps:{title:p,subheader:c,...N}};let f=g;const[L,O]=y("title",{className:v.title,elementType:d,externalForwardedProps:b,ownerState:m,additionalProps:{variant:a?"body2":"h5",component:"span"}});f!=null&&f.type!==d&&!n&&(f=e(L,{...O,children:f}));let S=h;const[$,U]=y("subheader",{className:v.subheader,elementType:d,externalForwardedProps:b,ownerState:m,additionalProps:{variant:a?"body2":"body1",color:"textSecondary",component:"span"}});S!=null&&S.type!==d&&!n&&(S=e($,{...U,children:S}));const[F,V]=y("root",{ref:r,className:v.root,elementType:Ie,externalForwardedProps:{...b,...z,component:l},ownerState:m}),[K,J]=y("avatar",{className:v.avatar,elementType:De,externalForwardedProps:b,ownerState:m}),[W,j]=y("content",{className:v.content,elementType:Ee,externalForwardedProps:b,ownerState:m}),[Q,X]=y("action",{className:v.action,elementType:we,externalForwardedProps:b,ownerState:m});return e(F,{...V,children:[a&&e(K,{...J,children:a}),e(W,{...j,children:[f,S]}),s&&e(Q,{...X,children:s})]})}),Pe=R(e("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),Ae=R(e("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),He=({tableName:t,item:o,primaryKey:r})=>{const[i,s]=C(x(!1),"isEditing"),[a,l]=C(x(JSON.stringify(o,null,2)),"editValue"),[n,h]=C(x(null),"error"),c=async()=>{try{const p=JSON.parse(a);await _.table(t).put(p),s(!1),h(null)}catch(p){h(p instanceof Error?p.message:"Invalid JSON")}},g=async()=>{confirm("Are you sure you want to delete this record?")&&await _.table(t).delete(r)};return i?e(u,{sx:{p:1},children:[e(ue,{fullWidth:!0,multiline:!0,minRows:3,value:a,onChange:p=>l(p.target.value),variant:"outlined",size:"small",sx:{fontFamily:"monospace",mb:1}}),n&&e(he,{severity:"error",sx:{mb:1},children:n}),e(Se,{direction:"row",spacing:1,justifyContent:"flex-end",children:[e(T,{startIcon:e(Pe,{}),onClick:()=>{s(!1),l(JSON.stringify(o,null,2)),h(null)},size:"small",children:"Cancel"}),e(T,{startIcon:e(Ae,{}),onClick:c,variant:"contained",size:"small",children:"Save"})]})]}):e(u,{children:[e(u,{sx:{display:"flex",justifyContent:"flex-end",mb:1},children:[e(E,{size:"small",onClick:()=>s(!0),children:e(Ce,{fontSize:"small"})}),e(E,{size:"small",onClick:g,color:"error",children:e(xe,{fontSize:"small"})})]}),e(u,{component:"pre",sx:{overflowX:"auto",fontSize:"0.75rem",m:0,p:1,bgcolor:"action.hover",borderRadius:1},children:JSON.stringify(o,null,2)})]})},Me=({tableName:t})=>{const{t:o}=D(["settings"]),r=se(()=>_.table(t).toArray(),[t]),s=_.table(t).schema.primKey.name;return r?r.length===0?e(d,{children:o("settings:developer.no_records")}):e(pe,{children:r.map((a,l)=>{const n=a[s];return e(ne,{disablePadding:!0,children:e(le,{sx:{width:"100%"},children:[e(ie,{expandIcon:e(ce,{}),children:e(d,{noWrap:!0,children:a.id||a.name||a.key||`Record ${l}`})}),e(de,{children:e(He,{tableName:t,item:a,primaryKey:n})})]})},n||l)})}):e(d,{children:o("settings:developer.loading")})},Re=()=>{const{t}=D(["settings"]),[o,r]=C(x(""),"selectedTable"),i=_.tables.map(a=>a.name),s=a=>{r(a.target.value)};return e(u,{sx:{mt:2},children:[e(te,{fullWidth:!0,size:"small",sx:{mb:2},children:[e(ae,{children:t("settings:developer.select_table")}),e(oe,{value:o,label:t("settings:developer.select_table"),onChange:s,children:i.map(a=>e(re,{value:a,children:a},a))})]}),o&&e(Me,{tableName:o})]})},$e=()=>{const{t}=D(["settings"]),o=me(),{isDeveloperMode:r,disableDeveloperMode:i}=ge(),[s,a]=C(x(!1),"simulatorEnabled");ve(()=>{r||o("/");const c=localStorage.getItem("BOKS_SIMULATOR_ENABLED")==="true";a(c)},[r,o]);const l=()=>{i(),o("/")},n=c=>{const g=c.target.checked;a(g),g?localStorage.setItem("BOKS_SIMULATOR_ENABLED","true"):localStorage.removeItem("BOKS_SIMULATOR_ENABLED"),window.location.reload()},h=async()=>{try{confirm(t("settings:developer.mock_data_confirm"))&&(await fe.mockData(),alert(t("settings:developer.mock_data_success")))}catch(c){console.error(c),alert(t("settings:developer.mock_data_failed"))}};return e(_e,{maxWidth:"md",sx:{py:2},children:[e(u,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(d,{variant:"h4",children:t("settings:developer.page_title")}),e(T,{variant:"outlined",color:"error",onClick:l,children:t("settings:developer.disable_mode")})]}),e(P,{sx:{mb:3},children:[e(M,{title:t("settings:developer.simulators_tools")}),e(A,{}),e(H,{children:e(u,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(be,{control:e(ye,{checked:s,onChange:n}),label:t("settings:developer.enable_simulator")}),e(u,{children:[e(T,{variant:"contained",onClick:h,children:t("settings:developer.load_mock_data")}),e(d,{variant:"caption",display:"block",color:"text.secondary",sx:{mt:1},children:t("settings:developer.mock_data_helper")})]})]})})]}),e(P,{children:[e(M,{title:t("settings:developer.db_editor"),subheader:t("settings:developer.db_editor_helper")}),e(A,{}),e(H,{children:e(Re,{})})]})]})};export{$e as DeveloperPage};
