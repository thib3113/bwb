import{g as Z,a as q,D as G,u as ee,f as y,T as d,b as e,d as te,s as D,aQ as w,h as B,i as I,t as C,l as x,aR as T,aS as ae,aT as oe,aU as re,aV as se,o as p,aW as ne,aa as le,aX as ie,aY as ce,as as de,aZ as pe,a9 as ue,a6 as he,an as me,n as _,a8 as E,w as ge,a_ as ve,Y as be,H as A,I as P,F as H,a$ as ye,b0 as fe,b1 as M}from"./index-BraCgBdp.js";import{S as Se}from"./Stack-CJQZJcOc.js";import{E as Ce}from"./Edit-8j8xbvD4.js";import{D as xe}from"./Delete-CLcn3Zru.js";import{C as _e}from"./Container-FQqHj1eQ.js";function Te(t){return Z("MuiCardHeader",t)}const k=q("MuiCardHeader",["root","avatar","action","content","title","subheader"]),ke=t=>{const{classes:o}=t;return te({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Te,o)},De=D("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(t,o)=>[{[`& .${k.title}`]:o.title},{[`& .${k.subheader}`]:o.subheader},o.root]})({display:"flex",alignItems:"center",padding:16}),Ie=D("div",{name:"MuiCardHeader",slot:"Avatar"})({display:"flex",flex:"0 0 auto",marginRight:16}),we=D("div",{name:"MuiCardHeader",slot:"Action"})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Ee=D("div",{name:"MuiCardHeader",slot:"Content"})({flex:"1 1 auto",[`.${w.root}:where(& .${k.title})`]:{display:"block"},[`.${w.root}:where(& .${k.subheader})`]:{display:"block"}}),R=G(function(o,r){const i=ee({props:o,name:"MuiCardHeader"}),{action:s,avatar:a,component:l="div",disableTypography:n=!1,subheader:h,subheaderTypographyProps:c,title:g,titleTypographyProps:u,slots:N={},slotProps:z={},...L}=i,m={...i,component:l,disableTypography:n},v=ke(m),b={slots:N,slotProps:{title:u,subheader:c,...z}};let f=g;const[O,$]=y("title",{className:v.title,elementType:d,externalForwardedProps:b,ownerState:m,additionalProps:{variant:a?"body2":"h5",component:"span"}});f!=null&&f.type!==d&&!n&&(f=e(O,{...$,children:f}));let S=h;const[U,F]=y("subheader",{className:v.subheader,elementType:d,externalForwardedProps:b,ownerState:m,additionalProps:{variant:a?"body2":"body1",color:"textSecondary",component:"span"}});S!=null&&S.type!==d&&!n&&(S=e(U,{...F,children:S}));const[V,K]=y("root",{ref:r,className:v.root,elementType:De,externalForwardedProps:{...b,...L,component:l},ownerState:m}),[J,W]=y("avatar",{className:v.avatar,elementType:Ie,externalForwardedProps:b,ownerState:m}),[j,Q]=y("content",{className:v.content,elementType:Ee,externalForwardedProps:b,ownerState:m}),[X,Y]=y("action",{className:v.action,elementType:we,externalForwardedProps:b,ownerState:m});return e(V,{...K,children:[a&&e(J,{...W,children:a}),e(j,{...Q,children:[f,S]}),s&&e(X,{...Y,children:s})]})}),Ae=B(e("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),Pe=B(e("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),He=({tableName:t,item:o,primaryKey:r})=>{const[i,s]=C(x(!1),"isEditing"),[a,l]=C(x(JSON.stringify(o,null,2)),"editValue"),[n,h]=C(x(null),"error"),c=async()=>{try{const u=JSON.parse(a);await T.table(t).put(u),s(!1),h(null)}catch(u){h(u instanceof Error?u.message:"Invalid JSON")}},g=async()=>{confirm("Are you sure you want to delete this record?")&&await T.table(t).delete(r)};return i?e(p,{sx:{p:1},children:[e(he,{fullWidth:!0,multiline:!0,minRows:3,value:a,onChange:u=>l(u.target.value),variant:"outlined",size:"small",sx:{fontFamily:"monospace",mb:1}}),n&&e(me,{severity:"error",sx:{mb:1},children:n}),e(Se,{direction:"row",spacing:1,justifyContent:"flex-end",children:[e(_,{startIcon:e(Ae,{}),onClick:()=>{s(!1),l(JSON.stringify(o,null,2)),h(null)},size:"small",children:"Cancel"}),e(_,{startIcon:e(Pe,{}),onClick:c,variant:"contained",size:"small",children:"Save"})]})]}):e(p,{children:[e(p,{sx:{display:"flex",justifyContent:"flex-end",mb:1},children:[e(E,{size:"small",onClick:()=>s(!0),children:e(Ce,{fontSize:"small"})}),e(E,{size:"small",onClick:g,color:"error",children:e(xe,{fontSize:"small"})})]}),e(p,{component:"pre",sx:{overflowX:"auto",fontSize:"0.75rem",m:0,p:1,bgcolor:"action.hover",borderRadius:1},children:JSON.stringify(o,null,2)})]})},Me=({tableName:t})=>{const{t:o}=I(["settings"]),r=ne(()=>T.table(t).toArray(),[t]),s=T.table(t).schema.primKey.name;return r?r.length===0?e(d,{children:o("settings:developer.no_records")}):e(ue,{children:r.map((a,l)=>{const n=a[s];return e(le,{disablePadding:!0,children:e(ie,{sx:{width:"100%"},children:[e(ce,{expandIcon:e(de,{}),children:e(d,{noWrap:!0,children:a.id||a.name||a.key||`Record ${l}`})}),e(pe,{children:e(He,{tableName:t,item:a,primaryKey:n})})]})},n||l)})}):e(d,{children:o("settings:developer.loading")})},Re=()=>{const{t}=I(["settings"]),[o,r]=C(x(""),"selectedTable"),i=T.tables.map(a=>a.name),s=a=>{r(a.target.value)};return e(p,{sx:{mt:2},children:[e(ae,{fullWidth:!0,size:"small",sx:{mb:2},children:[e(oe,{children:t("settings:developer.select_table")}),e(re,{value:o,label:t("settings:developer.select_table"),onChange:s,children:i.map(a=>e(se,{value:a,children:a},a))})]}),o&&e(Me,{tableName:o})]})},$e=()=>{const{t}=I(["settings"]),o=ge(),{isDeveloperMode:r,disableDeveloperMode:i}=ve(),[s,a]=C(x(!1),"simulatorEnabled");be(()=>{r||o("/");const c=localStorage.getItem("BOKS_SIMULATOR_ENABLED")==="true";a(c)},[r,o]);const l=()=>{i(),o("/")},n=c=>{const g=c.target.checked;a(g),g?localStorage.setItem("BOKS_SIMULATOR_ENABLED","true"):localStorage.removeItem("BOKS_SIMULATOR_ENABLED"),window.location.reload()},h=async()=>{try{confirm(t("settings:developer.mock_data_confirm"))&&(await M.mockData(),alert(t("settings:developer.mock_data_success")))}catch(c){console.error(c),alert(t("settings:developer.mock_data_failed"))}};return e(_e,{maxWidth:"md",sx:{py:2},children:[e(p,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(d,{variant:"h4",children:t("settings:developer.page_title")}),e(_,{variant:"outlined",color:"error",onClick:l,children:t("settings:developer.disable_mode")})]}),e(A,{sx:{mb:3},children:[e(R,{title:t("settings:developer.simulators_tools")}),e(P,{}),e(H,{children:e(p,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(ye,{control:e(fe,{checked:s,onChange:n}),label:t("settings:developer.enable_simulator")}),e(p,{children:[e(p,{sx:{display:"flex",gap:2},children:[e(_,{variant:"contained",onClick:h,children:t("settings:developer.load_mock_data")}),e(_,{variant:"outlined",color:"error",onClick:()=>{confirm(t("settings:developer.clear_db_confirm"))&&M.clearAllData()},children:t("settings:developer.clear_db")})]}),e(d,{variant:"caption",display:"block",color:"text.secondary",sx:{mt:1},children:t("settings:developer.mock_data_helper")})]})]})})]}),e(A,{children:[e(R,{title:t("settings:developer.db_editor"),subheader:t("settings:developer.db_editor_helper")}),e(P,{}),e(H,{children:e(Re,{})})]})]})};export{$e as DeveloperPage};
