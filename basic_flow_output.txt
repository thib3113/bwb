
> boks-web-ble@1.0.0 test:e2e /app
> playwright test tests/basic_flow.spec.ts


Running 3 tests using 1 worker
[Browser Console] [vite] connecting...
[Browser Console] [vite] connected.
[Browser Console] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[Browser Console] Database initialized with tables: [users, devices, device_secrets, codes, logs, settings, nfc_tags]
[Browser Console] ‚ö†Ô∏è BOKS SIMULATOR ENABLED via localStorage ‚ö†Ô∏è
[Browser Console] [Main] React initialized
[Browser Console] [Main] Rendering app...
[Browser Console] [Main] Using basename: ""
[Browser Console] [DB Hook] Creating in users {id: local-user, is_offline: true, updated_at: 1770576437068}
[Browser Console] Default local user created
[Browser Console] ‚ö†Ô∏è BoksBLEService: Initializing with SimulatedAdapter ‚ö†Ô∏è
[Browser Console] [BoksSimulator] Controller exposed to window
[Browser Console] ‚ö†Ô∏è USING BOKS SIMULATOR ADAPTER ‚ö†Ô∏è
[Browser Console] StorageService and DB exposed to window.boksDebug
[Browser Console] [SessionProvider] Initialized
¬∑[Browser Console] [vite] connecting...
[Browser Console] [vite] connected.
[Browser Console] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[Browser Console] Database initialized with tables: [users, devices, device_secrets, codes, logs, settings, nfc_tags]
[Browser Console] ‚ö†Ô∏è BOKS SIMULATOR ENABLED via localStorage ‚ö†Ô∏è
[Browser Console] [Main] React initialized
[Browser Console] [Main] Rendering app...
[Browser Console] [Main] Using basename: ""
[Browser Console] [DB Hook] Creating in users {id: local-user, is_offline: true, updated_at: 1770576443383}
[Browser Console] Default local user created
[Browser Console] ‚ö†Ô∏è BoksBLEService: Initializing with SimulatedAdapter ‚ö†Ô∏è
[Browser Console] [BoksSimulator] Controller exposed to window
[Browser Console] ‚ö†Ô∏è USING BOKS SIMULATOR ADAPTER ‚ö†Ô∏è
[Browser Console] StorageService and DB exposed to window.boksDebug
[Browser Console] [SessionProvider] Initialized
[Browser Console] [SimulatedAdapter] Connecting...
[Browser Console] [Header Debug] Connected {hasActiveDevice: false, activeBattery: undefined, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: undefined}
[Browser Console] [DB Hook] Creating in devices {id: 0b312d69-8997-49aa-8d13-556bac475b6c, ble_name: SIMULATOR-001, friendly_name: Boks Simulator, door_pin_code: 123456, role: admin}
[Browser Console] [DB Hook] Creating in device_secrets {device_id: 0b312d69-8997-49aa-8d13-556bac475b6c, configuration_key: AABBCCDD}
[Browser Console] [DB Hook] Cascading update to device 0b312d69-8997-49aa-8d13-556bac475b6c
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] [DB Hook] Updating in devices {updated_at: 1770576444812}
[Browser Console] StorageService and DB exposed to window.boksDebug
[Browser Console] [Header Debug] Connected {hasActiveDevice: true, activeBattery: undefined, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: undefined}
[Browser Console] [Header Debug] Connected {hasActiveDevice: true, activeBattery: undefined, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: undefined}
[Browser Console] [DB Hook] Creating in settings {key: lastActiveDeviceId, value: 0b312d69-8997-49aa-8d13-556bac475b6c}
[Browser Console] [DB Hook] Updating in devices {battery_level: 100}
[Browser Console] [Header Debug] Connected {hasActiveDevice: true, activeBattery: 100, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: 100}
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
[Browser Console] [DB Hook] Updating in devices {last_connected_at: 1770576444928}
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] [Header Debug] Connected {hasActiveDevice: true, activeBattery: 100, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: 100}
[Browser Console] [DeviceContext] 0xC3 received. Payload length: 4. Master=1, Single=0, Full: [0, 1, 0, 0]
[Browser Console] [DB Hook] Updating in devices {firmware_revision: 10/125, hardware_version: 4.0, software_revision: 4.1.14}
[Browser Console] [DB Hook] Updating in devices {master_code_count: 1, single_code_count: 0}
[Browser Console] StorageService and DB exposed to window.boksDebug
[Browser Console] [Header Debug] Connected {hasActiveDevice: true, activeBattery: 100, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: 100}
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
[Browser Console] [DeviceContext] Device state after C3 update: {id: 0b312d69-8997-49aa-8d13-556bac475b6c, ble_name: SIMULATOR-001, friendly_name: Boks Simulator, door_pin_code: 123456, role: admin}
[Browser Console] [DB Hook] Updating in devices {last_connected_at: 1770576445327}
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] [Header Debug] Connected {hasActiveDevice: true, activeBattery: 100, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: 100}
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
[Browser Console] [DeviceLogContext] Auto-sync: executing refreshCodeCount() first
[Browser Console] [Simulator Fixture] Captured TX: 20
[Browser Console] [DeviceContext] 0xC3 received. Payload length: 4. Master=1, Single=0, Full: [0, 1, 0, 0]
[Browser Console] [DeviceContext] Device state after C3 update: {id: 0b312d69-8997-49aa-8d13-556bac475b6c, ble_name: SIMULATOR-001, friendly_name: Boks Simulator, door_pin_code: 123456, role: admin}
Redirected to My Boks. Navigating back via Menu...
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
[Browser Console] [DeviceLogContext] Auto-sync: calling requestLogs()
[Browser Console] [Simulator Fixture] Captured TX: 7
[Browser Console] [DeviceContext] 0x79 received (Req: 0x7). Logs: 0
[Browser Console] [DeviceLogContext] Updated lastReceivedLogCountRef: 0
[Browser Console] [DeviceLogContext] Auto-sync: requestLogs() finished
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
[Browser Console] [DeviceContext] 0x79 received (Req: 0x7). Logs: 0
[Browser Console] [DeviceLogContext] Updated lastReceivedLogCountRef: 0
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] StorageService and DB exposed to window.boksDebug
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
[Browser Console] StorageService and DB exposed to window.boksDebug
[Browser Console] [DB Hook] Updating in devices {last_connected_at: 1770576447447}
¬∑[Browser Console] [vite] connecting...
[Browser Console] [vite] connected.
[Browser Console] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[Browser Console] Database initialized with tables: [users, devices, device_secrets, codes, logs, settings, nfc_tags]
[Browser Console] ‚ö†Ô∏è BOKS SIMULATOR ENABLED via localStorage ‚ö†Ô∏è
[Browser Console] [Main] React initialized
[Browser Console] [Main] Rendering app...
[Browser Console] [Main] Using basename: ""
[Browser Console] [DB Hook] Creating in users {id: local-user, is_offline: true, updated_at: 1770576452322}
[Browser Console] Default local user created
[Browser Console] ‚ö†Ô∏è BoksBLEService: Initializing with SimulatedAdapter ‚ö†Ô∏è
[Browser Console] [BoksSimulator] Controller exposed to window
[Browser Console] ‚ö†Ô∏è USING BOKS SIMULATOR ADAPTER ‚ö†Ô∏è
[Browser Console] StorageService and DB exposed to window.boksDebug
[Browser Console] [SessionProvider] Initialized
[Browser Console] [SimulatedAdapter] Connecting...
[Browser Console] [Header Debug] Connected {hasActiveDevice: false, activeBattery: undefined, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: undefined}
[Browser Console] [DB Hook] Creating in devices {id: 3058d8b1-c53f-493e-a659-76cded6af03a, ble_name: SIMULATOR-001, friendly_name: Boks Simulator, door_pin_code: 123456, role: admin}
[Browser Console] [DB Hook] Creating in device_secrets {device_id: 3058d8b1-c53f-493e-a659-76cded6af03a, configuration_key: AABBCCDD}
[Browser Console] [DB Hook] Cascading update to device 3058d8b1-c53f-493e-a659-76cded6af03a
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] StorageService and DB exposed to window.boksDebug
[Browser Console] [DB Hook] Updating in devices {updated_at: 1770576453599}
[Browser Console] [Header Debug] Connected {hasActiveDevice: true, activeBattery: undefined, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: undefined}
[Browser Console] [DB Hook] Creating in settings {key: lastActiveDeviceId, value: 3058d8b1-c53f-493e-a659-76cded6af03a}
[Browser Console] [Header Debug] Connected {hasActiveDevice: true, activeBattery: undefined, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: undefined}
[Browser Console] [DB Hook] Updating in devices {battery_level: 100}
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
[Browser Console] [Header Debug] Connected {hasActiveDevice: true, activeBattery: 100, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: 100}
[Browser Console] [DB Hook] Updating in devices {last_connected_at: 1770576453695}
[Browser Console] [Header Debug] Connected {hasActiveDevice: true, activeBattery: 100, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: 100}
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] [DB Hook] Updating in devices {firmware_revision: 10/125, hardware_version: 4.0, software_revision: 4.1.14}
[Browser Console] [DeviceContext] 0xC3 received. Payload length: 4. Master=1, Single=0, Full: [0, 1, 0, 0]
[Browser Console] [DB Hook] Updating in devices {master_code_count: 1, single_code_count: 0}
[Browser Console] StorageService and DB exposed to window.boksDebug
[Browser Console] [Header Debug] Connected {hasActiveDevice: true, activeBattery: 100, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: 100}
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
[Browser Console] [DeviceContext] Device state after C3 update: {id: 3058d8b1-c53f-493e-a659-76cded6af03a, ble_name: SIMULATOR-001, friendly_name: Boks Simulator, door_pin_code: 123456, role: admin}
[Browser Console] [DB Hook] Updating in devices {last_connected_at: 1770576454106}
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] [Header Debug] Connected {hasActiveDevice: true, activeBattery: 100, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: 100}
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
[Browser Console] [DeviceLogContext] Auto-sync: executing refreshCodeCount() first
[Browser Console] [Simulator Fixture] Captured TX: 20
[Browser Console] [DeviceContext] 0xC3 received. Payload length: 4. Master=1, Single=0, Full: [0, 1, 0, 0]
[Browser Console] [DeviceContext] Device state after C3 update: {id: 3058d8b1-c53f-493e-a659-76cded6af03a, ble_name: SIMULATOR-001, friendly_name: Boks Simulator, door_pin_code: 123456, role: admin}
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
[Browser Console] [DeviceLogContext] Auto-sync: calling requestLogs()
[Browser Console] [Simulator Fixture] Captured TX: 7
[Browser Console] [DeviceContext] 0x79 received (Req: 0x7). Logs: 0
[Browser Console] [DeviceLogContext] Updated lastReceivedLogCountRef: 0
[Browser Console] [DeviceLogContext] Auto-sync: requestLogs() finished
[Browser Console] [DeviceContext] 0x79 received (Req: 0x7). Logs: 0
[Browser Console] [DeviceLogContext] Updated lastReceivedLogCountRef: 0
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
Redirected to My Boks. Navigating back via Menu...
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
[Browser Console] StorageService and DB exposed to window.boksDebug
[Browser Console] [DB Hook] Updating in devices {last_connected_at: 1770576456530}
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] StorageService and DB exposed to window.boksDebug
[Browser Console] [Header Debug] Connected {hasActiveDevice: true, activeBattery: 100, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: 100}
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
[Browser Console] [DB Hook] Updating in devices {last_connected_at: 1770576456689}
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] [Header Debug] Connected {hasActiveDevice: true, activeBattery: 100, hasDevice: true, deviceBattery: undefined, displayBatteryLevel: 100}
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
[Browser Console] [Simulator Fixture] Captured TX: 1
[Browser Console] [Simulator] BLE Open Door Request: 123456
[Browser Console] [Simulator] Door Opened via ble
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
[Browser Console] [DeviceContext] Standard Battery Level read: 100%
[Browser Console] [DeviceContext] Firmware Revision: 10/125
[Browser Console] [DeviceContext] Mapped HW Version: 4.0 from FW 10/125
[Browser Console] [DeviceContext] Software Revision: 4.1.14
¬∑
  3 passed (39.8s)
::notice title=üé≠ Playwright Run Summary::  3 passed (39.8s)
