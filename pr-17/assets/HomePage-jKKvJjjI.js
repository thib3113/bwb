import{g as k,a as A,D as M,u as S,b as e,O as H,m as W,_ as V,c as P,d as z,s as C,e as B,f as T,B as j,h as D,i as R,j as O,k as K,t as q,l as G,T as f,n as J,o as v,C as Q,p as X,q as Y,r as Z,v as tt,w as ot,x as et,S as nt}from"./index-DFh4OPRe.js";function st(t){return k("MuiBottomNavigation",t)}A("MuiBottomNavigation",["root"]);const at=t=>{const{classes:o}=t;return z({root:["root"]},st,o)},it=C("div",{name:"MuiBottomNavigation",slot:"Root"})(B(({theme:t})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(t.vars||t).palette.background.paper}))),rt=M(function(o,n){const s=S({props:o,name:"MuiBottomNavigation"}),{children:i,className:r,component:a="div",onChange:d,showLabels:c=!1,value:l,...u}=s,g={...s,component:a,showLabels:c},y=at(g);return e(it,{as:a,className:P(y.root,r),ref:n,ownerState:g,...u,children:H.map(i,(p,b)=>{if(!W(p))return null;const m=p.props.value===void 0?b:p.props.value;return V(p,{selected:m===l,showLabel:p.props.showLabel!==void 0?p.props.showLabel:c,value:m,onChange:d})})})});function ct(t){return k("MuiBottomNavigationAction",t)}const I=A("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),lt=t=>{const{classes:o,showLabel:n,selected:s}=t;return z({root:["root",!n&&!s&&"iconOnly",s&&"selected"],label:["label",!n&&!s&&"iconOnly",s&&"selected"]},ct,o)},pt=C(j,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,!n.showLabel&&!n.selected&&o.iconOnly]}})(B(({theme:t})=>({transition:t.transitions.create(["color","padding-top"],{duration:t.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(t.vars||t).palette.text.secondary,flexDirection:"column",flex:"1",[`&.${I.selected}`]:{color:(t.vars||t).palette.primary.main},variants:[{props:({showLabel:o,selected:n})=>!o&&!n,style:{paddingTop:14}},{props:({showLabel:o,selected:n,label:s})=>!o&&!n&&!s,style:{paddingTop:0}}]}))),dt=C("span",{name:"MuiBottomNavigationAction",slot:"Label"})(B(({theme:t})=>({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s",[`&.${I.selected}`]:{fontSize:t.typography.pxToRem(14)},variants:[{props:({showLabel:o,selected:n})=>!o&&!n,style:{opacity:0,transitionDelay:"0s"}}]}))),x=M(function(o,n){const s=S({props:o,name:"MuiBottomNavigationAction"}),{className:i,icon:r,label:a,onChange:d,onClick:c,selected:l,showLabel:u,value:g,slots:y={},slotProps:p={},...b}=s,m=s,N=lt(m),E=h=>{d&&d(h,g),c&&c(h)},w={slots:y,slotProps:p},[U,_]=T("root",{elementType:pt,externalForwardedProps:{...w,...b},shouldForwardComponentProp:!0,ownerState:m,ref:n,className:P(N.root,i),additionalProps:{focusRipple:!0},getSlotProps:h=>({...h,onClick:L=>{h.onClick?.(L),E(L)}})}),[$,F]=T("label",{elementType:dt,externalForwardedProps:w,ownerState:m,className:N.label});return e(U,{..._,children:[r,e($,{...F,children:a})]})}),ut=D(e("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"})),gt=D(e("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"})),mt=({showNotification:t})=>{const{t:o}=R(),n=O(),{connect:s,isConnecting:i}=K(),[r,a]=q(G(null),"connectionError"),d=async()=>{a(null);try{await s(),t(o("ble.connected"),"success")}catch(c){const l=X(c),u=l.startsWith("errors.")?o(l):l;a(u),t(`${o("ble.connection_failed")}: ${u}`,"error")}};return e(v,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",p:3,textAlign:"center"},children:[e(f,{variant:"h4",component:"h1",gutterBottom:!0,children:o("app_title")}),e(f,{variant:"h6",sx:{mb:4,color:n.palette.text.secondary},children:o("not_connected.message")}),e(J,{variant:"contained",size:"large",onClick:d,disabled:i,sx:{py:1.5,px:4,fontSize:"1.1rem",mb:2},children:i?e(v,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(Q,{size:24,sx:{color:"white"}}),o("connecting")]}):o("connection.connect")}),r&&e(f,{variant:"body2",color:"error",sx:{mt:2},children:r})]})},vt=()=>{const{t}=R(["common","codes","logs","settings"]),o=O(),{knownDevices:n}=Y(),{showNotification:s,hideNotification:i}=Z(),r=tt(),a=ot(),c=r.pathname.endsWith("/logs")?1:r.pathname.endsWith("/settings")?2:0;if(n.length===0)return e(mt,{showNotification:s});const l=(u,g)=>{switch(g){case 0:a("/codes");break;case 1:a("/logs");break;case 2:a("/settings");break;default:a("/codes")}};return e(v,{sx:{width:"100%",display:"flex",flexDirection:"column",height:"100%"},children:[e(v,{sx:{flexGrow:1,overflow:"auto"},children:[e(et,{context:{showNotification:s,hideNotification:i}}),e(v,{sx:{height:160}})]}),e(rt,{value:c,onChange:l,showLabels:!0,sx:{width:"100%",position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,backgroundColor:o.palette.background.paper},children:[e(x,{label:t("codes:title"),icon:e(gt,{})}),e(x,{label:t("logs:title"),icon:e(ut,{})}),e(x,{label:t("settings:title"),icon:e(nt,{})})]})]})};export{vt as HomePage};
