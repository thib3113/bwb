import{h as ie,b as n,g as ce,a as de,D as ue,u as pe,f as V,c as z,l as E,Q as F,d as fe,s as L,e as Ce,R as $t,U as Gt,m as lt,_ as at,V as _e,W as it,B as ct,X as Ie,Y as Ht,Z as dt,$ as ut,a0 as pt,a1 as we,j as Vt,a2 as Ae,a3 as oe,a4 as Xt,O as Yt,a5 as Kt,a6 as qt,i as Le,q as Me,t as U,a7 as jt,T as k,I as Qt,H as Zt,F as Jt,o as A,a8 as ye,a9 as eo,aa as Fe,ab as to,ac as oo,n as Z,ad as no,ae as ro,af as so,ag as te,ah as lo,ai as H,aj as ao,ak as Be,al as io,am as co,an as ft,ao as ht,ap as bt,aq as uo,ar as po,as as fo,C as ho,at as ve,au as bo,k as mo,v as go}from"./index-Co9PPXCM.js";import{I as et,V as tt,a as ot,A as vo}from"./VisibilityOff-CAUkvDWH.js";import{D as So}from"./Delete-ip5nFR04.js";const yo=ie(n("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function _o(e){return ce("MuiAvatar",e)}de("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Io=e=>{const{classes:t,variant:o,colorDefault:r}=e;return fe({root:["root",o,r&&"colorDefault"],img:["img"],fallback:["fallback"]},_o,t)},wo=L("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],o.colorDefault&&t.colorDefault]}})(Ce(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),Co=L("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),To=L(yo,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function xo({crossOrigin:e,referrerPolicy:t,src:o,srcSet:r}){const[c,l]=E(!1);return F(()=>{if(!o&&!r)return;l(!1);let u=!0;const p=new Image;return p.onload=()=>{u&&l("loaded")},p.onerror=()=>{u&&l("error")},p.crossOrigin=e,p.referrerPolicy=t,p.src=o,r&&(p.srcset=r),()=>{u=!1}},[e,t,o,r]),c}const Ro=ue(function(t,o){const r=pe({props:t,name:"MuiAvatar"}),{alt:c,children:l,className:u,component:p="div",slots:i={},slotProps:g={},imgProps:m,sizes:_,src:y,srcSet:I,variant:x="circular",...f}=r;let h=null;const a={...r,component:p,variant:x},w=xo({...m,...typeof g.img=="function"?g.img(a):g.img,src:y,srcSet:I}),B=y||I,b=B&&w!=="error";a.colorDefault=!b,delete a.ownerState;const R=Io(a),[W,K]=V("root",{ref:o,className:z(R.root,u),elementType:wo,externalForwardedProps:{slots:i,slotProps:g,component:p,...f},ownerState:a}),[J,X]=V("img",{className:R.img,elementType:Co,externalForwardedProps:{slots:i,slotProps:{img:{...m,...g.img}}},additionalProps:{alt:c,src:y,srcSet:I,sizes:_},ownerState:a}),[P,ne]=V("fallback",{className:R.fallback,elementType:To,externalForwardedProps:{slots:i,slotProps:g},shouldForwardComponentProp:!0,ownerState:a});return b?h=n(J,{...X}):l||l===0?h=l:B&&c?h=c[0]:h=n(P,{...ne}),n(W,{...K,children:h})});function Eo(e){return ce("MuiListItemAvatar",e)}de("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Ao=e=>{const{alignItems:t,classes:o}=e;return fe({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},Eo,o)},Bo=L("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.alignItems==="flex-start"&&t.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),ko=ue(function(t,o){const r=pe({props:t,name:"MuiListItemAvatar"}),{className:c,...l}=r,u=$t(Gt),p={...r,alignItems:u.alignItems},i=Ao(p);return n(Bo,{className:z(i.root,c),ownerState:p,ref:o,...l})});function Do(e){return ce("MuiTab",e)}const D=de("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),Po=e=>{const{classes:t,textColor:o,fullWidth:r,wrapped:c,icon:l,label:u,selected:p,disabled:i}=e,g={root:["root",l&&u&&"labelIcon",`textColor${it(o)}`,r&&"fullWidth",c&&"wrapped",p&&"selected",i&&"disabled"],icon:["iconWrapper","icon"]};return fe(g,Do,t)},No=L(ct,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.label&&o.icon&&t.labelIcon,t[`textColor${it(o.textColor)}`],o.fullWidth&&t.fullWidth,o.wrapped&&t.wrapped,{[`& .${D.iconWrapper}`]:t.iconWrapper},{[`& .${D.icon}`]:t.icon}]}})(Ce(({theme:e})=>({...e.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:t})=>t.label&&(t.iconPosition==="top"||t.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:t})=>t.label&&t.iconPosition!=="top"&&t.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:t})=>t.icon&&t.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:t,iconPosition:o})=>t.icon&&t.label&&o==="top",style:{[`& > .${D.icon}`]:{marginBottom:6}}},{props:({ownerState:t,iconPosition:o})=>t.icon&&t.label&&o==="bottom",style:{[`& > .${D.icon}`]:{marginTop:6}}},{props:({ownerState:t,iconPosition:o})=>t.icon&&t.label&&o==="start",style:{[`& > .${D.icon}`]:{marginRight:e.spacing(1)}}},{props:({ownerState:t,iconPosition:o})=>t.icon&&t.label&&o==="end",style:{[`& > .${D.icon}`]:{marginLeft:e.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${D.selected}`]:{opacity:1},[`&.${D.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(e.vars||e).palette.text.secondary,[`&.${D.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${D.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(e.vars||e).palette.text.secondary,[`&.${D.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${D.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:({ownerState:t})=>t.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:t})=>t.wrapped,style:{fontSize:e.typography.pxToRem(12)}}]}))),ke=ue(function(t,o){const r=pe({props:t,name:"MuiTab"}),{className:c,disabled:l=!1,disableFocusRipple:u=!1,fullWidth:p,icon:i,iconPosition:g="top",indicator:m,label:_,onChange:y,onClick:I,onFocus:x,selected:f,selectionFollowsFocus:h,textColor:a="inherit",value:w,wrapped:B=!1,...b}=r,R={...r,disabled:l,disableFocusRipple:u,selected:f,icon:!!i,iconPosition:g,label:!!_,fullWidth:p,textColor:a,wrapped:B},W=Po(R),K=i&&_&&lt(i)?at(i,{className:z(W.icon,i.props.className)}):i,J=P=>{!f&&y&&y(P,w),I&&I(P)},X=P=>{h&&!f&&y&&y(P,w),x&&x(P)};return n(No,{focusRipple:!u,className:z(W.root,c),ref:o,role:"tab","aria-selected":f,disabled:l,onClick:J,onFocus:X,ownerState:R,tabIndex:f?0:-1,...b,children:[g==="top"||g==="start"?n(_e,{children:[K,_]}):n(_e,{children:[_,K]}),m]})}),Fo=ie(n("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),Lo=ie(n("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));function Mo(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function Oo(e,t,o,r={},c=()=>{}){const{ease:l=Mo,duration:u=300}=r;let p=null;const i=t[e];let g=!1;const m=()=>{g=!0},_=y=>{if(g){c(new Error("Animation cancelled"));return}p===null&&(p=y);const I=Math.min(1,(y-p)/u);if(t[e]=l(I)*(o-i)+i,I>=1){requestAnimationFrame(()=>{c(null)});return}requestAnimationFrame(_)};return i===o?(c(new Error("Element already at target position")),m):(requestAnimationFrame(_),m)}const zo={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Uo(e){const{onChange:t,...o}=e,r=Ie(),c=Ie(null),l=()=>{r.current=c.current.offsetHeight-c.current.clientHeight};return Ht(()=>{const u=dt(()=>{const i=r.current;l(),i!==r.current&&t(r.current)}),p=ut(c.current);return p.addEventListener("resize",u),()=>{u.clear(),p.removeEventListener("resize",u)}},[t]),F(()=>{l(),t(r.current)},[t]),n("div",{style:zo,...o,ref:c})}function Wo(e){return ce("MuiTabScrollButton",e)}const $o=de("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Go=e=>{const{classes:t,orientation:o,disabled:r}=e;return fe({root:["root",o,r&&"disabled"]},Wo,t)},Ho=L(ct,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.orientation&&t[o.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${$o.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),Vo=ue(function(t,o){const r=pe({props:t,name:"MuiTabScrollButton"}),{className:c,slots:l={},slotProps:u={},direction:p,orientation:i,disabled:g,...m}=r,_=pt(),y={isRtl:_,...r},I=Go(y),x=l.StartScrollButtonIcon??Fo,f=l.EndScrollButtonIcon??Lo,h=we({elementType:x,externalSlotProps:u.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:y}),a=we({elementType:f,externalSlotProps:u.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:y});return n(Ho,{component:"div",className:z(I.root,c),ref:o,role:null,ownerState:y,tabIndex:null,...m,style:{...m.style,...i==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${_?-90:90}deg)`}},children:p==="left"?n(x,{...h}):n(f,{...a})})});function Xo(e){return ce("MuiTabs",e)}const De=de("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),nt=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,rt=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,Se=(e,t,o)=>{let r=!1,c=o(e,t);for(;c;){if(c===e.firstChild){if(r)return;r=!0}const l=c.disabled||c.getAttribute("aria-disabled")==="true";if(!c.hasAttribute("tabindex")||l)c=o(e,c);else{c.focus();return}}},Yo=e=>{const{vertical:t,fixed:o,hideScrollbar:r,scrollableX:c,scrollableY:l,centered:u,scrollButtonsHideMobile:p,classes:i}=e;return fe({root:["root",t&&"vertical"],scroller:["scroller",o&&"fixed",r&&"hideScrollbar",c&&"scrollableX",l&&"scrollableY"],list:["list","flexContainer",t&&"flexContainerVertical",t&&"vertical",u&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",p&&"scrollButtonsHideMobile"],scrollableX:[c&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},Xo,i)},Ko=L("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${De.scrollButtons}`]:t.scrollButtons},{[`& .${De.scrollButtons}`]:o.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,o.vertical&&t.vertical]}})(Ce(({theme:e})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:t})=>t.vertical,style:{flexDirection:"column"}},{props:({ownerState:t})=>t.scrollButtonsHideMobile,style:{[`& .${De.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}}}]}))),qo=L("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.scroller,o.fixed&&t.fixed,o.hideScrollbar&&t.hideScrollbar,o.scrollableX&&t.scrollableX,o.scrollableY&&t.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:e})=>e.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:e})=>e.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:e})=>e.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:e})=>e.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),jo=L("div",{name:"MuiTabs",slot:"List",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.list,t.flexContainer,o.vertical&&t.flexContainerVertical,o.centered&&t.centered]}})({display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.centered,style:{justifyContent:"center"}}]}),Qo=L("span",{name:"MuiTabs",slot:"Indicator"})(Ce(({theme:e})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(e.vars||e).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(e.vars||e).palette.secondary.main}},{props:({ownerState:t})=>t.vertical,style:{height:"100%",width:2,right:0}}]}))),Zo=L(Uo)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),st={},Jo=ue(function(t,o){const r=pe({props:t,name:"MuiTabs"}),c=Vt(),l=pt(),{"aria-label":u,"aria-labelledby":p,action:i,centered:g=!1,children:m,className:_,component:y="div",allowScrollButtonsMobile:I=!1,indicatorColor:x="primary",onChange:f,orientation:h="horizontal",ScrollButtonComponent:a,scrollButtons:w="auto",selectionFollowsFocus:B,slots:b={},slotProps:R={},TabIndicatorProps:W={},TabScrollButtonProps:K={},textColor:J="primary",value:X,variant:P="standard",visibleScrollbar:ne=!1,...vt}=r,M=P==="scrollable",N=h==="vertical",re=N?"scrollTop":"scrollLeft",he=N?"top":"left",be=N?"bottom":"right",Te=N?"clientHeight":"clientWidth",se=N?"height":"width",$={...r,component:y,allowScrollButtonsMobile:I,indicatorColor:x,orientation:h,vertical:N,scrollButtons:w,textColor:J,variant:P,visibleScrollbar:ne,fixed:!M,hideScrollbar:M&&!ne,scrollableX:M&&!N,scrollableY:M&&N,centered:g&&!M,scrollButtonsHideMobile:!I},Y=Yo($),St=we({elementType:b.StartScrollButtonIcon,externalSlotProps:R.startScrollButtonIcon,ownerState:$}),yt=we({elementType:b.EndScrollButtonIcon,externalSlotProps:R.endScrollButtonIcon,ownerState:$}),[Oe,_t]=E(!1),[q,ze]=E(st),[Ue,It]=E(!1),[We,wt]=E(!1),[$e,Ct]=E(!1),[Ge,Tt]=E({overflow:"hidden",scrollbarWidth:0}),He=new Map,G=Ie(null),j=Ie(null),ee={slots:b,slotProps:{indicator:W,scrollButtons:K,...R}},Ve=()=>{const s=G.current;let d;if(s){const v=s.getBoundingClientRect();d={clientWidth:s.clientWidth,scrollLeft:s.scrollLeft,scrollTop:s.scrollTop,scrollWidth:s.scrollWidth,top:v.top,bottom:v.bottom,left:v.left,right:v.right}}let S;if(s&&X!==!1){const v=j.current.children;if(v.length>0){const T=v[He.get(X)];S=T?T.getBoundingClientRect():null}}return{tabsMeta:d,tabMeta:S}},le=Ae(()=>{const{tabsMeta:s,tabMeta:d}=Ve();let S=0,v;N?(v="top",d&&s&&(S=d.top-s.top+s.scrollTop)):(v=l?"right":"left",d&&s&&(S=(l?-1:1)*(d[v]-s[v]+s.scrollLeft)));const T={[v]:S,[se]:d?d[se]:0};if(typeof q[v]!="number"||typeof q[se]!="number")ze(T);else{const O=Math.abs(q[v]-T[v]),Q=Math.abs(q[se]-T[se]);(O>=1||Q>=1)&&ze(T)}}),xe=(s,{animation:d=!0}={})=>{d?Oo(re,G.current,s,{duration:c.transitions.duration.standard}):G.current[re]=s},Xe=s=>{let d=G.current[re];N?d+=s:d+=s*(l?-1:1),xe(d)},Ye=()=>{const s=G.current[Te];let d=0;const S=Array.from(j.current.children);for(let v=0;v<S.length;v+=1){const T=S[v];if(d+T[Te]>s){v===0&&(d=s);break}d+=T[Te]}return d},xt=()=>{Xe(-1*Ye())},Rt=()=>{Xe(Ye())},[Et,{onChange:Ke,...At}]=V("scrollbar",{className:z(Y.scrollableX,Y.hideScrollbar),elementType:Zo,shouldForwardComponentProp:!0,externalForwardedProps:ee,ownerState:$}),Bt=oe(s=>{Ke?.(s),Tt({overflow:null,scrollbarWidth:s})},[Ke]),[qe,je]=V("scrollButtons",{className:z(Y.scrollButtons,K.className),elementType:Vo,externalForwardedProps:ee,ownerState:$,additionalProps:{orientation:h,slots:{StartScrollButtonIcon:b.startScrollButtonIcon||b.StartScrollButtonIcon,EndScrollButtonIcon:b.endScrollButtonIcon||b.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:St,endScrollButtonIcon:yt}}}),kt=()=>{const s={};s.scrollbarSizeListener=M?n(Et,{...At,onChange:Bt}):null;const S=M&&(w==="auto"&&(Ue||We)||w===!0);return s.scrollButtonStart=S?n(qe,{direction:l?"right":"left",onClick:xt,disabled:!Ue,...je}):null,s.scrollButtonEnd=S?n(qe,{direction:l?"left":"right",onClick:Rt,disabled:!We,...je}):null,s},Qe=Ae(s=>{const{tabsMeta:d,tabMeta:S}=Ve();if(!(!S||!d)){if(S[he]<d[he]){const v=d[re]+(S[he]-d[he]);xe(v,{animation:s})}else if(S[be]>d[be]){const v=d[re]+(S[be]-d[be]);xe(v,{animation:s})}}}),me=Ae(()=>{M&&w!==!1&&Ct(!$e)});F(()=>{const s=dt(()=>{G.current&&le()});let d;const S=O=>{O.forEach(Q=>{Q.removedNodes.forEach(ae=>{d?.unobserve(ae)}),Q.addedNodes.forEach(ae=>{d?.observe(ae)})}),s(),me()},v=ut(G.current);v.addEventListener("resize",s);let T;return typeof ResizeObserver<"u"&&(d=new ResizeObserver(s),Array.from(j.current.children).forEach(O=>{d.observe(O)})),typeof MutationObserver<"u"&&(T=new MutationObserver(S),T.observe(j.current,{childList:!0})),()=>{s.clear(),v.removeEventListener("resize",s),T?.disconnect(),d?.disconnect()}},[le,me]),F(()=>{const s=Array.from(j.current.children),d=s.length;if(typeof IntersectionObserver<"u"&&d>0&&M&&w!==!1){const S=s[0],v=s[d-1],T={root:G.current,threshold:.99},O=Ee=>{It(!Ee[0].isIntersecting)},Q=new IntersectionObserver(O,T);Q.observe(S);const ae=Ee=>{wt(!Ee[0].isIntersecting)},Je=new IntersectionObserver(ae,T);return Je.observe(v),()=>{Q.disconnect(),Je.disconnect()}}},[M,w,$e,m?.length]),F(()=>{_t(!0)},[]),F(()=>{le()}),F(()=>{Qe(st!==q)},[Qe,q]),Xt(i,()=>({updateIndicator:le,updateScrollButtons:me}),[le,me]);const[Dt,Pt]=V("indicator",{className:z(Y.indicator,W.className),elementType:Qo,externalForwardedProps:ee,ownerState:$,additionalProps:{style:q}}),Ze=n(Dt,{...Pt});let ge=0;const Nt=Yt.map(m,s=>{if(!lt(s))return null;const d=s.props.value===void 0?ge:s.props.value;He.set(d,ge);const S=d===X;return ge+=1,at(s,{fullWidth:P==="fullWidth",indicator:S&&!Oe&&Ze,selected:S,selectionFollowsFocus:B,onChange:f,textColor:J,value:d,...ge===1&&X===!1&&!s.props.tabIndex?{tabIndex:0}:{}})}),Ft=s=>{if(s.altKey||s.shiftKey||s.ctrlKey||s.metaKey)return;const d=j.current,S=Kt(qt(d));if(S?.getAttribute("role")!=="tab")return;let T=h==="horizontal"?"ArrowLeft":"ArrowUp",O=h==="horizontal"?"ArrowRight":"ArrowDown";switch(h==="horizontal"&&l&&(T="ArrowRight",O="ArrowLeft"),s.key){case T:s.preventDefault(),Se(d,S,rt);break;case O:s.preventDefault(),Se(d,S,nt);break;case"Home":s.preventDefault(),Se(d,null,nt);break;case"End":s.preventDefault(),Se(d,null,rt);break}},Re=kt(),[Lt,Mt]=V("root",{ref:o,className:z(Y.root,_),elementType:Ko,externalForwardedProps:{...ee,...vt,component:y},ownerState:$}),[Ot,zt]=V("scroller",{ref:G,className:Y.scroller,elementType:qo,externalForwardedProps:ee,ownerState:$,additionalProps:{style:{overflow:Ge.overflow,[N?`margin${l?"Left":"Right"}`:"marginBottom"]:ne?void 0:-Ge.scrollbarWidth}}}),[Ut,Wt]=V("list",{ref:j,className:z(Y.list,Y.flexContainer),elementType:jo,externalForwardedProps:ee,ownerState:$,getSlotProps:s=>({...s,onKeyDown:d=>{Ft(d),s.onKeyDown?.(d)}})});return n(Lt,{...Mt,children:[Re.scrollButtonStart,Re.scrollbarSizeListener,n(Ot,{...zt,children:[n(Ut,{"aria-label":u,"aria-labelledby":p,"aria-orientation":h==="vertical"?"vertical":null,role:"tablist",...Wt,children:Nt}),Oe&&Ze]}),Re.scrollButtonEnd]})}),en=ie(n("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),tn=ie(n("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 18H4V4h16zM18 6h-5c-1.1 0-2 .9-2 2v2.28c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V8h3v8H8V8h2V6H6v12h12z"})),mt=(e,t)=>{if(!e||!t)return 0;const o=e.replace(/[^0-9.]/g,""),r=t.replace(/[^0-9.]/g,""),c=o.split(".").map(Number),l=r.split(".").map(Number);for(let u=0;u<Math.max(c.length,l.length);u++){const p=c[u]||0,i=l[u]||0;if(p>i)return 1;if(p<i)return-1}return 0},on=({deviceId:e})=>{const{t}=Le(["common","settings"]),{activeDevice:o,updateDeviceDetails:r,removeDevice:c,toggleLaPoste:l}=Me(),[u,p]=U(E({key:!o?.configuration_key,pin:!o?.door_pin_code}),"visibleFields"),[i,g]=U(E(o?.friendly_name||""),"deviceName"),[m,_]=U(E(o?.configuration_key||""),"configurationKey"),[y,I]=U(E(o?.door_pin_code||""),"doorPinCode");jt.useEffect(()=>{o&&(g(o.friendly_name||""),_(o.configuration_key||""),I(o.door_pin_code||""))},[o]);const x=b=>{p(R=>({...R,[b]:!R[b]}))},f=async()=>{if(o)try{await r(e,{friendly_name:i,configuration_key:m,door_pin_code:y})}catch(b){console.error("Failed to update device details:",b)}},h=async b=>{try{await l(b.target.checked)}catch(R){console.error("Failed to toggle La Poste:",R)}},a=async()=>{if(o)try{await c(e)}catch(b){console.error("Failed to remove device:",b)}},w=b=>{const W=b.trim().toUpperCase().replace(/[^0-9A-F]/g,"").slice(-8);_(W)},B=b=>{const R=b.trim().toUpperCase();I(R)};return o?n(A,{sx:{my:2},children:[n(k,{variant:"subtitle1",gutterBottom:!0,children:t("devices.title")}),n(Qt,{sx:{mb:2}}),n(Zt,{children:n(Jt,{children:n(A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[n(ye,{label:t("devices.device_name"),value:i,onChange:b=>g(b.currentTarget.value),fullWidth:!0,size:"small"}),o.role===eo.Admin&&n(ye,{label:t("settings:configuration_key.label"),value:m,onChange:b=>w(b.currentTarget.value),fullWidth:!0,size:"small",type:u.key?"text":"password",helperText:t("settings:configuration_key.helper"),slotProps:{input:{endAdornment:n(et,{position:"end",children:n(Fe,{"aria-label":t("settings:toggle_key_visibility"),onClick:()=>x("key"),edge:"end",size:"small",children:u.key?n(tt,{}):n(ot,{})})})}}}),n(ye,{label:t("settings:door_pin_code"),value:y,onChange:b=>B(b.currentTarget.value),fullWidth:!0,size:"small",type:u.pin?"text":"password",slotProps:{input:{endAdornment:n(et,{position:"end",children:n(Fe,{"aria-label":t("settings:toggle_pin_visibility"),onClick:()=>x("pin"),edge:"end",size:"small",children:u.pin?n(tt,{}):n(ot,{})})})}}}),o.hardware_version==="4.0"&&o.software_revision&&mt(o.software_revision,"4.2.0")>=0&&n(A,{children:n(to,{control:n(oo,{checked:o.la_poste_activated||!1,onChange:h}),label:t("settings:activate_la_poste")})}),n(A,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[n(Z,{size:"small",color:"error",variant:"outlined",onClick:a,children:t("devices.forget")}),n(Z,{size:"small",variant:"contained",onClick:f,children:t("save")})]})]})})})]}):null};var gt=(e=>(e[e.LA_POSTE=1]="LA_POSTE",e[e.VIGIK_TERTIARY=2]="VIGIK_TERTIARY",e[e.USER_BADGE=3]="USER_BADGE",e))(gt||{}),C=(e=>(e.IDLE="idle",e.SCANNING="scanning",e.FOUND="found",e.TIMEOUT="timeout",e.ERROR_EXISTS="error_exists",e.ERROR="error",e))(C||{});const nn=()=>{const{activeDevice:e}=Me(),{sendRequest:t}=no(),{addListener:o,removeListener:r}=ro(),[c,l]=U(E(C.IDLE),"scanStatus"),[u,p]=U(E(null),"scannedUid"),i=e?.id,g=so(()=>i?te.nfc_tags.where("device_id").equals(i).toArray():[],[i]),m=oe(async()=>{if(!i)throw new Error("No active device");const f=await te.device_secrets.get(i);if(!f?.configuration_key)throw new Error("Configuration Key required");return f.configuration_key},[i]),_=oe(async()=>{try{const f=await m();l(C.SCANNING),p(null),await t(new lo(f))}catch(f){console.error("Failed to start scan",f),l(C.ERROR)}},[m,t]);F(()=>{const f=h=>{if([H.NOTIFY_NFC_TAG_REGISTER_SCAN_RESULT,H.NOTIFY_NFC_TAG_REGISTER_SCAN_ERROR_EXISTS,H.NOTIFY_NFC_TAG_REGISTER_SCAN_TIMEOUT].includes(h.opcode)){const a=new ao(h.opcode);switch(a.parse(h.payload),a.status){case Be.TIMEOUT:l(C.TIMEOUT);break;case Be.ALREADY_EXISTS:l(C.ERROR_EXISTS),a.uid&&p(a.uid);break;case Be.FOUND:l(C.FOUND),a.uid&&p(a.uid);break;default:l(C.ERROR)}}};return o(H.NOTIFY_NFC_TAG_REGISTER_SCAN_RESULT,f),o(H.NOTIFY_NFC_TAG_REGISTER_SCAN_ERROR_EXISTS,f),o(H.NOTIFY_NFC_TAG_REGISTER_SCAN_TIMEOUT,f),()=>{r(H.NOTIFY_NFC_TAG_REGISTER_SCAN_RESULT,f),r(H.NOTIFY_NFC_TAG_REGISTER_SCAN_ERROR_EXISTS,f),r(H.NOTIFY_NFC_TAG_REGISTER_SCAN_TIMEOUT,f)}},[o,r]);const y=oe(async f=>{if(!(!u||!i))try{const h=await m(),a=new Uint8Array(u.split(":").map(b=>parseInt(b,16))),w=new io(h,a);await t(w);const B=await te.nfc_tags.where({device_id:i,uid:u}).first();B?await te.nfc_tags.update(B.id,{name:f,updated_at:Date.now()}):await te.nfc_tags.add({id:crypto.randomUUID(),device_id:i,uid:u,name:f,type:gt.USER_BADGE,created_at:Date.now(),sync_status:"created"}),l(C.IDLE),p(null)}catch(h){throw console.error("Failed to register tag",h),h}},[u,i,m,t]),I=oe(async f=>{if(i)try{const h=await m(),a=new Uint8Array(f.uid.split(":").map(B=>parseInt(B,16))),w=new co(h,a);await t(w),await te.nfc_tags.delete(f.id)}catch(h){throw console.error("Failed to unregister tag",h),h}},[i,m,t]),x=oe(()=>{l(C.IDLE),p(null)},[]);return{tags:g,scanStatus:c,scannedUid:u,startScan:_,registerTag:y,unregisterTag:I,resetScan:x}},rn=()=>{const{t:e}=Le(["common","settings"]),{tags:t,scanStatus:o,scannedUid:r,startScan:c,registerTag:l,unregisterTag:u,resetScan:p}=nn(),[i,g]=U(E(!1),"openAddDialog"),[m,_]=U(E(""),"tagName"),y=()=>{p(),_(""),g(!0)},I=()=>{g(!1),p()},x=()=>{c()},f=async()=>{if(m.trim())try{await l(m.trim()),I()}catch(a){console.error(a)}},h=async a=>{if(confirm(e("common:confirm_delete")))try{await u(a)}catch(w){console.error(w),alert(e("settings:nfc.error_delete_failed"))}};return F(()=>{r&&!m&&_(`Badge ${r.substring(0,5)}`)},[r,m]),n(A,{sx:{p:2},children:[n(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[n(k,{variant:"h6",children:e("settings:nfc.title")}),n(Z,{variant:"contained",startIcon:n(vo,{}),onClick:y,children:e("settings:nfc.add_tag")})]}),t&&t.length>0?n(ft,{children:t.map(a=>n(ht,{secondaryAction:n(Fe,{edge:"end","aria-label":"delete",onClick:()=>h(a),children:n(So,{})}),children:[n(ko,{children:n(Ro,{children:n(tn,{})})}),n(bt,{primary:a.name,secondary:n(_e,{children:[n(k,{component:"span",variant:"body2",color:"textPrimary",children:a.uid}),n("br",{}),a.last_seen_at?e("settings:nfc.last_seen",{date:new Date(a.last_seen_at).toLocaleString()}):e("settings:nfc.never_seen")]})})]},a.id))}):n(k,{variant:"body1",color:"textSecondary",align:"center",sx:{mt:4},children:e("settings:nfc.no_tags")}),n(uo,{open:i,onClose:I,fullWidth:!0,maxWidth:"sm",children:[n(po,{children:e("settings:nfc.dialog_title")}),n(fo,{children:n(A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,py:2},children:[o===C.IDLE&&n(k,{children:e("settings:nfc.instructions_idle")}),o===C.SCANNING&&n(_e,{children:[n(ho,{}),n(k,{children:e("settings:nfc.instructions_scanning")})]}),o===C.TIMEOUT&&n(ve,{severity:"warning",children:e("settings:nfc.error_timeout")}),o===C.ERROR&&n(ve,{severity:"error",children:e("settings:nfc.error_generic")}),o===C.ERROR_EXISTS&&n(ve,{severity:"info",children:[e("settings:nfc.error_exists"),r&&n(A,{sx:{mt:1},children:[n(k,{variant:"caption",children:["UID: ",r]}),n(k,{children:e("settings:nfc.instructions_exists_local")})]})]}),(o===C.FOUND||o===C.ERROR_EXISTS)&&r&&n(A,{sx:{width:"100%",mt:2},children:[n(ve,{severity:"success",sx:{mb:2},children:e("settings:nfc.tag_found",{uid:r})}),n(ye,{autoFocus:!0,margin:"dense",label:e("settings:nfc.input_label"),fullWidth:!0,value:m,onChange:a=>_(a.target.value)})]})]})}),n(bo,{children:[n(Z,{onClick:I,children:e("common:cancel")}),o===C.IDLE||o===C.TIMEOUT||o===C.ERROR?n(Z,{onClick:x,variant:"contained",children:e("settings:nfc.button_start_scan")}):null,(o===C.FOUND||o===C.ERROR_EXISTS)&&n(Z,{onClick:f,variant:"contained",disabled:!m,children:e("settings:nfc.add_tag")})]})]})]})};function Pe(e){const{children:t,value:o,index:r,...c}=e;return n("div",{role:"tabpanel",hidden:o!==r,id:`my-boks-tabpanel-${r}`,"aria-labelledby":`my-boks-tab-${r}`,...c,children:o===r&&n(A,{sx:{p:3},children:t})})}function Ne(e){return{id:`my-boks-tab-${e}`,"aria-controls":`my-boks-tabpanel-${e}`}}const cn=()=>{const{t:e}=Le(["common","codes","logs","settings"]),{activeDevice:t,knownDevices:o,setActiveDevice:r}=Me(),{isConnected:c}=mo(),l=go(),[u,p]=U(E(0),"value"),[i,g]=U(E(null),"selectedDeviceId");F(()=>{const w=new URLSearchParams(l.search).get("tab"),B=setTimeout(()=>{switch(w){case"settings":p(0);break;case"users":p(1);break;default:p(0);break}},0);return()=>clearTimeout(B)},[l.search]),F(()=>{(!t||!o.some(a=>a.id===t.id))&&i!==null&&setTimeout(()=>g(null),0)},[t,o,i]);const m=(a,w)=>{p(w)},_=a=>{g(a),r(a)},y=()=>{g(null),r(null)},I=o.length>1&&!i&&!t,x=t&&t.hardware_version==="4.0"&&t.software_revision&&mt(t.software_revision,"4.3.3")>=0;let f=e("common:my_boks");return t&&o.length===1||t&&o.length>1?f=t.friendly_name||t.ble_name:!t&&o.length===1&&(f=o[0].friendly_name||o[0].ble_name),I?n(A,{sx:{p:3},children:[n(k,{variant:"h5",gutterBottom:!0,children:e("common:my_boks")}),n(ft,{children:o.map(a=>n(ht,{onClick:()=>_(a.id),sx:{cursor:"pointer"},children:n(bt,{primary:a.friendly_name||a.ble_name,secondary:a.ble_name})},a.id))})]}):t||o.find(a=>a.id===i)||(o.length===1?o[0]:null)?n(A,{sx:{width:"100%"},children:[n(A,{sx:{p:3,borderBottom:1,borderColor:"divider"},children:[o.length>1&&n(Z,{startIcon:n(en,{}),onClick:y,sx:{mb:1},children:e("common:back_to_list")}),n(k,{variant:"h4",component:"h1",gutterBottom:!0,children:f}),n(k,{variant:"subtitle1",color:"textSecondary",children:e(c?"common:connected":"common:disconnected")})]}),n(A,{sx:{borderBottom:1,borderColor:"divider"},children:n(Jo,{value:u,onChange:m,"aria-label":"my boks tabs",children:[n(ke,{label:e("settings:title"),...Ne(0)}),n(ke,{label:e("common:users.title"),...Ne(1)}),x&&n(ke,{label:"Tags NFC",...Ne(2)})]})}),n(Pe,{value:u,index:0,children:n(on,{deviceId:t?.id||""})}),n(Pe,{value:u,index:1,children:n(A,{sx:{p:3},children:[n(k,{variant:"h6",children:e("common:users.title")}),n(k,{variant:"body1",color:"textSecondary",children:e("common:coming_soon")})]})}),x&&n(Pe,{value:u,index:2,children:n(rn,{})})]}):n(A,{sx:{p:3},children:[n(k,{variant:"h5",children:e("common:my_boks")}),n(k,{variant:"body1",color:"textSecondary",children:e("common:no_active_device")})]})};export{cn as MyBoksPage};
