import{r as u,g as Ct,a as Lt,u as Tt,j as t,aG as Ft,aH as Wt,c as je,ab as _,b as Bt,s as ae,m as ge,aI as _e,aJ as Ut,aK as Te,aL as Kt,aM as Gt,aN as nt,aO as Ke,aP as it,aQ as pt,aR as Ge,aS as Xt,aT as oe,ac as Rt,e as Se,f as he,V as $e,k as C,aU as _t,aV as $t,aW as It,aX as Ye,S as Yt,T as w,a3 as Et,a4 as Xe,aY as qt,aZ as Jt,ao as Zt,a_ as Qt,K as qe,a1 as me,l as M,M as mt,N as ut,P as Pt,aB as er,a$ as gt,b0 as tr,X as rr,z as Q,A as ee,D as zt,al as sr,b1 as or,b2 as ar,H as nr,q as ir,b3 as lr,b4 as cr,b5 as ht,b6 as xt,b7 as lt,a5 as ct}from"./index-TDB1KUPZ.js";import{S as dr}from"./Stack-QVXSUsxW.js";import{E as ur}from"./Edit-BmAmMFeR.js";import{D as Mt}from"./Delete-D_UqXweH.js";import{T as pr,a as mr,b as dt,c as re,d as gr}from"./TableRow-CBnhyaaN.js";import{C as Ot}from"./Chip-COrF9u_B.js";import{L as ft}from"./Lock-IFeCFYhM.js";import{F as bt,S as vt,T as hr,a as Be}from"./Tabs-cIK-2GOa.js";import{C as xr}from"./Container-CAHHEgMe.js";function fr(e){return u.Children.toArray(e).filter(r=>u.isValidElement(r))}function br(e){return Ct("MuiButtonGroup",e)}const m=Lt("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),vr=(e,r)=>{const{ownerState:s}=e;return[{[`& .${m.grouped}`]:r.grouped},{[`& .${m.grouped}`]:r[`grouped${_(s.orientation)}`]},{[`& .${m.grouped}`]:r[`grouped${_(s.variant)}`]},{[`& .${m.grouped}`]:r[`grouped${_(s.variant)}${_(s.orientation)}`]},{[`& .${m.grouped}`]:r[`grouped${_(s.variant)}${_(s.color)}`]},{[`& .${m.firstButton}`]:r.firstButton},{[`& .${m.lastButton}`]:r.lastButton},{[`& .${m.middleButton}`]:r.middleButton},r.root,r[s.variant],s.disableElevation===!0&&r.disableElevation,s.fullWidth&&r.fullWidth,s.orientation==="vertical"&&r.vertical]},yr=e=>{const{classes:r,color:s,disabled:a,disableElevation:l,fullWidth:o,orientation:b,variant:c}=e,d={root:["root",c,b,o&&"fullWidth",l&&"disableElevation",`color${_(s)}`],grouped:["grouped",`grouped${_(b)}`,`grouped${_(c)}`,`grouped${_(c)}${_(b)}`,`grouped${_(c)}${_(s)}`,a&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Bt(d,br,r)},jr=ae("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:vr})(ge(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(e.vars||e).shadows[2],[`& .${m.grouped}`]:{boxShadow:"none","&:hover":{boxShadow:"none"}}}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${m.lastButton},& .${m.middleButton}`]:{borderTopRightRadius:0,borderTopLeftRadius:0},[`& .${m.firstButton},& .${m.middleButton}`]:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},{props:{orientation:"horizontal"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${m.lastButton},& .${m.middleButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},{props:{variant:"text",orientation:"horizontal"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderRight:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${m.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"text",orientation:"vertical"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderBottom:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${m.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(_e()).flatMap(([r])=>[{props:{variant:"text",color:r},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderColor:e.alpha((e.vars||e).palette[r].main,.5)}}}]),{props:{variant:"outlined",orientation:"horizontal"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}},[`& .${m.lastButton},& .${m.middleButton}`]:{marginLeft:-1}}},{props:{variant:"outlined",orientation:"vertical"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}},[`& .${m.lastButton},& .${m.middleButton}`]:{marginTop:-1}}},{props:{variant:"contained",orientation:"horizontal"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderRight:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${m.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"contained",orientation:"vertical"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderBottom:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${m.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(_e(["dark"])).map(([r])=>({props:{variant:"contained",color:r},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderColor:(e.vars||e).palette[r].dark}}}))],[`& .${m.grouped}`]:{minWidth:40}}))),Sr=u.forwardRef(function(r,s){const a=Tt({props:r,name:"MuiButtonGroup"}),{children:l,className:o,color:b="primary",component:c="div",disabled:d=!1,disableElevation:g=!1,disableFocusRipple:y=!1,disableRipple:T=!1,fullWidth:S=!1,orientation:B="horizontal",size:A="medium",variant:$="outlined",...U}=a,h={...a,color:b,component:c,disabled:d,disableElevation:g,disableFocusRipple:y,disableRipple:T,fullWidth:S,orientation:B,size:A,variant:$},p=yr(h),x=u.useMemo(()=>({className:p.grouped,color:b,disabled:d,disableElevation:g,disableFocusRipple:y,disableRipple:T,fullWidth:S,size:A,variant:$}),[b,d,g,y,T,S,A,$,p.grouped]),I=fr(l),H=I.length,Ie=Y=>{const q=Y===0,ne=Y===H-1;return q&&ne?"":q?p.firstButton:ne?p.lastButton:p.middleButton};return t.jsx(jr,{as:c,role:"group",className:je(p.root,o),ref:s,ownerState:h,...U,children:t.jsx(Ft.Provider,{value:x,children:I.map((Y,q)=>t.jsx(Wt.Provider,{value:Ie(q),children:Y},q))})})}),kr={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function wr(e,r,s=(a,l)=>a===l){return e.length===r.length&&e.every((a,l)=>s(a,r[l]))}const Cr=2;function ye(e,r,s,a,l){return s===1?Math.min(e+r,l):Math.max(e-r,a)}function Dt(e,r){return e-r}function yt(e,r){const{index:s}=e.reduce((a,l,o)=>{const b=Math.abs(r-l);return a===null||b<a.distance||b===a.distance?{distance:b,index:o}:a},null)??{};return s}function He(e,r){if(r.current!==void 0&&e.changedTouches){const s=e;for(let a=0;a<s.changedTouches.length;a+=1){const l=s.changedTouches[a];if(l.identifier===r.current)return{x:l.clientX,y:l.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Je(e,r,s){return(e-r)*100/(s-r)}function Lr(e,r,s){return(s-r)*e+r}function Tr(e){if(Math.abs(e)<1){const s=e.toExponential().split("e-"),a=s[0].split(".")[1];return(a?a.length:0)+parseInt(s[1],10)}const r=e.toString().split(".")[1];return r?r.length:0}function Br(e,r,s){const a=Math.round((e-s)/r)*r+s;return Number(a.toFixed(Tr(r)))}function jt({values:e,newValue:r,index:s}){const a=e.slice();return a[s]=r,a.sort(Dt)}function Fe({sliderRef:e,activeIndex:r,setActive:s}){const a=Ke(e.current);(!e.current?.contains(a.activeElement)||Number(a?.activeElement?.getAttribute("data-index"))!==r)&&e.current?.querySelector(`[type="range"][data-index="${r}"]`).focus(),s&&s(r)}function We(e,r){return typeof e=="number"&&typeof r=="number"?e===r:typeof e=="object"&&typeof r=="object"?wr(e,r):!1}const Rr={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},_r=e=>e;let Ue;function St(){return Ue===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Ue=CSS.supports("touch-action","none"):Ue=!0),Ue}function $r(e){const{"aria-labelledby":r,defaultValue:s,disabled:a=!1,disableSwap:l=!1,isRtl:o=!1,marks:b=!1,max:c=100,min:d=0,name:g,onChange:y,onChangeCommitted:T,orientation:S="horizontal",rootRef:B,scale:A=_r,step:$=1,shiftStep:U=10,tabIndex:h,value:p}=e,x=u.useRef(void 0),[I,H]=u.useState(-1),[Ie,Y]=u.useState(-1),[q,ne]=u.useState(!1),xe=u.useRef(0),ke=u.useRef(null),[K,F]=Ut({controlled:p,default:s??d,name:"Slider"}),O=y&&((i,n,f)=>{const k=i.nativeEvent||i,j=new k.constructor(k.type,k);Object.defineProperty(j,"target",{writable:!0,value:{value:n,name:g}}),ke.current=n,y(j,n,f)}),fe=Array.isArray(K);let E=fe?K.slice().sort(Dt):[K];E=E.map(i=>i==null?d:Te(i,d,c));const we=b===!0&&$!==null?[...Array(Math.floor((c-d)/$)+1)].map((i,n)=>({value:d+$*n})):b||[],R=we.map(i=>i.value),[se,be]=u.useState(-1),L=u.useRef(null),ie=Kt(B,L),Ze=i=>n=>{const f=Number(n.currentTarget.getAttribute("data-index"));pt(n.target)&&be(f),Y(f),i?.onFocus?.(n)},Qe=i=>n=>{pt(n.target)||be(-1),Y(-1),i?.onBlur?.(n)},Ee=(i,n)=>{const f=Number(i.currentTarget.getAttribute("data-index")),k=E[f],j=R.indexOf(k);let v=n;if(we&&$==null){const W=R[R.length-1];v>=W?v=W:v<=R[0]?v=R[0]:v=v<k?R[j-1]:R[j+1]}if(v=Te(v,d,c),fe){l&&(v=Te(v,E[f-1]||-1/0,E[f+1]||1/0));const W=v;v=jt({values:E,newValue:v,index:f});let G=f;l||(G=v.indexOf(W)),Fe({sliderRef:L,activeIndex:G})}F(v),be(f),O&&!We(v,K)&&O(i,v,f),T&&T(i,ke.current??v)},et=i=>n=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(n.key)){n.preventDefault();const f=Number(n.currentTarget.getAttribute("data-index")),k=E[f];let j=null;if($!=null){const v=n.shiftKey?U:$;switch(n.key){case"ArrowUp":j=ye(k,v,1,d,c);break;case"ArrowRight":j=ye(k,v,o?-1:1,d,c);break;case"ArrowDown":j=ye(k,v,-1,d,c);break;case"ArrowLeft":j=ye(k,v,o?1:-1,d,c);break;case"PageUp":j=ye(k,U,1,d,c);break;case"PageDown":j=ye(k,U,-1,d,c);break;case"Home":j=d;break;case"End":j=c;break}}else if(we){const v=R[R.length-1],W=R.indexOf(k),G=[o?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],z=[o?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];G.includes(n.key)?W===0?j=R[0]:j=R[W-1]:z.includes(n.key)&&(W===R.length-1?j=v:j=R[W+1])}j!=null&&Ee(n,j)}i?.onKeyDown?.(n)};Gt(()=>{a&&L.current.contains(document.activeElement)&&document.activeElement?.blur()},[a]),a&&I!==-1&&H(-1),a&&se!==-1&&be(-1);const Pe=i=>n=>{i.onChange?.(n),Ee(n,n.target.valueAsNumber)},le=u.useRef(void 0);let ce=S;o&&S==="horizontal"&&(ce+="-reverse");const de=({finger:i,move:n=!1})=>{const{current:f}=L,{width:k,height:j,bottom:v,left:W}=f.getBoundingClientRect();let G;ce.startsWith("vertical")?G=(v-i.y)/j:G=(i.x-W)/k,ce.includes("-reverse")&&(G=1-G);let z;if(z=Lr(G,d,c),$)z=Br(z,$,d);else{const Le=yt(R,z);z=R[Le]}z=Te(z,d,c);let Z=0;if(fe){n?Z=le.current:Z=yt(E,z),l&&(z=Te(z,E[Z-1]||-1/0,E[Z+1]||1/0));const Le=z;z=jt({values:E,newValue:z,index:Z}),l&&n||(Z=z.indexOf(Le),le.current=Z)}return{newValue:z,activeIndex:Z}},ue=nt(i=>{const n=He(i,x);if(!n)return;if(xe.current+=1,i.type==="mousemove"&&i.buttons===0){J(i);return}const{newValue:f,activeIndex:k}=de({finger:n,move:!0});Fe({sliderRef:L,activeIndex:k,setActive:H}),F(f),!q&&xe.current>Cr&&ne(!0),O&&!We(f,K)&&O(i,f,k)}),J=nt(i=>{const n=He(i,x);if(ne(!1),!n)return;const{newValue:f}=de({finger:n,move:!0});H(-1),i.type==="touchend"&&Y(-1),T&&T(i,ke.current??f),x.current=void 0,pe()}),N=nt(i=>{if(a)return;St()||i.preventDefault();const n=i.changedTouches[0];n!=null&&(x.current=n.identifier);const f=He(i,x);if(f!==!1){const{newValue:j,activeIndex:v}=de({finger:f});Fe({sliderRef:L,activeIndex:v,setActive:H}),F(j),O&&!We(j,K)&&O(i,j,v)}xe.current=0;const k=Ke(L.current);k.addEventListener("touchmove",ue,{passive:!0}),k.addEventListener("touchend",J,{passive:!0})}),pe=u.useCallback(()=>{const i=Ke(L.current);i.removeEventListener("mousemove",ue),i.removeEventListener("mouseup",J),i.removeEventListener("touchmove",ue),i.removeEventListener("touchend",J)},[J,ue]);u.useEffect(()=>{const{current:i}=L;return i.addEventListener("touchstart",N,{passive:St()}),()=>{i.removeEventListener("touchstart",N),pe()}},[pe,N]),u.useEffect(()=>{a&&pe()},[a,pe]);const tt=i=>n=>{if(i.onMouseDown?.(n),a||n.defaultPrevented||n.button!==0)return;n.preventDefault();const f=He(n,x);if(f!==!1){const{newValue:j,activeIndex:v}=de({finger:f});Fe({sliderRef:L,activeIndex:v,setActive:H}),F(j),O&&!We(j,K)&&O(n,j,v)}xe.current=0;const k=Ke(L.current);k.addEventListener("mousemove",ue,{passive:!0}),k.addEventListener("mouseup",J)},ze=Je(fe?E[0]:d,d,c),V=Je(E[E.length-1],d,c)-ze,Ce=(i={})=>{const n=it(i),f={onMouseDown:tt(n||{})},k={...n,...f};return{...i,ref:ie,...k}},Me=i=>n=>{i.onMouseOver?.(n);const f=Number(n.currentTarget.getAttribute("data-index"));Y(f)},Oe=i=>n=>{i.onMouseLeave?.(n),Y(-1)},De=(i={})=>{const n=it(i),f={onMouseOver:Me(n||{}),onMouseLeave:Oe(n||{})};return{...i,...n,...f}},Ae=i=>({pointerEvents:I!==-1&&I!==i?"none":void 0});let ve;return S==="vertical"&&(ve=o?"vertical-rl":"vertical-lr"),{active:I,axis:ce,axisProps:Rr,dragging:q,focusedThumbIndex:se,getHiddenInputProps:(i={})=>{const n=it(i),f={onChange:Pe(n||{}),onFocus:Ze(n||{}),onBlur:Qe(n||{}),onKeyDown:et(n||{})},k={...n,...f};return{tabIndex:h,"aria-labelledby":r,"aria-orientation":S,"aria-valuemax":A(c),"aria-valuemin":A(d),name:g,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:a,...i,...k,style:{...kr,direction:o?"rtl":"ltr",width:"100%",height:"100%",writingMode:ve}}},getRootProps:Ce,getThumbProps:De,marks:we,open:Ie,range:fe,rootRef:ie,trackLeap:V,trackOffset:ze,values:E,getThumbStyle:Ae}}const Ir=e=>!e||!Ge(e);function Er(e){return Ct("MuiSlider",e)}const X=Lt("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Pr=e=>{const{open:r}=e;return{offset:je(r&&X.valueLabelOpen),circle:X.valueLabelCircle,label:X.valueLabelLabel}};function zr(e){const{children:r,className:s,value:a}=e,l=Pr(e);return r?u.cloneElement(r,{className:r.props.className},t.jsxs(u.Fragment,{children:[r.props.children,t.jsx("span",{className:je(l.offset,s),"aria-hidden":!0,children:t.jsx("span",{className:l.circle,children:t.jsx("span",{className:l.label,children:a})})})]})):null}function kt(e){return e}const Mr=ae("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:s}=e;return[r.root,r[`color${_(s.color)}`],s.size!=="medium"&&r[`size${_(s.size)}`],s.marked&&r.marked,s.orientation==="vertical"&&r.vertical,s.track==="inverted"&&r.trackInverted,s.track===!1&&r.trackFalse]}})(ge(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${X.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${X.dragging}`]:{[`& .${X.thumb}, & .${X.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(_e()).map(([r])=>({props:{color:r},style:{color:(e.vars||e).palette[r].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),Or=ae("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Dr=ae("span",{name:"MuiSlider",slot:"Track"})(ge(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(_e()).map(([r])=>({props:{color:r,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${r}Track`],borderColor:e.vars.palette.Slider[`${r}Track`]}:{backgroundColor:e.lighten(e.palette[r].main,.62),borderColor:e.lighten(e.palette[r].main,.62),...e.applyStyles("dark",{backgroundColor:e.darken(e.palette[r].main,.5)}),...e.applyStyles("dark",{borderColor:e.darken(e.palette[r].main,.5)})}}}))]}))),Ar=ae("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,r)=>{const{ownerState:s}=e;return[r.thumb,r[`thumbColor${_(s.color)}`],s.size!=="medium"&&r[`thumbSize${_(s.size)}`]]}})(ge(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${X.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(_e()).map(([r])=>({props:{color:r},style:{[`&:hover, &.${X.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[r].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${X.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[r].main,.16)}`}}}))]}))),Nr=ae(zr,{name:"MuiSlider",slot:"ValueLabel"})(ge(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${X.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${X.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),Vr=ae("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>Rt(e)&&e!=="markActive",overridesResolver:(e,r)=>{const{markActive:s}=e;return[r.mark,s&&r.markActive]}})(ge(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),Hr=ae("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>Rt(e)&&e!=="markLabelActive"})(ge(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),Fr=e=>{const{disabled:r,dragging:s,marked:a,orientation:l,track:o,classes:b,color:c,size:d}=e,g={root:["root",r&&"disabled",s&&"dragging",a&&"marked",l==="vertical"&&"vertical",o==="inverted"&&"trackInverted",o===!1&&"trackFalse",c&&`color${_(c)}`,d&&`size${_(d)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",r&&"disabled",d&&`thumbSize${_(d)}`,c&&`thumbColor${_(c)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Bt(g,Er,b)},Wr=({children:e})=>e,Ur=u.forwardRef(function(r,s){const a=Tt({props:r,name:"MuiSlider"}),l=Xt(),{"aria-label":o,"aria-valuetext":b,"aria-labelledby":c,component:d="span",components:g={},componentsProps:y={},color:T="primary",classes:S,className:B,disableSwap:A=!1,disabled:$=!1,getAriaLabel:U,getAriaValueText:h,marks:p=!1,max:x=100,min:I=0,name:H,onChange:Ie,onChangeCommitted:Y,orientation:q="horizontal",shiftStep:ne=10,size:xe="medium",step:ke=1,scale:K=kt,slotProps:F,slots:O,tabIndex:fe,track:E="normal",value:we,valueLabelDisplay:R="off",valueLabelFormat:se=kt,...be}=a,L={...a,isRtl:l,max:x,min:I,classes:S,disabled:$,disableSwap:A,orientation:q,marks:p,color:T,size:xe,step:ke,shiftStep:ne,scale:K,track:E,valueLabelDisplay:R,valueLabelFormat:se},{axisProps:ie,getRootProps:Ze,getHiddenInputProps:Qe,getThumbProps:Ee,open:et,active:Pe,axis:le,focusedThumbIndex:ce,range:de,dragging:ue,marks:J,values:N,trackOffset:pe,trackLeap:tt,getThumbStyle:ze}=$r({...L,rootRef:s});L.marked=J.length>0&&J.some(P=>P.label),L.dragging=ue,L.focusedThumbIndex=ce;const V=Fr(L),Ce=O?.root??g.Root??Mr,Me=O?.rail??g.Rail??Or,Oe=O?.track??g.Track??Dr,De=O?.thumb??g.Thumb??Ar,Ae=O?.valueLabel??g.ValueLabel??Nr,ve=O?.mark??g.Mark??Vr,Ne=O?.markLabel??g.MarkLabel??Hr,i=O?.input??g.Input??"input",n=F?.root??y.root,f=F?.rail??y.rail,k=F?.track??y.track,j=F?.thumb??y.thumb,v=F?.valueLabel??y.valueLabel,W=F?.mark??y.mark,G=F?.markLabel??y.markLabel,z=F?.input??y.input,Z=oe({elementType:Ce,getSlotProps:Ze,externalSlotProps:n,externalForwardedProps:be,additionalProps:{...Ir(Ce)&&{as:d}},ownerState:{...L,...n?.ownerState},className:[V.root,B]}),Le=oe({elementType:Me,externalSlotProps:f,ownerState:L,className:V.rail}),Nt=oe({elementType:Oe,externalSlotProps:k,additionalProps:{style:{...ie[le].offset(pe),...ie[le].leap(tt)}},ownerState:{...L,...k?.ownerState},className:V.track}),rt=oe({elementType:De,getSlotProps:Ee,externalSlotProps:j,ownerState:{...L,...j?.ownerState},className:V.thumb}),Vt=oe({elementType:Ae,externalSlotProps:v,ownerState:{...L,...v?.ownerState},className:V.valueLabel}),st=oe({elementType:ve,externalSlotProps:W,ownerState:L,className:V.mark}),ot=oe({elementType:Ne,externalSlotProps:G,ownerState:L,className:V.markLabel}),Ht=oe({elementType:i,getSlotProps:Qe,externalSlotProps:z,ownerState:L});return t.jsxs(Ce,{...Z,children:[t.jsx(Me,{...Le}),t.jsx(Oe,{...Nt}),J.filter(P=>P.value>=I&&P.value<=x).map((P,D)=>{const at=Je(P.value,I,x),Ve=ie[le].offset(at);let te;return E===!1?te=N.includes(P.value):te=E==="normal"&&(de?P.value>=N[0]&&P.value<=N[N.length-1]:P.value<=N[0])||E==="inverted"&&(de?P.value<=N[0]||P.value>=N[N.length-1]:P.value>=N[0]),t.jsxs(u.Fragment,{children:[t.jsx(ve,{"data-index":D,...st,...!Ge(ve)&&{markActive:te},style:{...Ve,...st.style},className:je(st.className,te&&V.markActive)}),P.label!=null?t.jsx(Ne,{"aria-hidden":!0,"data-index":D,...ot,...!Ge(Ne)&&{markLabelActive:te},style:{...Ve,...ot.style},className:je(V.markLabel,ot.className,te&&V.markLabelActive),children:P.label}):null]},D)}),N.map((P,D)=>{const at=Je(P,I,x),Ve=ie[le].offset(at),te=R==="off"?Wr:Ae;return t.jsx(te,{...!Ge(te)&&{valueLabelFormat:se,valueLabelDisplay:R,value:typeof se=="function"?se(K(P),D):se,index:D,open:et===D||Pe===D||R==="on",disabled:$},...Vt,children:t.jsx(De,{"data-index":D,...rt,className:je(V.thumb,rt.className,Pe===D&&V.active,ce===D&&V.focusVisible),style:{...Ve,...ze(D),...rt.style},children:t.jsx(i,{"data-index":D,"aria-label":U?U(D):o,"aria-valuenow":K(P),"aria-labelledby":c,"aria-valuetext":h?h(K(P),D):b,value:N[D],...Ht})})},D)})]})}),Kr=Se(t.jsx("path",{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.996.996 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12z"})),Gr=Se(t.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),Xr=Se(t.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"})),wt=Se(t.jsx("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"})),Yr=Se(t.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),qr=Se(t.jsx("path",{d:"m12 16.5 4-4h-3v-9h-2v9H8zm9-13h-6v1.99h6v14.03H3V5.49h6V3.5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-14c0-1.1-.9-2-2-2"})),Jr=({tableName:e,item:r,primaryKey:s})=>{const[a,l]=u.useState(!1),[o,b]=u.useState(JSON.stringify(r,null,2)),[c,d]=u.useState(null),g=async()=>{try{const T=JSON.parse(o);await $e.table(e).put(T),l(!1),d(null)}catch(T){d(T instanceof Error?T.message:"Invalid JSON")}},y=async()=>{confirm("Are you sure you want to delete this record?")&&await $e.table(e).delete(s)};return a?t.jsxs(C,{sx:{p:1},children:[t.jsx(qe,{fullWidth:!0,multiline:!0,minRows:3,value:o,onChange:T=>b(T.target.value),variant:"outlined",size:"small",sx:{fontFamily:"monospace",mb:1}}),c&&t.jsx(me,{severity:"error",sx:{mb:1},children:c}),t.jsxs(dr,{direction:"row",spacing:1,justifyContent:"flex-end",children:[t.jsx(M,{startIcon:t.jsx(Gr,{}),onClick:()=>{l(!1),b(JSON.stringify(r,null,2)),d(null)},size:"small",children:"Cancel"}),t.jsx(M,{startIcon:t.jsx(Yr,{}),onClick:g,variant:"contained",size:"small",children:"Save"})]})]}):t.jsxs(C,{children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"flex-end",mb:1},children:[t.jsx(mt,{size:"small",onClick:()=>l(!0),children:t.jsx(ur,{fontSize:"small"})}),t.jsx(mt,{size:"small",onClick:y,color:"error",children:t.jsx(Mt,{fontSize:"small"})})]}),t.jsx(C,{component:"pre",sx:{overflowX:"auto",fontSize:"0.75rem",m:0,p:1,bgcolor:"action.hover",borderRadius:1},children:JSON.stringify(r,null,2)})]})},Zr=({tableName:e})=>{const{t:r}=he(["settings"]),s=Yt(()=>$e.table(e).toArray(),[e]),l=$e.table(e).schema.primKey.name;return s?s.length===0?t.jsx(w,{children:r("settings:developer.no_records")}):t.jsx(Et,{children:s.map((o,b)=>{const c=o[l];return t.jsx(Xe,{disablePadding:!0,children:t.jsxs(qt,{sx:{width:"100%"},children:[t.jsx(Jt,{expandIcon:t.jsx(Zt,{}),children:t.jsx(w,{noWrap:!0,children:String(o.id||o.name||o.key||`Record ${b}`)})}),t.jsx(Qt,{children:t.jsx(Jr,{tableName:e,item:o,primaryKey:c})})]})},c||b)})}):t.jsx(w,{children:r("settings:developer.loading")})},Qr=()=>{const{t:e}=he(["settings"]),[r,s]=u.useState(""),a=$e.tables.map(o=>o.name),l=o=>{s(o.target.value)};return t.jsxs(C,{sx:{mt:2},children:[t.jsxs(_t,{fullWidth:!0,size:"small",sx:{mb:2},children:[t.jsx($t,{children:e("settings:developer.select_table")}),t.jsx(It,{value:r,label:e("settings:developer.select_table"),onChange:l,children:a.map(o=>t.jsx(Ye,{value:o,children:o},o))})]}),r&&t.jsx(Zr,{tableName:r})]})},es=()=>{const{t:e}=he(["settings"]),{debugLogs:r,clearDebugLogs:s}=ut(),a=r.filter(o=>o.type==="packet").sort((o,b)=>new Date(b.timestamp).getTime()-new Date(o.timestamp).getTime()),l=o=>o===void 0?"UNKNOWN":er[o]||`OP_${o.toString(16).toUpperCase()}`;return t.jsxs(C,{sx:{mt:4},children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t.jsx(w,{variant:"h6",children:e("settings:developer.packet_logger_title")}),t.jsx(M,{variant:"outlined",color:"error",startIcon:t.jsx(Mt,{}),onClick:s,size:"small",children:e("settings:developer.clear_logs")})]}),t.jsx(Pt,{variant:"outlined",sx:{width:"100%",overflow:"hidden"},children:t.jsx(C,{sx:{maxHeight:400,overflowY:"auto"},children:t.jsxs(pr,{stickyHeader:!0,size:"small",children:[t.jsx(mr,{children:t.jsxs(dt,{children:[t.jsx(re,{children:"Time"}),t.jsx(re,{children:"Dir"}),t.jsx(re,{children:"Opcode"}),t.jsx(re,{children:"Payload (Hex)"})]})}),t.jsx(gr,{children:a.length>0?a.map(o=>t.jsxs(dt,{hover:!0,children:[t.jsx(re,{sx:{whiteSpace:"nowrap",fontSize:"0.75rem"},children:new Date(o.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3})}),t.jsx(re,{children:t.jsx(Ot,{label:o.direction,color:o.direction==="TX"?"primary":"success",size:"small",sx:{fontSize:"0.7rem",height:20}})}),t.jsx(re,{sx:{fontSize:"0.75rem",fontWeight:"bold"},children:l(o.opcode)}),t.jsx(re,{sx:{fontFamily:"monospace",fontSize:"0.75rem",wordBreak:"break-all"},children:o.payload||"-"})]},o.id)):t.jsx(dt,{children:t.jsx(re,{colSpan:4,align:"center",children:t.jsx(w,{variant:"body2",color:"text.secondary",sx:{py:2},children:e("settings:developer.no_records")})})})})]})})})]})},ts=e=>rr[e]||`UNKNOWN_OPCODE_${e}`,At={},rs=(e,r)=>{At[e]=r},ss=()=>{const{t:e}=he(["settings"]),{sendPacket:r,isConnected:s}=ut(),[a,l]=u.useState(""),[o,b]=u.useState({}),[c,d]=u.useState(null),[g,y]=u.useState(null),T=u.useMemo(()=>Array.from(gt.getRegisteredTXPackets().entries()).sort((h,p)=>h[0]-p[0]),[]),S=u.useMemo(()=>a===""?null:gt.getRegisteredTXPackets().get(a),[a]),B=u.useMemo(()=>!S||!S.schema?null:S.schema instanceof tr?S.schema.shape:null,[S]);u.useEffect(()=>{if(!B){setTimeout(()=>b({}),0);return}const h={};Object.keys(B).forEach(p=>{h[p]=At[p]||""}),setTimeout(()=>b(h),0)},[B]);const A=h=>{l(h.target.value),d(null),y(null)},$=(h,p)=>{b(x=>({...x,[h]:p})),rs(h,p),d(null),y(null)},U=async()=>{if(S){d(null),y(null);try{let h={};if(S.schema){const x=S.schema.safeParse(o);if(!x.success){const I=x.error.errors.map(H=>`${H.path.join(".")}: ${H.message}`).join(", ");d(I);return}h=x.data}const p=new S;Object.assign(p,h),await r(p),console.log("Packet sent successfully",p),y(e("settings:developer.packet_sent_success"))}catch(h){console.error("Failed to send packet",h);const p=h instanceof Error?h.message:String(h);d(p||e("settings:developer.packet_send_error"))}}};return t.jsxs(C,{sx:{display:"flex",flexDirection:"column",gap:3},children:[t.jsx(me,{severity:s?"success":"warning",children:e(s?"settings:developer.enabled_success":"settings:developer.not_connected_warning")}),t.jsxs(_t,{fullWidth:!0,children:[t.jsx($t,{children:e("settings:developer.packet_type_label")}),t.jsx(It,{value:a,label:e("settings:developer.packet_type_label"),onChange:A,children:T.map(([h])=>t.jsxs(Ye,{value:h,children:[ts(h)," (",h,")"]},h))})]}),S&&t.jsxs(Pt,{variant:"outlined",sx:{p:2},children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:e("settings:developer.packet_parameters_title")}),t.jsxs(C,{sx:{display:"flex",flexDirection:"column",gap:2},children:[B?Object.keys(B).length>0?Object.keys(B).map(h=>{const p=B[h];let x=!1;const I=p._def.typeName;return(I==="ZodNumber"||I==="ZodEffects"&&p._def.schema?._def.typeName==="ZodNumber")&&(x=!0),t.jsx(qe,{label:h,variant:"outlined",fullWidth:!0,type:x?"number":"text",value:o[h]||"",onChange:H=>$(h,H.target.value),helperText:x?"Number":"String"},h)}):t.jsx(w,{color:"text.secondary",children:e("settings:developer.no_parameters")}):t.jsx(w,{color:"text.secondary",children:e("settings:developer.no_schema")}),c&&t.jsx(me,{severity:"error",children:c}),g&&t.jsx(me,{severity:"success",children:g}),t.jsx(M,{variant:"contained",onClick:U,disabled:!s&&!window.BOKS_SIMULATOR_ENABLED,children:e("settings:developer.send_packet")})]})]}),t.jsx(es,{})]})},os=()=>{const{t:e}=he(["settings"]),[r,s]=u.useState([]),[a,l]=u.useState(null),o=async()=>{if("serviceWorker"in navigator){const g=await navigator.serviceWorker.getRegistrations();s([...g])}};u.useEffect(()=>{o()},[]);const b=async g=>{try{await g.update(),l(e("settings:developer.sw_update_requested")),o()}catch(y){l(e("settings:developer.sw_update_failed",{error:String(y)}))}},c=async g=>{try{const y=await g.unregister();l(e(y?"settings:developer.sw_unregister_success":"settings:developer.sw_unregister_failed")),o()}catch(y){l(e("settings:developer.sw_unregister_error",{error:String(y)}))}},d=()=>{window.location.reload()};return"serviceWorker"in navigator?t.jsx(Q,{sx:{mt:2},children:t.jsxs(ee,{children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:e("settings:developer.sw_title")}),t.jsx(zt,{sx:{mb:2}}),a&&t.jsx(me,{severity:"info",sx:{mb:2},onClose:()=>l(null),children:a}),r.length===0?t.jsx(w,{variant:"body2",color:"text.secondary",children:e("settings:developer.sw_no_active")}):r.map((g,y)=>t.jsxs(C,{sx:{mb:2,p:1,border:"1px solid #ddd",borderRadius:1},children:[t.jsx(w,{variant:"subtitle2",children:e("settings:developer.sw_scope",{scope:g.scope})}),t.jsx(w,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:e("settings:developer.sw_status",{status:g.installing?e("settings:developer.sw_installing"):g.waiting?e("settings:developer.sw_waiting"):g.active?e("settings:developer.sw_active"):e("settings:developer.sw_unknown")})}),t.jsxs(C,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1},children:[t.jsx(M,{size:"small",variant:"outlined",startIcon:t.jsx(qr,{}),onClick:()=>b(g),children:e("settings:developer.sw_check_update")}),t.jsx(M,{size:"small",variant:"outlined",color:"error",startIcon:t.jsx(Xr,{}),onClick:()=>c(g),children:e("settings:developer.sw_unregister")})]})]},y)),t.jsx(C,{sx:{mt:2},children:t.jsx(M,{fullWidth:!0,variant:"contained",color:"primary",startIcon:t.jsx(sr,{}),onClick:d,children:e("settings:developer.sw_reload")})})]})}):t.jsx(me,{severity:"warning",children:e("settings:developer.sw_not_supported")})},as=()=>{const{t:e}=he(["settings"]),{toggleSimulator:r,disconnect:s}=ut(),[a,l]=u.useState(()=>window.boksSimulator||null),[o,b]=u.useState(null),[c,d]=u.useState(()=>localStorage.getItem("BOKS_SIMULATOR_ENABLED")==="true"),[g,y]=u.useState(()=>!!window.boksSimulator),[T,S]=u.useState("10/125"),[B,A]=u.useState("4.1.14"),[$,U]=u.useState(!1);u.useEffect(()=>{const p=window.boksSimulator;if(p){const x=setInterval(()=>{b(p.getPublicState())},500);return()=>clearInterval(x)}},[]),u.useEffect(()=>{if(o&&!$){const p=setTimeout(()=>{S(o.firmwareRevision),A(o.softwareRevision),U(!0)},0);return()=>clearTimeout(p)}},[o,$]);const h=(p,x)=>{d(x),r?(r(x),x?setTimeout(()=>{const I=window.boksSimulator;I&&(l(I),y(!0))},500):(y(!1),l(null))):(x?localStorage.setItem("BOKS_SIMULATOR_ENABLED","true"):localStorage.removeItem("BOKS_SIMULATOR_ENABLED"),window.location.reload())};return t.jsxs(C,{sx:{p:2,display:"flex",flexDirection:"column",gap:2},children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:e("settings:developer.simulator.title")}),t.jsx(Q,{variant:"outlined",sx:{mb:1},children:t.jsx(ee,{sx:{py:1,"&:last-child":{pb:1}},children:t.jsx(bt,{control:t.jsx(vt,{checked:c,onChange:h}),label:e("settings:developer.simulator.enable_simulator")})})}),!g&&t.jsx(me,{severity:"warning",children:e("settings:developer.simulator.not_active")}),g&&o&&t.jsxs(t.Fragment,{children:[t.jsx(Q,{variant:"outlined",children:t.jsxs(ee,{children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t.jsxs(w,{variant:"subtitle1",sx:{display:"flex",alignItems:"center",gap:1},children:[o.isOpen?t.jsx(wt,{color:"warning"}):t.jsx(ft,{color:"success"}),e("settings:developer.simulator.status",{status:o.isOpen?e("settings:developer.simulator.open"):e("settings:developer.simulator.closed")})]}),t.jsx(bt,{control:t.jsx(vt,{checked:o.chaosMode,onChange:(p,x)=>a?.setChaosMode(x),color:"secondary"}),label:t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t.jsx(Kr,{fontSize:"small"})," ",e("settings:developer.simulator.chaos_mode")]})})]}),t.jsx(zt,{sx:{my:1}}),t.jsx(w,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{mt:1},children:e("settings:developer.simulator.manual_triggers")}),t.jsxs(Sr,{fullWidth:!0,variant:"contained",size:"small",children:[t.jsx(M,{onClick:()=>a?.triggerDoorOpen("ble"),disabled:o.isOpen,startIcon:t.jsx(wt,{}),children:e("settings:developer.simulator.ble_open")}),t.jsx(M,{onClick:()=>a?.triggerDoorOpen("nfc"),disabled:o.isOpen,color:"info",children:e("settings:developer.simulator.nfc_open")}),t.jsx(M,{onClick:()=>a?.triggerDoorOpen("button"),disabled:o.isOpen,color:"warning",children:e("settings:developer.simulator.button_open")})]}),t.jsx(M,{fullWidth:!0,variant:"outlined",size:"small",sx:{mt:1},onClick:()=>a?.triggerDoorClose(),disabled:!o.isOpen,startIcon:t.jsx(ft,{}),children:e("settings:developer.simulator.force_close")})]})}),t.jsx(Q,{variant:"outlined",children:t.jsxs(ee,{children:[t.jsx(w,{variant:"subtitle2",gutterBottom:!0,children:"Device Versions"}),t.jsxs(C,{sx:{display:"flex",gap:2,mb:2},children:[t.jsxs(qe,{select:!0,label:"Hardware / Firmware",value:T,onChange:p=>S(p.target.value),size:"small",fullWidth:!0,children:[Object.entries(or).map(([p,x])=>t.jsxs(Ye,{value:p,children:["HW ",x," (FW ",p,")"]},p)),t.jsx(Ye,{value:"custom",children:"Custom..."})]}),t.jsx(qe,{label:"Software Revision",value:B,onChange:p=>A(p.target.value),size:"small",fullWidth:!0})]}),t.jsx(M,{variant:"contained",size:"small",onClick:()=>{a?.setVersion(B,T),s()},children:"Update & Reconnect"})]})}),t.jsx(Q,{variant:"outlined",children:t.jsxs(ee,{children:[t.jsxs(w,{variant:"subtitle2",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[t.jsx(ar,{})," ",e("settings:developer.simulator.battery_level",{level:o.batteryLevel})]}),t.jsx(Ur,{value:o.batteryLevel,onChange:(p,x)=>a?.setBatteryLevel(x),valueLabelDisplay:"auto",min:0,max:100,size:"small"})]})}),t.jsx(Q,{variant:"outlined",children:t.jsxs(ee,{children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs(w,{variant:"subtitle2",sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(nr,{})," ",e("settings:developer.simulator.logs_count",{count:o.logs.length})]}),t.jsx(M,{size:"small",variant:"text",color:"error",onClick:()=>a?.reset(),children:e("settings:developer.simulator.reset")})]}),t.jsx(C,{sx:{mt:1,maxHeight:150,overflow:"auto",fontSize:"0.75rem",fontFamily:"monospace",bgcolor:"rgba(0,0,0,0.03)",p:1,borderRadius:1},children:o.logs.length===0?e("settings:developer.simulator.no_logs"):[...o.logs].reverse().map((p,x)=>t.jsxs("div",{children:["[",new Date(p.timestamp).toLocaleTimeString(),"] Op: 0x",p.opcode.toString(16).toUpperCase()]},x))})]})})]})]})};function Re(e){const{children:r,value:s,index:a,...l}=e;return t.jsx("div",{role:"tabpanel",hidden:s!==a,id:`simple-tabpanel-${a}`,"aria-labelledby":`simple-tab-${a}`,...l,children:s===a&&t.jsx(C,{sx:{p:2},children:r})})}const hs=()=>{const{t:e}=he(["settings"]),r=ir(),{isDeveloperMode:s,disableDeveloperMode:a}=lr(),l=u.useContext(cr),[o,b]=u.useState(0),[c,d]=u.useState(null);u.useEffect(()=>{s||r("/")},[s,r]),u.useEffect(()=>{const S=B=>{const A=B.detail;d(A)};return window.addEventListener(ht,S),()=>{window.removeEventListener(ht,S)}},[]);const g=()=>{a(),r("/")},y=async()=>{try{confirm(e("settings:developer.mock_data_confirm"))&&(await xt.mockData(),alert(e("settings:developer.mock_data_success")))}catch(S){console.error(S),alert(e("settings:developer.mock_data_failed"))}},T=(S,B)=>{b(B)};return t.jsxs(xr,{maxWidth:"md",sx:{py:2},children:[t.jsxs(C,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(w,{variant:"h4",children:e("settings:developer.page_title")}),t.jsx(M,{variant:"outlined",color:"error",onClick:g,children:e("settings:developer.disable_mode")})]}),t.jsx(C,{sx:{borderBottom:1,borderColor:"divider"},children:t.jsxs(hr,{value:o,onChange:T,variant:"scrollable",scrollButtons:"auto","aria-label":"developer tabs",children:[t.jsx(Be,{label:e("settings:developer.tabs.general")}),t.jsx(Be,{label:e("settings:developer.tabs.database")}),t.jsx(Be,{label:e("settings:developer.tabs.bluetooth")}),t.jsx(Be,{label:e("settings:developer.tabs.simulator")}),t.jsx(Be,{label:"Fun"})]})}),t.jsx(Re,{value:o,index:0,children:t.jsx(os,{})}),t.jsx(Re,{value:o,index:1,children:t.jsx(Q,{children:t.jsxs(ee,{children:[t.jsxs(C,{sx:{mb:4},children:[t.jsxs(C,{sx:{display:"flex",gap:2},children:[t.jsx(M,{variant:"contained",onClick:y,children:e("settings:developer.load_mock_data")}),t.jsx(M,{variant:"outlined",color:"error",onClick:()=>{confirm(e("settings:developer.clear_db_confirm"))&&xt.clearAllData()},children:e("settings:developer.clear_db")})]}),t.jsx(w,{variant:"caption",display:"block",color:"text.secondary",sx:{mt:1},children:e("settings:developer.mock_data_helper")})]}),t.jsx(w,{variant:"h6",gutterBottom:!0,children:e("settings:developer.db_editor")}),t.jsx(w,{variant:"body2",color:"text.secondary",paragraph:!0,children:e("settings:developer.db_editor_helper")}),t.jsx(Qr,{})]})})}),t.jsx(Re,{value:o,index:2,children:t.jsx(Q,{children:t.jsxs(ee,{children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:"Bluetooth Debugger"}),t.jsx(ss,{})]})})}),t.jsx(Re,{value:o,index:3,children:t.jsx(as,{})}),t.jsxs(Re,{value:o,index:4,children:[t.jsx(Q,{sx:{mb:2},children:t.jsxs(ee,{children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:"Matrix Mode"}),t.jsx(w,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Enter the Matrix. Or execute the Konami Code: ↑ ↑ ↓ ↓ ← → ← →"}),t.jsxs(C,{sx:{display:"flex",gap:2},children:[t.jsx(M,{variant:"contained",color:l?.mode===lt.MATRIX?"primary":"secondary",onClick:()=>l?.setThemeMode(lt.MATRIX),children:"Activate Matrix Mode"}),t.jsx(M,{variant:"outlined",onClick:()=>l?.setThemeMode(lt.SYSTEM),children:"Reset Theme"})]})]})}),t.jsx(Q,{children:t.jsxs(ee,{children:[t.jsx(w,{variant:"h6",gutterBottom:!0,children:"Konami Code Debugger"}),t.jsx(C,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:2},children:["UP","UP","DOWN","DOWN","LEFT","RIGHT","LEFT","RIGHT"].map((S,B)=>t.jsx(Ot,{label:S,color:c&&B<c.sequenceIndex?"success":"default",variant:c&&B===c.sequenceIndex?"filled":"outlined"},B))}),c&&t.jsxs(Et,{dense:!0,children:[t.jsx(Xe,{children:t.jsx(ct,{primary:"Last Input",secondary:c.direction||"None"})}),t.jsx(Xe,{children:t.jsx(ct,{primary:"Status",secondary:c.status})}),t.jsx(Xe,{children:t.jsx(ct,{primary:"Expected Next",secondary:c.expected})})]}),t.jsx(w,{variant:"caption",color:"text.secondary",children:"Note: Ensure you are swiping clearly. On desktop, click and drag. On mobile, swipe."})]})})]})]})};export{hs as DeveloperPage};
