import{r as p,g as vt,a as yt,u as St,j as t,aF as Ot,aG as Dt,c as je,a9 as _,b as jt,s as oe,m as ge,aH as $e,aI as At,aJ as Be,aK as Nt,aL as Vt,aM as ot,aN as Ke,aO as st,aP as it,aQ as Ge,aR as Ht,aS as re,aa as kt,e as he,f as fe,W as _e,k as L,aT as wt,aU as Ct,aV as Lt,aW as Bt,V as Ft,T as B,a1 as Wt,a2 as Ut,aX as Kt,aY as Gt,am as Yt,aZ as Xt,K as $t,a7 as me,l as N,M as lt,Q as nt,P as _t,aA as Jt,a_ as ct,a$ as qt,Y as Zt,z as ue,A as pe,D as Tt,aj as Qt,b0 as er,H as tr,q as rr,b1 as or,b2 as dt}from"./index-Dn_BFJBL.js";import{S as sr}from"./Stack-wA71MHbZ.js";import{E as ar}from"./Edit-Da2lCA1-.js";import{D as Rt}from"./Delete-BGNb387s.js";import{T as nr,a as ir,b as at,c as ee,d as lr}from"./TableRow-C9wtc1Dx.js";import{C as cr}from"./Chip-Bc686Dd-.js";import{F as ut,S as pt,T as dr,a as Ne}from"./Tabs-Bbs8Vlou.js";import{C as ur}from"./Container-D1iPB-ox.js";function pr(e){return p.Children.toArray(e).filter(r=>p.isValidElement(r))}function mr(e){return vt("MuiButtonGroup",e)}const u=yt("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),gr=(e,r)=>{const{ownerState:o}=e;return[{[`& .${u.grouped}`]:r.grouped},{[`& .${u.grouped}`]:r[`grouped${_(o.orientation)}`]},{[`& .${u.grouped}`]:r[`grouped${_(o.variant)}`]},{[`& .${u.grouped}`]:r[`grouped${_(o.variant)}${_(o.orientation)}`]},{[`& .${u.grouped}`]:r[`grouped${_(o.variant)}${_(o.color)}`]},{[`& .${u.firstButton}`]:r.firstButton},{[`& .${u.lastButton}`]:r.lastButton},{[`& .${u.middleButton}`]:r.middleButton},r.root,r[o.variant],o.disableElevation===!0&&r.disableElevation,o.fullWidth&&r.fullWidth,o.orientation==="vertical"&&r.vertical]},hr=e=>{const{classes:r,color:o,disabled:s,disableElevation:a,fullWidth:l,orientation:f,variant:d}=e,c={root:["root",d,f,l&&"fullWidth",a&&"disableElevation",`color${_(o)}`],grouped:["grouped",`grouped${_(f)}`,`grouped${_(d)}`,`grouped${_(d)}${_(f)}`,`grouped${_(d)}${_(o)}`,s&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return jt(c,mr,r)},fr=oe("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:gr})(ge(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(e.vars||e).shadows[2],[`& .${u.grouped}`]:{boxShadow:"none","&:hover":{boxShadow:"none"}}}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${u.lastButton},& .${u.middleButton}`]:{borderTopRightRadius:0,borderTopLeftRadius:0},[`& .${u.firstButton},& .${u.middleButton}`]:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},{props:{orientation:"horizontal"},style:{[`& .${u.firstButton},& .${u.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${u.lastButton},& .${u.middleButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},{props:{variant:"text",orientation:"horizontal"},style:{[`& .${u.firstButton},& .${u.middleButton}`]:{borderRight:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${u.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"text",orientation:"vertical"},style:{[`& .${u.firstButton},& .${u.middleButton}`]:{borderBottom:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${u.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter($e()).flatMap(([r])=>[{props:{variant:"text",color:r},style:{[`& .${u.firstButton},& .${u.middleButton}`]:{borderColor:e.alpha((e.vars||e).palette[r].main,.5)}}}]),{props:{variant:"outlined",orientation:"horizontal"},style:{[`& .${u.firstButton},& .${u.middleButton}`]:{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}},[`& .${u.lastButton},& .${u.middleButton}`]:{marginLeft:-1}}},{props:{variant:"outlined",orientation:"vertical"},style:{[`& .${u.firstButton},& .${u.middleButton}`]:{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}},[`& .${u.lastButton},& .${u.middleButton}`]:{marginTop:-1}}},{props:{variant:"contained",orientation:"horizontal"},style:{[`& .${u.firstButton},& .${u.middleButton}`]:{borderRight:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${u.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"contained",orientation:"vertical"},style:{[`& .${u.firstButton},& .${u.middleButton}`]:{borderBottom:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${u.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter($e(["dark"])).map(([r])=>({props:{variant:"contained",color:r},style:{[`& .${u.firstButton},& .${u.middleButton}`]:{borderColor:(e.vars||e).palette[r].dark}}}))],[`& .${u.grouped}`]:{minWidth:40}}))),br=p.forwardRef(function(r,o){const s=St({props:r,name:"MuiButtonGroup"}),{children:a,className:l,color:f="primary",component:d="div",disabled:c=!1,disableElevation:m=!1,disableFocusRipple:x=!1,disableRipple:j=!1,fullWidth:v=!1,orientation:O="horizontal",size:Y="medium",variant:I="outlined",...X}=s,h={...s,color:f,component:d,disabled:c,disableElevation:m,disableFocusRipple:x,disableRipple:j,fullWidth:v,orientation:O,size:Y,variant:I},k=hr(h),C=p.useMemo(()=>({className:k.grouped,color:f,disabled:c,disableElevation:m,disableFocusRipple:x,disableRipple:j,fullWidth:v,size:Y,variant:I}),[f,c,m,x,j,v,Y,I,k.grouped]),z=pr(a),V=z.length,Te=G=>{const J=G===0,se=G===V-1;return J&&se?"":J?k.firstButton:se?k.lastButton:k.middleButton};return t.jsx(fr,{as:d,role:"group",className:je(k.root,l),ref:o,ownerState:h,...X,children:t.jsx(Ot.Provider,{value:C,children:z.map((G,J)=>t.jsx(Dt.Provider,{value:Te(J),children:G},J))})})}),xr={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function vr(e,r,o=(s,a)=>s===a){return e.length===r.length&&e.every((s,a)=>o(s,r[a]))}const yr=2;function Se(e,r,o,s,a){return o===1?Math.min(e+r,a):Math.max(e-r,s)}function Pt(e,r){return e-r}function mt(e,r){const{index:o}=e.reduce((s,a,l)=>{const f=Math.abs(r-a);return s===null||f<s.distance||f===s.distance?{distance:f,index:l}:s},null)??{};return o}function Ve(e,r){if(r.current!==void 0&&e.changedTouches){const o=e;for(let s=0;s<o.changedTouches.length;s+=1){const a=o.changedTouches[s];if(a.identifier===r.current)return{x:a.clientX,y:a.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ye(e,r,o){return(e-r)*100/(o-r)}function Sr(e,r,o){return(o-r)*e+r}function jr(e){if(Math.abs(e)<1){const o=e.toExponential().split("e-"),s=o[0].split(".")[1];return(s?s.length:0)+parseInt(o[1],10)}const r=e.toString().split(".")[1];return r?r.length:0}function kr(e,r,o){const s=Math.round((e-o)/r)*r+o;return Number(s.toFixed(jr(r)))}function gt({values:e,newValue:r,index:o}){const s=e.slice();return s[o]=r,s.sort(Pt)}function He({sliderRef:e,activeIndex:r,setActive:o}){const s=Ke(e.current);(!e.current?.contains(s.activeElement)||Number(s?.activeElement?.getAttribute("data-index"))!==r)&&e.current?.querySelector(`[type="range"][data-index="${r}"]`).focus(),o&&o(r)}function Fe(e,r){return typeof e=="number"&&typeof r=="number"?e===r:typeof e=="object"&&typeof r=="object"?vr(e,r):!1}const wr={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},Cr=e=>e;let We;function ht(){return We===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?We=CSS.supports("touch-action","none"):We=!0),We}function Lr(e){const{"aria-labelledby":r,defaultValue:o,disabled:s=!1,disableSwap:a=!1,isRtl:l=!1,marks:f=!1,max:d=100,min:c=0,name:m,onChange:x,onChangeCommitted:j,orientation:v="horizontal",rootRef:O,scale:Y=Cr,step:I=1,shiftStep:X=10,tabIndex:h,value:k}=e,C=p.useRef(void 0),[z,V]=p.useState(-1),[Te,G]=p.useState(-1),[J,se]=p.useState(!1),be=p.useRef(0),ke=p.useRef(null),[W,H]=At({controlled:k,default:o??c,name:"Slider"}),E=x&&((i,n,g)=>{const S=i.nativeEvent||i,y=new S.constructor(S.type,S);Object.defineProperty(y,"target",{writable:!0,value:{value:n,name:m}}),ke.current=n,x(y,n,g)}),xe=Array.isArray(W);let T=xe?W.slice().sort(Pt):[W];T=T.map(i=>i==null?c:Be(i,c,d));const we=f===!0&&I!==null?[...Array(Math.floor((d-c)/I)+1)].map((i,n)=>({value:c+I*n})):f||[],$=we.map(i=>i.value),[te,ve]=p.useState(-1),w=p.useRef(null),ae=Nt(O,w),Xe=i=>n=>{const g=Number(n.currentTarget.getAttribute("data-index"));it(n.target)&&ve(g),G(g),i?.onFocus?.(n)},Je=i=>n=>{it(n.target)||ve(-1),G(-1),i?.onBlur?.(n)},Re=(i,n)=>{const g=Number(i.currentTarget.getAttribute("data-index")),S=T[g],y=$.indexOf(S);let b=n;if(we&&I==null){const F=$[$.length-1];b>=F?b=F:b<=$[0]?b=$[0]:b=b<S?$[y-1]:$[y+1]}if(b=Be(b,c,d),xe){a&&(b=Be(b,T[g-1]||-1/0,T[g+1]||1/0));const F=b;b=gt({values:T,newValue:b,index:g});let U=g;a||(U=b.indexOf(F)),He({sliderRef:w,activeIndex:U})}H(b),ve(g),E&&!Fe(b,W)&&E(i,b,g),j&&j(i,ke.current??b)},qe=i=>n=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(n.key)){n.preventDefault();const g=Number(n.currentTarget.getAttribute("data-index")),S=T[g];let y=null;if(I!=null){const b=n.shiftKey?X:I;switch(n.key){case"ArrowUp":y=Se(S,b,1,c,d);break;case"ArrowRight":y=Se(S,b,l?-1:1,c,d);break;case"ArrowDown":y=Se(S,b,-1,c,d);break;case"ArrowLeft":y=Se(S,b,l?1:-1,c,d);break;case"PageUp":y=Se(S,X,1,c,d);break;case"PageDown":y=Se(S,X,-1,c,d);break;case"Home":y=c;break;case"End":y=d;break}}else if(we){const b=$[$.length-1],F=$.indexOf(S),U=[l?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],P=[l?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];U.includes(n.key)?F===0?y=$[0]:y=$[F-1]:P.includes(n.key)&&(F===$.length-1?y=b:y=$[F+1])}y!=null&&Re(n,y)}i?.onKeyDown?.(n)};Vt(()=>{s&&w.current.contains(document.activeElement)&&document.activeElement?.blur()},[s]),s&&z!==-1&&V(-1),s&&te!==-1&&ve(-1);const Pe=i=>n=>{i.onChange?.(n),Re(n,n.target.valueAsNumber)},ne=p.useRef(void 0);let ie=v;l&&v==="horizontal"&&(ie+="-reverse");const le=({finger:i,move:n=!1})=>{const{current:g}=w,{width:S,height:y,bottom:b,left:F}=g.getBoundingClientRect();let U;ie.startsWith("vertical")?U=(b-i.y)/y:U=(i.x-F)/S,ie.includes("-reverse")&&(U=1-U);let P;if(P=Sr(U,c,d),I)P=kr(P,I,c);else{const Le=mt($,P);P=$[Le]}P=Be(P,c,d);let Z=0;if(xe){n?Z=ne.current:Z=mt(T,P),a&&(P=Be(P,T[Z-1]||-1/0,T[Z+1]||1/0));const Le=P;P=gt({values:T,newValue:P,index:Z}),a&&n||(Z=P.indexOf(Le),ne.current=Z)}return{newValue:P,activeIndex:Z}},ce=ot(i=>{const n=Ve(i,C);if(!n)return;if(be.current+=1,i.type==="mousemove"&&i.buttons===0){q(i);return}const{newValue:g,activeIndex:S}=le({finger:n,move:!0});He({sliderRef:w,activeIndex:S,setActive:V}),H(g),!J&&be.current>yr&&se(!0),E&&!Fe(g,W)&&E(i,g,S)}),q=ot(i=>{const n=Ve(i,C);if(se(!1),!n)return;const{newValue:g}=le({finger:n,move:!0});V(-1),i.type==="touchend"&&G(-1),j&&j(i,ke.current??g),C.current=void 0,de()}),D=ot(i=>{if(s)return;ht()||i.preventDefault();const n=i.changedTouches[0];n!=null&&(C.current=n.identifier);const g=Ve(i,C);if(g!==!1){const{newValue:y,activeIndex:b}=le({finger:g});He({sliderRef:w,activeIndex:b,setActive:V}),H(y),E&&!Fe(y,W)&&E(i,y,b)}be.current=0;const S=Ke(w.current);S.addEventListener("touchmove",ce,{passive:!0}),S.addEventListener("touchend",q,{passive:!0})}),de=p.useCallback(()=>{const i=Ke(w.current);i.removeEventListener("mousemove",ce),i.removeEventListener("mouseup",q),i.removeEventListener("touchmove",ce),i.removeEventListener("touchend",q)},[q,ce]);p.useEffect(()=>{const{current:i}=w;return i.addEventListener("touchstart",D,{passive:ht()}),()=>{i.removeEventListener("touchstart",D),de()}},[de,D]),p.useEffect(()=>{s&&de()},[s,de]);const Ze=i=>n=>{if(i.onMouseDown?.(n),s||n.defaultPrevented||n.button!==0)return;n.preventDefault();const g=Ve(n,C);if(g!==!1){const{newValue:y,activeIndex:b}=le({finger:g});He({sliderRef:w,activeIndex:b,setActive:V}),H(y),E&&!Fe(y,W)&&E(n,y,b)}be.current=0;const S=Ke(w.current);S.addEventListener("mousemove",ce,{passive:!0}),S.addEventListener("mouseup",q)},Ie=Ye(xe?T[0]:c,c,d),A=Ye(T[T.length-1],c,d)-Ie,Ce=(i={})=>{const n=st(i),g={onMouseDown:Ze(n||{})},S={...n,...g};return{...i,ref:ae,...S}},ze=i=>n=>{i.onMouseOver?.(n);const g=Number(n.currentTarget.getAttribute("data-index"));G(g)},Ee=i=>n=>{i.onMouseLeave?.(n),G(-1)},Me=(i={})=>{const n=st(i),g={onMouseOver:ze(n||{}),onMouseLeave:Ee(n||{})};return{...i,...n,...g}},Oe=i=>({pointerEvents:z!==-1&&z!==i?"none":void 0});let ye;return v==="vertical"&&(ye=l?"vertical-rl":"vertical-lr"),{active:z,axis:ie,axisProps:wr,dragging:J,focusedThumbIndex:te,getHiddenInputProps:(i={})=>{const n=st(i),g={onChange:Pe(n||{}),onFocus:Xe(n||{}),onBlur:Je(n||{}),onKeyDown:qe(n||{})},S={...n,...g};return{tabIndex:h,"aria-labelledby":r,"aria-orientation":v,"aria-valuemax":Y(d),"aria-valuemin":Y(c),name:m,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:s,...i,...S,style:{...xr,direction:l?"rtl":"ltr",width:"100%",height:"100%",writingMode:ye}}},getRootProps:Ce,getThumbProps:Me,marks:we,open:Te,range:xe,rootRef:ae,trackLeap:A,trackOffset:Ie,values:T,getThumbStyle:Oe}}const Br=e=>!e||!Ge(e);function $r(e){return vt("MuiSlider",e)}const K=yt("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),_r=e=>{const{open:r}=e;return{offset:je(r&&K.valueLabelOpen),circle:K.valueLabelCircle,label:K.valueLabelLabel}};function Tr(e){const{children:r,className:o,value:s}=e,a=_r(e);return r?p.cloneElement(r,{className:r.props.className},t.jsxs(p.Fragment,{children:[r.props.children,t.jsx("span",{className:je(a.offset,o),"aria-hidden":!0,children:t.jsx("span",{className:a.circle,children:t.jsx("span",{className:a.label,children:s})})})]})):null}function ft(e){return e}const Rr=oe("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:o}=e;return[r.root,r[`color${_(o.color)}`],o.size!=="medium"&&r[`size${_(o.size)}`],o.marked&&r.marked,o.orientation==="vertical"&&r.vertical,o.track==="inverted"&&r.trackInverted,o.track===!1&&r.trackFalse]}})(ge(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${K.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${K.dragging}`]:{[`& .${K.thumb}, & .${K.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter($e()).map(([r])=>({props:{color:r},style:{color:(e.vars||e).palette[r].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),Pr=oe("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Ir=oe("span",{name:"MuiSlider",slot:"Track"})(ge(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter($e()).map(([r])=>({props:{color:r,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${r}Track`],borderColor:e.vars.palette.Slider[`${r}Track`]}:{backgroundColor:e.lighten(e.palette[r].main,.62),borderColor:e.lighten(e.palette[r].main,.62),...e.applyStyles("dark",{backgroundColor:e.darken(e.palette[r].main,.5)}),...e.applyStyles("dark",{borderColor:e.darken(e.palette[r].main,.5)})}}}))]}))),zr=oe("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,r)=>{const{ownerState:o}=e;return[r.thumb,r[`thumbColor${_(o.color)}`],o.size!=="medium"&&r[`thumbSize${_(o.size)}`]]}})(ge(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${K.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter($e()).map(([r])=>({props:{color:r},style:{[`&:hover, &.${K.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[r].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${K.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[r].main,.16)}`}}}))]}))),Er=oe(Tr,{name:"MuiSlider",slot:"ValueLabel"})(ge(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${K.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${K.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),Mr=oe("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>kt(e)&&e!=="markActive",overridesResolver:(e,r)=>{const{markActive:o}=e;return[r.mark,o&&r.markActive]}})(ge(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),Or=oe("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>kt(e)&&e!=="markLabelActive"})(ge(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),Dr=e=>{const{disabled:r,dragging:o,marked:s,orientation:a,track:l,classes:f,color:d,size:c}=e,m={root:["root",r&&"disabled",o&&"dragging",s&&"marked",a==="vertical"&&"vertical",l==="inverted"&&"trackInverted",l===!1&&"trackFalse",d&&`color${_(d)}`,c&&`size${_(c)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",r&&"disabled",c&&`thumbSize${_(c)}`,d&&`thumbColor${_(d)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return jt(m,$r,f)},Ar=({children:e})=>e,Nr=p.forwardRef(function(r,o){const s=St({props:r,name:"MuiSlider"}),a=Ht(),{"aria-label":l,"aria-valuetext":f,"aria-labelledby":d,component:c="span",components:m={},componentsProps:x={},color:j="primary",classes:v,className:O,disableSwap:Y=!1,disabled:I=!1,getAriaLabel:X,getAriaValueText:h,marks:k=!1,max:C=100,min:z=0,name:V,onChange:Te,onChangeCommitted:G,orientation:J="horizontal",shiftStep:se=10,size:be="medium",step:ke=1,scale:W=ft,slotProps:H,slots:E,tabIndex:xe,track:T="normal",value:we,valueLabelDisplay:$="off",valueLabelFormat:te=ft,...ve}=s,w={...s,isRtl:a,max:C,min:z,classes:v,disabled:I,disableSwap:Y,orientation:J,marks:k,color:j,size:be,step:ke,shiftStep:se,scale:W,track:T,valueLabelDisplay:$,valueLabelFormat:te},{axisProps:ae,getRootProps:Xe,getHiddenInputProps:Je,getThumbProps:Re,open:qe,active:Pe,axis:ne,focusedThumbIndex:ie,range:le,dragging:ce,marks:q,values:D,trackOffset:de,trackLeap:Ze,getThumbStyle:Ie}=Lr({...w,rootRef:o});w.marked=q.length>0&&q.some(R=>R.label),w.dragging=ce,w.focusedThumbIndex=ie;const A=Dr(w),Ce=E?.root??m.Root??Rr,ze=E?.rail??m.Rail??Pr,Ee=E?.track??m.Track??Ir,Me=E?.thumb??m.Thumb??zr,Oe=E?.valueLabel??m.ValueLabel??Er,ye=E?.mark??m.Mark??Mr,De=E?.markLabel??m.MarkLabel??Or,i=E?.input??m.Input??"input",n=H?.root??x.root,g=H?.rail??x.rail,S=H?.track??x.track,y=H?.thumb??x.thumb,b=H?.valueLabel??x.valueLabel,F=H?.mark??x.mark,U=H?.markLabel??x.markLabel,P=H?.input??x.input,Z=re({elementType:Ce,getSlotProps:Xe,externalSlotProps:n,externalForwardedProps:ve,additionalProps:{...Br(Ce)&&{as:c}},ownerState:{...w,...n?.ownerState},className:[A.root,O]}),Le=re({elementType:ze,externalSlotProps:g,ownerState:w,className:A.rail}),zt=re({elementType:Ee,externalSlotProps:S,additionalProps:{style:{...ae[ne].offset(de),...ae[ne].leap(Ze)}},ownerState:{...w,...S?.ownerState},className:A.track}),Qe=re({elementType:Me,getSlotProps:Re,externalSlotProps:y,ownerState:{...w,...y?.ownerState},className:A.thumb}),Et=re({elementType:Oe,externalSlotProps:b,ownerState:{...w,...b?.ownerState},className:A.valueLabel}),et=re({elementType:ye,externalSlotProps:F,ownerState:w,className:A.mark}),tt=re({elementType:De,externalSlotProps:U,ownerState:w,className:A.markLabel}),Mt=re({elementType:i,getSlotProps:Je,externalSlotProps:P,ownerState:w});return t.jsxs(Ce,{...Z,children:[t.jsx(ze,{...Le}),t.jsx(Ee,{...zt}),q.filter(R=>R.value>=z&&R.value<=C).map((R,M)=>{const rt=Ye(R.value,z,C),Ae=ae[ne].offset(rt);let Q;return T===!1?Q=D.includes(R.value):Q=T==="normal"&&(le?R.value>=D[0]&&R.value<=D[D.length-1]:R.value<=D[0])||T==="inverted"&&(le?R.value<=D[0]||R.value>=D[D.length-1]:R.value>=D[0]),t.jsxs(p.Fragment,{children:[t.jsx(ye,{"data-index":M,...et,...!Ge(ye)&&{markActive:Q},style:{...Ae,...et.style},className:je(et.className,Q&&A.markActive)}),R.label!=null?t.jsx(De,{"aria-hidden":!0,"data-index":M,...tt,...!Ge(De)&&{markLabelActive:Q},style:{...Ae,...tt.style},className:je(A.markLabel,tt.className,Q&&A.markLabelActive),children:R.label}):null]},M)}),D.map((R,M)=>{const rt=Ye(R,z,C),Ae=ae[ne].offset(rt),Q=$==="off"?Ar:Oe;return t.jsx(Q,{...!Ge(Q)&&{valueLabelFormat:te,valueLabelDisplay:$,value:typeof te=="function"?te(W(R),M):te,index:M,open:qe===M||Pe===M||$==="on",disabled:I},...Et,children:t.jsx(Me,{"data-index":M,...Qe,className:je(A.thumb,Qe.className,Pe===M&&A.active,ie===M&&A.focusVisible),style:{...Ae,...Ie(M),...Qe.style},children:t.jsx(i,{"data-index":M,"aria-label":X?X(M):l,"aria-valuenow":W(R),"aria-labelledby":d,"aria-valuetext":h?h(W(R),M):f,value:D[M],...Mt})})},M)})]})}),Vr=he(t.jsx("path",{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.996.996 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12z"})),Hr=he(t.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),Fr=he(t.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"})),bt=he(t.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"})),xt=he(t.jsx("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"})),Wr=he(t.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),Ur=he(t.jsx("path",{d:"m12 16.5 4-4h-3v-9h-2v9H8zm9-13h-6v1.99h6v14.03H3V5.49h6V3.5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-14c0-1.1-.9-2-2-2"})),Kr=({tableName:e,item:r,primaryKey:o})=>{const[s,a]=p.useState(!1),[l,f]=p.useState(JSON.stringify(r,null,2)),[d,c]=p.useState(null),m=async()=>{try{const j=JSON.parse(l);await _e.table(e).put(j),a(!1),c(null)}catch(j){c(j instanceof Error?j.message:"Invalid JSON")}},x=async()=>{confirm("Are you sure you want to delete this record?")&&await _e.table(e).delete(o)};return s?t.jsxs(L,{sx:{p:1},children:[t.jsx($t,{fullWidth:!0,multiline:!0,minRows:3,value:l,onChange:j=>f(j.target.value),variant:"outlined",size:"small",sx:{fontFamily:"monospace",mb:1}}),d&&t.jsx(me,{severity:"error",sx:{mb:1},children:d}),t.jsxs(sr,{direction:"row",spacing:1,justifyContent:"flex-end",children:[t.jsx(N,{startIcon:t.jsx(Hr,{}),onClick:()=>{a(!1),f(JSON.stringify(r,null,2)),c(null)},size:"small",children:"Cancel"}),t.jsx(N,{startIcon:t.jsx(Wr,{}),onClick:m,variant:"contained",size:"small",children:"Save"})]})]}):t.jsxs(L,{children:[t.jsxs(L,{sx:{display:"flex",justifyContent:"flex-end",mb:1},children:[t.jsx(lt,{size:"small",onClick:()=>a(!0),children:t.jsx(ar,{fontSize:"small"})}),t.jsx(lt,{size:"small",onClick:x,color:"error",children:t.jsx(Rt,{fontSize:"small"})})]}),t.jsx(L,{component:"pre",sx:{overflowX:"auto",fontSize:"0.75rem",m:0,p:1,bgcolor:"action.hover",borderRadius:1},children:JSON.stringify(r,null,2)})]})},Gr=({tableName:e})=>{const{t:r}=fe(["settings"]),o=Ft(()=>_e.table(e).toArray(),[e]),a=_e.table(e).schema.primKey.name;return o?o.length===0?t.jsx(B,{children:r("settings:developer.no_records")}):t.jsx(Wt,{children:o.map((l,f)=>{const d=l[a];return t.jsx(Ut,{disablePadding:!0,children:t.jsxs(Kt,{sx:{width:"100%"},children:[t.jsx(Gt,{expandIcon:t.jsx(Yt,{}),children:t.jsx(B,{noWrap:!0,children:String(l.id||l.name||l.key||`Record ${f}`)})}),t.jsx(Xt,{children:t.jsx(Kr,{tableName:e,item:l,primaryKey:d})})]})},d||f)})}):t.jsx(B,{children:r("settings:developer.loading")})},Yr=()=>{const{t:e}=fe(["settings"]),[r,o]=p.useState(""),s=_e.tables.map(l=>l.name),a=l=>{o(l.target.value)};return t.jsxs(L,{sx:{mt:2},children:[t.jsxs(wt,{fullWidth:!0,size:"small",sx:{mb:2},children:[t.jsx(Ct,{children:e("settings:developer.select_table")}),t.jsx(Lt,{value:r,label:e("settings:developer.select_table"),onChange:a,children:s.map(l=>t.jsx(Bt,{value:l,children:l},l))})]}),r&&t.jsx(Gr,{tableName:r})]})},Xr=()=>{const{t:e}=fe(["settings"]),{debugLogs:r,clearDebugLogs:o}=nt(),s=r.filter(l=>l.type==="packet").sort((l,f)=>new Date(f.timestamp).getTime()-new Date(l.timestamp).getTime()),a=l=>l===void 0?"UNKNOWN":Jt[l]||`OP_${l.toString(16).toUpperCase()}`;return t.jsxs(L,{sx:{mt:4},children:[t.jsxs(L,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t.jsx(B,{variant:"h6",children:e("settings:developer.packet_logger_title")}),t.jsx(N,{variant:"outlined",color:"error",startIcon:t.jsx(Rt,{}),onClick:o,size:"small",children:e("settings:developer.clear_logs")})]}),t.jsx(_t,{variant:"outlined",sx:{width:"100%",overflow:"hidden"},children:t.jsx(L,{sx:{maxHeight:400,overflowY:"auto"},children:t.jsxs(nr,{stickyHeader:!0,size:"small",children:[t.jsx(ir,{children:t.jsxs(at,{children:[t.jsx(ee,{children:"Time"}),t.jsx(ee,{children:"Dir"}),t.jsx(ee,{children:"Opcode"}),t.jsx(ee,{children:"Payload (Hex)"})]})}),t.jsx(lr,{children:s.length>0?s.map(l=>t.jsxs(at,{hover:!0,children:[t.jsx(ee,{sx:{whiteSpace:"nowrap",fontSize:"0.75rem"},children:new Date(l.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3})}),t.jsx(ee,{children:t.jsx(cr,{label:l.direction,color:l.direction==="TX"?"primary":"success",size:"small",sx:{fontSize:"0.7rem",height:20}})}),t.jsx(ee,{sx:{fontSize:"0.75rem",fontWeight:"bold"},children:a(l.opcode)}),t.jsx(ee,{sx:{fontFamily:"monospace",fontSize:"0.75rem",wordBreak:"break-all"},children:l.payload||"-"})]},l.id)):t.jsx(at,{children:t.jsx(ee,{colSpan:4,align:"center",children:t.jsx(B,{variant:"body2",color:"text.secondary",sx:{py:2},children:e("settings:developer.no_records")})})})})]})})})]})},Jr=e=>Zt[e]||`UNKNOWN_OPCODE_${e}`,It={},qr=(e,r)=>{It[e]=r},Zr=()=>{const{t:e}=fe(["settings"]),{sendPacket:r,isConnected:o}=nt(),[s,a]=p.useState(""),[l,f]=p.useState({}),[d,c]=p.useState(null),[m,x]=p.useState(null),j=p.useMemo(()=>Array.from(ct.getRegisteredTXPackets().entries()).sort((h,k)=>h[0]-k[0]),[]),v=p.useMemo(()=>s===""?null:ct.getRegisteredTXPackets().get(s),[s]),O=p.useMemo(()=>!v||!v.schema?null:v.schema instanceof qt?v.schema.shape:null,[v]);p.useEffect(()=>{if(!O){setTimeout(()=>f({}),0);return}const h={};Object.keys(O).forEach(k=>{h[k]=It[k]||""}),setTimeout(()=>f(h),0)},[O]);const Y=h=>{a(h.target.value),c(null),x(null)},I=(h,k)=>{f(C=>({...C,[h]:k})),qr(h,k),c(null),x(null)},X=async()=>{if(v){c(null),x(null);try{let h={};if(v.schema){const C=v.schema.safeParse(l);if(!C.success){const z=C.error.errors.map(V=>`${V.path.join(".")}: ${V.message}`).join(", ");c(z);return}h=C.data}const k=new v;Object.assign(k,h),await r(k),console.log("Packet sent successfully",k),x(e("settings:developer.packet_sent_success"))}catch(h){console.error("Failed to send packet",h);const k=h instanceof Error?h.message:String(h);c(k||e("settings:developer.packet_send_error"))}}};return t.jsxs(L,{sx:{display:"flex",flexDirection:"column",gap:3},children:[t.jsx(me,{severity:o?"success":"warning",children:e(o?"settings:developer.enabled_success":"settings:developer.not_connected_warning")}),t.jsxs(wt,{fullWidth:!0,children:[t.jsx(Ct,{children:e("settings:developer.packet_type_label")}),t.jsx(Lt,{value:s,label:e("settings:developer.packet_type_label"),onChange:Y,children:j.map(([h])=>t.jsxs(Bt,{value:h,children:[Jr(h)," (",h,")"]},h))})]}),v&&t.jsxs(_t,{variant:"outlined",sx:{p:2},children:[t.jsx(B,{variant:"h6",gutterBottom:!0,children:e("settings:developer.packet_parameters_title")}),t.jsxs(L,{sx:{display:"flex",flexDirection:"column",gap:2},children:[O?Object.keys(O).length>0?Object.keys(O).map(h=>{const k=O[h];let C=!1;const z=k._def.typeName;return(z==="ZodNumber"||z==="ZodEffects"&&k._def.schema?._def.typeName==="ZodNumber")&&(C=!0),t.jsx($t,{label:h,variant:"outlined",fullWidth:!0,type:C?"number":"text",value:l[h]||"",onChange:V=>I(h,V.target.value),helperText:C?"Number":"String"},h)}):t.jsx(B,{color:"text.secondary",children:e("settings:developer.no_parameters")}):t.jsx(B,{color:"text.secondary",children:e("settings:developer.no_schema")}),d&&t.jsx(me,{severity:"error",children:d}),m&&t.jsx(me,{severity:"success",children:m}),t.jsx(N,{variant:"contained",onClick:X,disabled:!o&&!window.BOKS_SIMULATOR_ENABLED,children:e("settings:developer.send_packet")})]})]}),t.jsx(Xr,{})]})},Qr=()=>{const{t:e}=fe(["settings"]),[r,o]=p.useState([]),[s,a]=p.useState(null),l=async()=>{if("serviceWorker"in navigator){const m=await navigator.serviceWorker.getRegistrations();o([...m])}};p.useEffect(()=>{l()},[]);const f=async m=>{try{await m.update(),a(e("settings:developer.sw_update_requested")),l()}catch(x){a(e("settings:developer.sw_update_failed",{error:String(x)}))}},d=async m=>{try{const x=await m.unregister();a(e(x?"settings:developer.sw_unregister_success":"settings:developer.sw_unregister_failed")),l()}catch(x){a(e("settings:developer.sw_unregister_error",{error:String(x)}))}},c=()=>{window.location.reload()};return"serviceWorker"in navigator?t.jsx(ue,{sx:{mt:2},children:t.jsxs(pe,{children:[t.jsx(B,{variant:"h6",gutterBottom:!0,children:e("settings:developer.sw_title")}),t.jsx(Tt,{sx:{mb:2}}),s&&t.jsx(me,{severity:"info",sx:{mb:2},onClose:()=>a(null),children:s}),r.length===0?t.jsx(B,{variant:"body2",color:"text.secondary",children:e("settings:developer.sw_no_active")}):r.map((m,x)=>t.jsxs(L,{sx:{mb:2,p:1,border:"1px solid #ddd",borderRadius:1},children:[t.jsx(B,{variant:"subtitle2",children:e("settings:developer.sw_scope",{scope:m.scope})}),t.jsx(B,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:e("settings:developer.sw_status",{status:m.installing?e("settings:developer.sw_installing"):m.waiting?e("settings:developer.sw_waiting"):m.active?e("settings:developer.sw_active"):e("settings:developer.sw_unknown")})}),t.jsxs(L,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1},children:[t.jsx(N,{size:"small",variant:"outlined",startIcon:t.jsx(Ur,{}),onClick:()=>f(m),children:e("settings:developer.sw_check_update")}),t.jsx(N,{size:"small",variant:"outlined",color:"error",startIcon:t.jsx(Fr,{}),onClick:()=>d(m),children:e("settings:developer.sw_unregister")})]})]},x)),t.jsx(L,{sx:{mt:2},children:t.jsx(N,{fullWidth:!0,variant:"contained",color:"primary",startIcon:t.jsx(Qt,{}),onClick:c,children:e("settings:developer.sw_reload")})})]})}):t.jsx(me,{severity:"warning",children:e("settings:developer.sw_not_supported")})},eo=()=>{const{t:e}=fe(["settings"]),{toggleSimulator:r}=nt(),[o,s]=p.useState(()=>window.boksSimulator||null),[a,l]=p.useState(null),[f,d]=p.useState(()=>localStorage.getItem("BOKS_SIMULATOR_ENABLED")==="true"),[c,m]=p.useState(()=>!!window.boksSimulator);p.useEffect(()=>{const j=window.boksSimulator;if(j){const v=setInterval(()=>{l(j.getPublicState())},500);return()=>clearInterval(v)}},[]);const x=(j,v)=>{d(v),r?(r(v),v?setTimeout(()=>{const O=window.boksSimulator;O&&(s(O),m(!0))},500):(m(!1),s(null))):(v?localStorage.setItem("BOKS_SIMULATOR_ENABLED","true"):localStorage.removeItem("BOKS_SIMULATOR_ENABLED"),window.location.reload())};return t.jsxs(L,{sx:{p:2,display:"flex",flexDirection:"column",gap:2},children:[t.jsx(B,{variant:"h6",gutterBottom:!0,children:e("settings:developer.simulator.title")}),t.jsx(ue,{variant:"outlined",sx:{mb:1},children:t.jsx(pe,{sx:{py:1,"&:last-child":{pb:1}},children:t.jsx(ut,{control:t.jsx(pt,{checked:f,onChange:x}),label:e("settings:developer.simulator.enable_simulator")})})}),!c&&t.jsx(me,{severity:"warning",children:e("settings:developer.simulator.not_active")}),c&&a&&t.jsxs(t.Fragment,{children:[t.jsx(ue,{variant:"outlined",children:t.jsxs(pe,{children:[t.jsxs(L,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t.jsxs(B,{variant:"subtitle1",sx:{display:"flex",alignItems:"center",gap:1},children:[a.isOpen?t.jsx(xt,{color:"warning"}):t.jsx(bt,{color:"success"}),e("settings:developer.simulator.status",{status:a.isOpen?e("settings:developer.simulator.open"):e("settings:developer.simulator.closed")})]}),t.jsx(ut,{control:t.jsx(pt,{checked:a.chaosMode,onChange:(j,v)=>o?.setChaosMode(v),color:"secondary"}),label:t.jsxs(L,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t.jsx(Vr,{fontSize:"small"})," ",e("settings:developer.simulator.chaos_mode")]})})]}),t.jsx(Tt,{sx:{my:1}}),t.jsx(B,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{mt:1},children:e("settings:developer.simulator.manual_triggers")}),t.jsxs(br,{fullWidth:!0,variant:"contained",size:"small",children:[t.jsx(N,{onClick:()=>o?.triggerDoorOpen("ble"),disabled:a.isOpen,startIcon:t.jsx(xt,{}),children:e("settings:developer.simulator.ble_open")}),t.jsx(N,{onClick:()=>o?.triggerDoorOpen("nfc"),disabled:a.isOpen,color:"info",children:e("settings:developer.simulator.nfc_open")}),t.jsx(N,{onClick:()=>o?.triggerDoorOpen("button"),disabled:a.isOpen,color:"warning",children:e("settings:developer.simulator.button_open")})]}),t.jsx(N,{fullWidth:!0,variant:"outlined",size:"small",sx:{mt:1},onClick:()=>o?.triggerDoorClose(),disabled:!a.isOpen,startIcon:t.jsx(bt,{}),children:e("settings:developer.simulator.force_close")})]})}),t.jsx(ue,{variant:"outlined",children:t.jsxs(pe,{children:[t.jsxs(B,{variant:"subtitle2",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[t.jsx(er,{})," ",e("settings:developer.simulator.battery_level",{level:a.batteryLevel})]}),t.jsx(Nr,{value:a.batteryLevel,onChange:(j,v)=>o?.setBatteryLevel(v),valueLabelDisplay:"auto",min:0,max:100,size:"small"})]})}),t.jsx(ue,{variant:"outlined",children:t.jsxs(pe,{children:[t.jsxs(L,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs(B,{variant:"subtitle2",sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(tr,{})," ",e("settings:developer.simulator.logs_count",{count:a.logs.length})]}),t.jsx(N,{size:"small",variant:"text",color:"error",onClick:()=>o?.reset(),children:e("settings:developer.simulator.reset")})]}),t.jsx(L,{sx:{mt:1,maxHeight:150,overflow:"auto",fontSize:"0.75rem",fontFamily:"monospace",bgcolor:"rgba(0,0,0,0.03)",p:1,borderRadius:1},children:a.logs.length===0?e("settings:developer.simulator.no_logs"):[...a.logs].reverse().map((j,v)=>t.jsxs("div",{children:["[",new Date(j.timestamp).toLocaleTimeString(),"] Op: 0x",j.opcode.toString(16).toUpperCase()]},v))})]})})]})]})};function Ue(e){const{children:r,value:o,index:s,...a}=e;return t.jsx("div",{role:"tabpanel",hidden:o!==s,id:`simple-tabpanel-${s}`,"aria-labelledby":`simple-tab-${s}`,...a,children:o===s&&t.jsx(L,{sx:{p:2},children:r})})}const co=()=>{const{t:e}=fe(["settings"]),r=rr(),{isDeveloperMode:o,disableDeveloperMode:s}=or(),[a,l]=p.useState(0);p.useEffect(()=>{o||r("/")},[o,r]);const f=()=>{s(),r("/")},d=async()=>{try{confirm(e("settings:developer.mock_data_confirm"))&&(await dt.mockData(),alert(e("settings:developer.mock_data_success")))}catch(m){console.error(m),alert(e("settings:developer.mock_data_failed"))}},c=(m,x)=>{l(x)};return t.jsxs(ur,{maxWidth:"md",sx:{py:2},children:[t.jsxs(L,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(B,{variant:"h4",children:e("settings:developer.page_title")}),t.jsx(N,{variant:"outlined",color:"error",onClick:f,children:e("settings:developer.disable_mode")})]}),t.jsx(L,{sx:{borderBottom:1,borderColor:"divider"},children:t.jsxs(dr,{value:a,onChange:c,"aria-label":"developer tabs",children:[t.jsx(Ne,{label:e("settings:developer.tabs.general")}),t.jsx(Ne,{label:e("settings:developer.tabs.database")}),t.jsx(Ne,{label:e("settings:developer.tabs.bluetooth")}),t.jsx(Ne,{label:e("settings:developer.tabs.simulator")})]})}),t.jsx(Ue,{value:a,index:0,children:t.jsx(Qr,{})}),t.jsx(Ue,{value:a,index:1,children:t.jsx(ue,{children:t.jsxs(pe,{children:[t.jsxs(L,{sx:{mb:4},children:[t.jsxs(L,{sx:{display:"flex",gap:2},children:[t.jsx(N,{variant:"contained",onClick:d,children:e("settings:developer.load_mock_data")}),t.jsx(N,{variant:"outlined",color:"error",onClick:()=>{confirm(e("settings:developer.clear_db_confirm"))&&dt.clearAllData()},children:e("settings:developer.clear_db")})]}),t.jsx(B,{variant:"caption",display:"block",color:"text.secondary",sx:{mt:1},children:e("settings:developer.mock_data_helper")})]}),t.jsx(B,{variant:"h6",gutterBottom:!0,children:e("settings:developer.db_editor")}),t.jsx(B,{variant:"body2",color:"text.secondary",paragraph:!0,children:e("settings:developer.db_editor_helper")}),t.jsx(Yr,{})]})})}),t.jsx(Ue,{value:a,index:2,children:t.jsx(ue,{children:t.jsxs(pe,{children:[t.jsx(B,{variant:"h6",gutterBottom:!0,children:"Bluetooth Debugger"}),t.jsx(Zr,{})]})})}),t.jsx(Ue,{value:a,index:3,children:t.jsx(eo,{})})]})};export{co as DeveloperPage};
