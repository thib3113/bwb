import{r as g,g as pt,a as gt,u as mt,j as t,aH as Ut,aI as Kt,c as ge,ac as P,b as ht,s as se,m as he,aJ as Ie,T as C,aK as Gt,aL as Xt,aM as _e,aN as Yt,aO as qt,aP as it,aQ as Xe,aR as ct,aS as vt,aT as Ye,aU as Jt,aV as ae,ad as Pt,e as xe,f as be,V as Pe,k as L,aW as $t,aX as Et,aY as Mt,aZ as Je,S as Zt,a4 as Dt,a5 as qe,a_ as Qt,a$ as er,ap as tr,b0 as rr,K as Ze,a2 as me,l as $,M as ft,N as xt,b1 as sr,P as zt,a7 as or,a8 as ar,a9 as nr,aa as lr,b2 as yt,aC as ir,b3 as jt,b4 as cr,X as dr,z as Q,A as ee,D as Ot,am as ur,b5 as pr,b6 as gr,H as mr,q as hr,b7 as xr,b8 as br,b9 as Fe,ba as St,bb as Te,a6 as dt,bc as wt}from"./index-Dcwu6psS.js";import{S as vr}from"./Stack-C2CwDCf8.js";import{E as fr}from"./Edit-HJvMIo8A.js";import{D as At}from"./Delete-8OmFtKNb.js";import{T as yr,a as jr,b as ut,c as re,d as Sr}from"./TableRow-Bsln5VoD.js";import{C as bt}from"./Chip-Bdkebk0L.js";import{L as kt}from"./Lock-CiPbHPuT.js";import{F as Ct,S as Lt,T as wr,a as Re}from"./Tabs-DmnpsJ5F.js";import{C as kr}from"./Container-BA86XksB.js";function Cr(e){return g.Children.toArray(e).filter(r=>g.isValidElement(r))}function Lr(e){return pt("MuiButtonGroup",e)}const m=gt("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),_r=(e,r)=>{const{ownerState:s}=e;return[{[`& .${m.grouped}`]:r.grouped},{[`& .${m.grouped}`]:r[`grouped${P(s.orientation)}`]},{[`& .${m.grouped}`]:r[`grouped${P(s.variant)}`]},{[`& .${m.grouped}`]:r[`grouped${P(s.variant)}${P(s.orientation)}`]},{[`& .${m.grouped}`]:r[`grouped${P(s.variant)}${P(s.color)}`]},{[`& .${m.firstButton}`]:r.firstButton},{[`& .${m.lastButton}`]:r.lastButton},{[`& .${m.middleButton}`]:r.middleButton},r.root,r[s.variant],s.disableElevation===!0&&r.disableElevation,s.fullWidth&&r.fullWidth,s.orientation==="vertical"&&r.vertical]},Tr=e=>{const{classes:r,color:s,disabled:o,disableElevation:i,fullWidth:a,orientation:h,variant:d}=e,p={root:["root",d,h,a&&"fullWidth",i&&"disableElevation",`color${P(s)}`],grouped:["grouped",`grouped${P(h)}`,`grouped${P(d)}`,`grouped${P(d)}${P(h)}`,`grouped${P(d)}${P(s)}`,o&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return ht(p,Lr,r)},Rr=se("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:_r})(he(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(e.vars||e).shadows[2],[`& .${m.grouped}`]:{boxShadow:"none","&:hover":{boxShadow:"none"}}}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${m.lastButton},& .${m.middleButton}`]:{borderTopRightRadius:0,borderTopLeftRadius:0},[`& .${m.firstButton},& .${m.middleButton}`]:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},{props:{orientation:"horizontal"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${m.lastButton},& .${m.middleButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},{props:{variant:"text",orientation:"horizontal"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderRight:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${m.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"text",orientation:"vertical"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderBottom:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${m.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(Ie()).flatMap(([r])=>[{props:{variant:"text",color:r},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderColor:e.alpha((e.vars||e).palette[r].main,.5)}}}]),{props:{variant:"outlined",orientation:"horizontal"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}},[`& .${m.lastButton},& .${m.middleButton}`]:{marginLeft:-1}}},{props:{variant:"outlined",orientation:"vertical"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}},[`& .${m.lastButton},& .${m.middleButton}`]:{marginTop:-1}}},{props:{variant:"contained",orientation:"horizontal"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderRight:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${m.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"contained",orientation:"vertical"},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderBottom:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${m.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(Ie(["dark"])).map(([r])=>({props:{variant:"contained",color:r},style:{[`& .${m.firstButton},& .${m.middleButton}`]:{borderColor:(e.vars||e).palette[r].dark}}}))],[`& .${m.grouped}`]:{minWidth:40}}))),Br=g.forwardRef(function(r,s){const o=mt({props:r,name:"MuiButtonGroup"}),{children:i,className:a,color:h="primary",component:d="div",disabled:p=!1,disableElevation:c=!1,disableFocusRipple:x=!1,disableRipple:_=!1,fullWidth:S=!1,orientation:z="horizontal",size:T="medium",variant:w="outlined",...y}=o,u={...o,color:h,component:d,disabled:p,disableElevation:c,disableFocusRipple:x,disableRipple:_,fullWidth:S,orientation:z,size:T,variant:w},v=Tr(u),B=g.useMemo(()=>({className:v.grouped,color:h,disabled:p,disableElevation:c,disableFocusRipple:x,disableRipple:_,fullWidth:S,size:T,variant:w}),[h,p,c,x,_,S,T,w,v.grouped]),O=Cr(i),F=O.length,$e=Y=>{const q=Y===0,ne=Y===F-1;return q&&ne?"":q?v.firstButton:ne?v.lastButton:v.middleButton};return t.jsx(Rr,{as:d,role:"group",className:ge(v.root,a),ref:s,ownerState:u,...y,children:t.jsx(Ut.Provider,{value:B,children:O.map((Y,q)=>t.jsx(Kt.Provider,{value:$e(q),children:Y},q))})})});function Ir(e){return pt("MuiDialogContentText",e)}gt("MuiDialogContentText",["root"]);const Pr=e=>{const{classes:r}=e,o=ht({root:["root"]},Ir,r);return{...r,...o}},$r=se(C,{shouldForwardProp:e=>Gt(e)||e==="classes",name:"MuiDialogContentText",slot:"Root"})({}),Er=g.forwardRef(function(r,s){const o=mt({props:r,name:"MuiDialogContentText"}),{children:i,className:a,...h}=o,d=Pr(h);return t.jsx($r,{component:"p",variant:"body1",color:"textSecondary",ref:s,ownerState:h,className:ge(d.root,a),...o,classes:d})}),Mr={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Dr(e,r,s=(o,i)=>o===i){return e.length===r.length&&e.every((o,i)=>s(o,r[i]))}const zr=2;function Se(e,r,s,o,i){return s===1?Math.min(e+r,i):Math.max(e-r,o)}function Nt(e,r){return e-r}function _t(e,r){const{index:s}=e.reduce((o,i,a)=>{const h=Math.abs(r-i);return o===null||h<o.distance||h===o.distance?{distance:h,index:a}:o},null)??{};return s}function We(e,r){if(r.current!==void 0&&e.changedTouches){const s=e;for(let o=0;o<s.changedTouches.length;o+=1){const i=s.changedTouches[o];if(i.identifier===r.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Qe(e,r,s){return(e-r)*100/(s-r)}function Or(e,r,s){return(s-r)*e+r}function Ar(e){if(Math.abs(e)<1){const s=e.toExponential().split("e-"),o=s[0].split(".")[1];return(o?o.length:0)+parseInt(s[1],10)}const r=e.toString().split(".")[1];return r?r.length:0}function Nr(e,r,s){const o=Math.round((e-s)/r)*r+s;return Number(o.toFixed(Ar(r)))}function Tt({values:e,newValue:r,index:s}){const o=e.slice();return o[s]=r,o.sort(Nt)}function Ue({sliderRef:e,activeIndex:r,setActive:s}){const o=Xe(e.current);(!e.current?.contains(o.activeElement)||Number(o?.activeElement?.getAttribute("data-index"))!==r)&&e.current?.querySelector(`[type="range"][data-index="${r}"]`).focus(),s&&s(r)}function Ke(e,r){return typeof e=="number"&&typeof r=="number"?e===r:typeof e=="object"&&typeof r=="object"?Dr(e,r):!1}const Hr={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},Vr=e=>e;let Ge;function Rt(){return Ge===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Ge=CSS.supports("touch-action","none"):Ge=!0),Ge}function Fr(e){const{"aria-labelledby":r,defaultValue:s,disabled:o=!1,disableSwap:i=!1,isRtl:a=!1,marks:h=!1,max:d=100,min:p=0,name:c,onChange:x,onChangeCommitted:_,orientation:S="horizontal",rootRef:z,scale:T=Vr,step:w=1,shiftStep:y=10,tabIndex:u,value:v}=e,B=g.useRef(void 0),[O,F]=g.useState(-1),[$e,Y]=g.useState(-1),[q,ne]=g.useState(!1),ve=g.useRef(0),we=g.useRef(null),[K,W]=Xt({controlled:v,default:s??p,name:"Slider"}),A=x&&((l,n,b)=>{const k=l.nativeEvent||l,j=new k.constructor(k.type,k);Object.defineProperty(j,"target",{writable:!0,value:{value:n,name:c}}),we.current=n,x(j,n,b)}),fe=Array.isArray(K);let E=fe?K.slice().sort(Nt):[K];E=E.map(l=>l==null?p:_e(l,p,d));const ke=h===!0&&w!==null?[...Array(Math.floor((d-p)/w)+1)].map((l,n)=>({value:p+w*n})):h||[],I=ke.map(l=>l.value),[oe,ye]=g.useState(-1),R=g.useRef(null),le=Yt(z,R),et=l=>n=>{const b=Number(n.currentTarget.getAttribute("data-index"));vt(n.target)&&ye(b),Y(b),l?.onFocus?.(n)},tt=l=>n=>{vt(n.target)||ye(-1),Y(-1),l?.onBlur?.(n)},Ee=(l,n)=>{const b=Number(l.currentTarget.getAttribute("data-index")),k=E[b],j=I.indexOf(k);let f=n;if(ke&&w==null){const U=I[I.length-1];f>=U?f=U:f<=I[0]?f=I[0]:f=f<k?I[j-1]:I[j+1]}if(f=_e(f,p,d),fe){i&&(f=_e(f,E[b-1]||-1/0,E[b+1]||1/0));const U=f;f=Tt({values:E,newValue:f,index:b});let G=b;i||(G=f.indexOf(U)),Ue({sliderRef:R,activeIndex:G})}W(f),ye(b),A&&!Ke(f,K)&&A(l,f,b),_&&_(l,we.current??f)},rt=l=>n=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(n.key)){n.preventDefault();const b=Number(n.currentTarget.getAttribute("data-index")),k=E[b];let j=null;if(w!=null){const f=n.shiftKey?y:w;switch(n.key){case"ArrowUp":j=Se(k,f,1,p,d);break;case"ArrowRight":j=Se(k,f,a?-1:1,p,d);break;case"ArrowDown":j=Se(k,f,-1,p,d);break;case"ArrowLeft":j=Se(k,f,a?1:-1,p,d);break;case"PageUp":j=Se(k,y,1,p,d);break;case"PageDown":j=Se(k,y,-1,p,d);break;case"Home":j=p;break;case"End":j=d;break}}else if(ke){const f=I[I.length-1],U=I.indexOf(k),G=[a?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],D=[a?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];G.includes(n.key)?U===0?j=I[0]:j=I[U-1]:D.includes(n.key)&&(U===I.length-1?j=f:j=I[U+1])}j!=null&&Ee(n,j)}l?.onKeyDown?.(n)};qt(()=>{o&&R.current.contains(document.activeElement)&&document.activeElement?.blur()},[o]),o&&O!==-1&&F(-1),o&&oe!==-1&&ye(-1);const Me=l=>n=>{l.onChange?.(n),Ee(n,n.target.valueAsNumber)},ie=g.useRef(void 0);let ce=S;a&&S==="horizontal"&&(ce+="-reverse");const de=({finger:l,move:n=!1})=>{const{current:b}=R,{width:k,height:j,bottom:f,left:U}=b.getBoundingClientRect();let G;ce.startsWith("vertical")?G=(f-l.y)/j:G=(l.x-U)/k,ce.includes("-reverse")&&(G=1-G);let D;if(D=Or(G,p,d),w)D=Nr(D,w,p);else{const Le=_t(I,D);D=I[Le]}D=_e(D,p,d);let Z=0;if(fe){n?Z=ie.current:Z=_t(E,D),i&&(D=_e(D,E[Z-1]||-1/0,E[Z+1]||1/0));const Le=D;D=Tt({values:E,newValue:D,index:Z}),i&&n||(Z=D.indexOf(Le),ie.current=Z)}return{newValue:D,activeIndex:Z}},ue=it(l=>{const n=We(l,B);if(!n)return;if(ve.current+=1,l.type==="mousemove"&&l.buttons===0){J(l);return}const{newValue:b,activeIndex:k}=de({finger:n,move:!0});Ue({sliderRef:R,activeIndex:k,setActive:F}),W(b),!q&&ve.current>zr&&ne(!0),A&&!Ke(b,K)&&A(l,b,k)}),J=it(l=>{const n=We(l,B);if(ne(!1),!n)return;const{newValue:b}=de({finger:n,move:!0});F(-1),l.type==="touchend"&&Y(-1),_&&_(l,we.current??b),B.current=void 0,pe()}),H=it(l=>{if(o)return;Rt()||l.preventDefault();const n=l.changedTouches[0];n!=null&&(B.current=n.identifier);const b=We(l,B);if(b!==!1){const{newValue:j,activeIndex:f}=de({finger:b});Ue({sliderRef:R,activeIndex:f,setActive:F}),W(j),A&&!Ke(j,K)&&A(l,j,f)}ve.current=0;const k=Xe(R.current);k.addEventListener("touchmove",ue,{passive:!0}),k.addEventListener("touchend",J,{passive:!0})}),pe=g.useCallback(()=>{const l=Xe(R.current);l.removeEventListener("mousemove",ue),l.removeEventListener("mouseup",J),l.removeEventListener("touchmove",ue),l.removeEventListener("touchend",J)},[J,ue]);g.useEffect(()=>{const{current:l}=R;return l.addEventListener("touchstart",H,{passive:Rt()}),()=>{l.removeEventListener("touchstart",H),pe()}},[pe,H]),g.useEffect(()=>{o&&pe()},[o,pe]);const st=l=>n=>{if(l.onMouseDown?.(n),o||n.defaultPrevented||n.button!==0)return;n.preventDefault();const b=We(n,B);if(b!==!1){const{newValue:j,activeIndex:f}=de({finger:b});Ue({sliderRef:R,activeIndex:f,setActive:F}),W(j),A&&!Ke(j,K)&&A(n,j,f)}ve.current=0;const k=Xe(R.current);k.addEventListener("mousemove",ue,{passive:!0}),k.addEventListener("mouseup",J)},De=Qe(fe?E[0]:p,p,d),V=Qe(E[E.length-1],p,d)-De,Ce=(l={})=>{const n=ct(l),b={onMouseDown:st(n||{})},k={...n,...b};return{...l,ref:le,...k}},ze=l=>n=>{l.onMouseOver?.(n);const b=Number(n.currentTarget.getAttribute("data-index"));Y(b)},Oe=l=>n=>{l.onMouseLeave?.(n),Y(-1)},Ae=(l={})=>{const n=ct(l),b={onMouseOver:ze(n||{}),onMouseLeave:Oe(n||{})};return{...l,...n,...b}},Ne=l=>({pointerEvents:O!==-1&&O!==l?"none":void 0});let je;return S==="vertical"&&(je=a?"vertical-rl":"vertical-lr"),{active:O,axis:ce,axisProps:Hr,dragging:q,focusedThumbIndex:oe,getHiddenInputProps:(l={})=>{const n=ct(l),b={onChange:Me(n||{}),onFocus:et(n||{}),onBlur:tt(n||{}),onKeyDown:rt(n||{})},k={...n,...b};return{tabIndex:u,"aria-labelledby":r,"aria-orientation":S,"aria-valuemax":T(d),"aria-valuemin":T(p),name:c,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:o,...l,...k,style:{...Mr,direction:a?"rtl":"ltr",width:"100%",height:"100%",writingMode:je}}},getRootProps:Ce,getThumbProps:Ae,marks:ke,open:$e,range:fe,rootRef:le,trackLeap:V,trackOffset:De,values:E,getThumbStyle:Ne}}const Wr=e=>!e||!Ye(e);function Ur(e){return pt("MuiSlider",e)}const X=gt("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Kr=e=>{const{open:r}=e;return{offset:ge(r&&X.valueLabelOpen),circle:X.valueLabelCircle,label:X.valueLabelLabel}};function Gr(e){const{children:r,className:s,value:o}=e,i=Kr(e);return r?g.cloneElement(r,{className:r.props.className},t.jsxs(g.Fragment,{children:[r.props.children,t.jsx("span",{className:ge(i.offset,s),"aria-hidden":!0,children:t.jsx("span",{className:i.circle,children:t.jsx("span",{className:i.label,children:o})})})]})):null}function Bt(e){return e}const Xr=se("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:s}=e;return[r.root,r[`color${P(s.color)}`],s.size!=="medium"&&r[`size${P(s.size)}`],s.marked&&r.marked,s.orientation==="vertical"&&r.vertical,s.track==="inverted"&&r.trackInverted,s.track===!1&&r.trackFalse]}})(he(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${X.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${X.dragging}`]:{[`& .${X.thumb}, & .${X.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(Ie()).map(([r])=>({props:{color:r},style:{color:(e.vars||e).palette[r].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),Yr=se("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),qr=se("span",{name:"MuiSlider",slot:"Track"})(he(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(Ie()).map(([r])=>({props:{color:r,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${r}Track`],borderColor:e.vars.palette.Slider[`${r}Track`]}:{backgroundColor:e.lighten(e.palette[r].main,.62),borderColor:e.lighten(e.palette[r].main,.62),...e.applyStyles("dark",{backgroundColor:e.darken(e.palette[r].main,.5)}),...e.applyStyles("dark",{borderColor:e.darken(e.palette[r].main,.5)})}}}))]}))),Jr=se("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,r)=>{const{ownerState:s}=e;return[r.thumb,r[`thumbColor${P(s.color)}`],s.size!=="medium"&&r[`thumbSize${P(s.size)}`]]}})(he(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${X.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(Ie()).map(([r])=>({props:{color:r},style:{[`&:hover, &.${X.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[r].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${X.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[r].main,.16)}`}}}))]}))),Zr=se(Gr,{name:"MuiSlider",slot:"ValueLabel"})(he(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${X.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${X.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),Qr=se("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>Pt(e)&&e!=="markActive",overridesResolver:(e,r)=>{const{markActive:s}=e;return[r.mark,s&&r.markActive]}})(he(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),es=se("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>Pt(e)&&e!=="markLabelActive"})(he(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),ts=e=>{const{disabled:r,dragging:s,marked:o,orientation:i,track:a,classes:h,color:d,size:p}=e,c={root:["root",r&&"disabled",s&&"dragging",o&&"marked",i==="vertical"&&"vertical",a==="inverted"&&"trackInverted",a===!1&&"trackFalse",d&&`color${P(d)}`,p&&`size${P(p)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",r&&"disabled",p&&`thumbSize${P(p)}`,d&&`thumbColor${P(d)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return ht(c,Ur,h)},rs=({children:e})=>e,ss=g.forwardRef(function(r,s){const o=mt({props:r,name:"MuiSlider"}),i=Jt(),{"aria-label":a,"aria-valuetext":h,"aria-labelledby":d,component:p="span",components:c={},componentsProps:x={},color:_="primary",classes:S,className:z,disableSwap:T=!1,disabled:w=!1,getAriaLabel:y,getAriaValueText:u,marks:v=!1,max:B=100,min:O=0,name:F,onChange:$e,onChangeCommitted:Y,orientation:q="horizontal",shiftStep:ne=10,size:ve="medium",step:we=1,scale:K=Bt,slotProps:W,slots:A,tabIndex:fe,track:E="normal",value:ke,valueLabelDisplay:I="off",valueLabelFormat:oe=Bt,...ye}=o,R={...o,isRtl:i,max:B,min:O,classes:S,disabled:w,disableSwap:T,orientation:q,marks:v,color:_,size:ve,step:we,shiftStep:ne,scale:K,track:E,valueLabelDisplay:I,valueLabelFormat:oe},{axisProps:le,getRootProps:et,getHiddenInputProps:tt,getThumbProps:Ee,open:rt,active:Me,axis:ie,focusedThumbIndex:ce,range:de,dragging:ue,marks:J,values:H,trackOffset:pe,trackLeap:st,getThumbStyle:De}=Fr({...R,rootRef:s});R.marked=J.length>0&&J.some(M=>M.label),R.dragging=ue,R.focusedThumbIndex=ce;const V=ts(R),Ce=A?.root??c.Root??Xr,ze=A?.rail??c.Rail??Yr,Oe=A?.track??c.Track??qr,Ae=A?.thumb??c.Thumb??Jr,Ne=A?.valueLabel??c.ValueLabel??Zr,je=A?.mark??c.Mark??Qr,He=A?.markLabel??c.MarkLabel??es,l=A?.input??c.Input??"input",n=W?.root??x.root,b=W?.rail??x.rail,k=W?.track??x.track,j=W?.thumb??x.thumb,f=W?.valueLabel??x.valueLabel,U=W?.mark??x.mark,G=W?.markLabel??x.markLabel,D=W?.input??x.input,Z=ae({elementType:Ce,getSlotProps:et,externalSlotProps:n,externalForwardedProps:ye,additionalProps:{...Wr(Ce)&&{as:p}},ownerState:{...R,...n?.ownerState},className:[V.root,z]}),Le=ae({elementType:ze,externalSlotProps:b,ownerState:R,className:V.rail}),Vt=ae({elementType:Oe,externalSlotProps:k,additionalProps:{style:{...le[ie].offset(pe),...le[ie].leap(st)}},ownerState:{...R,...k?.ownerState},className:V.track}),ot=ae({elementType:Ae,getSlotProps:Ee,externalSlotProps:j,ownerState:{...R,...j?.ownerState},className:V.thumb}),Ft=ae({elementType:Ne,externalSlotProps:f,ownerState:{...R,...f?.ownerState},className:V.valueLabel}),at=ae({elementType:je,externalSlotProps:U,ownerState:R,className:V.mark}),nt=ae({elementType:He,externalSlotProps:G,ownerState:R,className:V.markLabel}),Wt=ae({elementType:l,getSlotProps:tt,externalSlotProps:D,ownerState:R});return t.jsxs(Ce,{...Z,children:[t.jsx(ze,{...Le}),t.jsx(Oe,{...Vt}),J.filter(M=>M.value>=O&&M.value<=B).map((M,N)=>{const lt=Qe(M.value,O,B),Ve=le[ie].offset(lt);let te;return E===!1?te=H.includes(M.value):te=E==="normal"&&(de?M.value>=H[0]&&M.value<=H[H.length-1]:M.value<=H[0])||E==="inverted"&&(de?M.value<=H[0]||M.value>=H[H.length-1]:M.value>=H[0]),t.jsxs(g.Fragment,{children:[t.jsx(je,{"data-index":N,...at,...!Ye(je)&&{markActive:te},style:{...Ve,...at.style},className:ge(at.className,te&&V.markActive)}),M.label!=null?t.jsx(He,{"aria-hidden":!0,"data-index":N,...nt,...!Ye(He)&&{markLabelActive:te},style:{...Ve,...nt.style},className:ge(V.markLabel,nt.className,te&&V.markLabelActive),children:M.label}):null]},N)}),H.map((M,N)=>{const lt=Qe(M,O,B),Ve=le[ie].offset(lt),te=I==="off"?rs:Ne;return t.jsx(te,{...!Ye(te)&&{valueLabelFormat:oe,valueLabelDisplay:I,value:typeof oe=="function"?oe(K(M),N):oe,index:N,open:rt===N||Me===N||I==="on",disabled:w},...Ft,children:t.jsx(Ae,{"data-index":N,...ot,className:ge(V.thumb,ot.className,Me===N&&V.active,ce===N&&V.focusVisible),style:{...Ve,...De(N),...ot.style},children:t.jsx(l,{"data-index":N,"aria-label":y?y(N):a,"aria-valuenow":K(M),"aria-labelledby":d,"aria-valuetext":u?u(K(M),N):h,value:H[N],...Wt})})},N)})]})}),os=xe(t.jsx("path",{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.996.996 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12z"})),as=xe(t.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),ns=xe(t.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"})),ls=xe(t.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"})),It=xe(t.jsx("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"})),is=xe(t.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),cs=xe(t.jsx("path",{d:"m12 16.5 4-4h-3v-9h-2v9H8zm9-13h-6v1.99h6v14.03H3V5.49h6V3.5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-14c0-1.1-.9-2-2-2"})),ds=({tableName:e,item:r,primaryKey:s})=>{const[o,i]=g.useState(!1),[a,h]=g.useState(JSON.stringify(r,null,2)),[d,p]=g.useState(null),c=async()=>{try{const _=JSON.parse(a);await Pe.table(e).put(_),i(!1),p(null)}catch(_){p(_ instanceof Error?_.message:"Invalid JSON")}},x=async()=>{confirm("Are you sure you want to delete this record?")&&await Pe.table(e).delete(s)};return o?t.jsxs(L,{sx:{p:1},children:[t.jsx(Ze,{fullWidth:!0,multiline:!0,minRows:3,value:a,onChange:_=>h(_.target.value),variant:"outlined",size:"small",sx:{fontFamily:"monospace",mb:1}}),d&&t.jsx(me,{severity:"error",sx:{mb:1},children:d}),t.jsxs(vr,{direction:"row",spacing:1,justifyContent:"flex-end",children:[t.jsx($,{startIcon:t.jsx(as,{}),onClick:()=>{i(!1),h(JSON.stringify(r,null,2)),p(null)},size:"small",children:"Cancel"}),t.jsx($,{startIcon:t.jsx(is,{}),onClick:c,variant:"contained",size:"small",children:"Save"})]})]}):t.jsxs(L,{children:[t.jsxs(L,{sx:{display:"flex",justifyContent:"flex-end",mb:1},children:[t.jsx(ft,{size:"small",onClick:()=>i(!0),children:t.jsx(fr,{fontSize:"small"})}),t.jsx(ft,{size:"small",onClick:x,color:"error",children:t.jsx(At,{fontSize:"small"})})]}),t.jsx(L,{component:"pre",sx:{overflowX:"auto",fontSize:"0.75rem",m:0,p:1,bgcolor:"action.hover",borderRadius:1},children:JSON.stringify(r,null,2)})]})},us=({tableName:e})=>{const{t:r}=be(["settings"]),s=Zt(()=>Pe.table(e).toArray(),[e]),i=Pe.table(e).schema.primKey.name;return s?s.length===0?t.jsx(C,{children:r("settings:developer.no_records")}):t.jsx(Dt,{children:s.map((a,h)=>{const d=a[i];return t.jsx(qe,{disablePadding:!0,children:t.jsxs(Qt,{sx:{width:"100%"},children:[t.jsx(er,{expandIcon:t.jsx(tr,{}),children:t.jsx(C,{noWrap:!0,children:String(a.id||a.name||a.key||`Record ${h}`)})}),t.jsx(rr,{children:t.jsx(ds,{tableName:e,item:a,primaryKey:d})})]})},d||h)})}):t.jsx(C,{children:r("settings:developer.loading")})},ps=()=>{const{t:e}=be(["settings"]),[r,s]=g.useState(""),o=Pe.tables.map(a=>a.name),i=a=>{s(a.target.value)};return t.jsxs(L,{sx:{mt:2},children:[t.jsxs($t,{fullWidth:!0,size:"small",sx:{mb:2},children:[t.jsx(Et,{children:e("settings:developer.select_table")}),t.jsx(Mt,{value:r,label:e("settings:developer.select_table"),onChange:i,children:o.map(a=>t.jsx(Je,{value:a,children:a},a))})]}),r&&t.jsx(us,{tableName:r})]})},gs=()=>{const{t:e}=be(["settings","common"]),{debugLogs:r,clearDebugLogs:s}=xt(),[o,i]=g.useState(!1),a=r.filter(c=>c.type==="packet").sort((c,x)=>new Date(x.timestamp).getTime()-new Date(c.timestamp).getTime()),h=c=>c===void 0?"UNKNOWN":ir[c]||`OP_${c.toString(16).toUpperCase()}`,d=async()=>{try{const c=await yt.exportLogs(),x=new Blob([c],{type:"application/json"}),_=URL.createObjectURL(x),S=document.createElement("a");S.href=_,S.download=`boks_packet_logs_${new Date().toISOString()}.json`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(_)}catch(c){console.error("Failed to export logs",c),alert("Failed to export logs")}},p=async()=>{s(),await yt.clearLogs(),i(!1)};return t.jsxs(L,{sx:{mt:4},children:[t.jsxs(L,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t.jsx(C,{variant:"h6",children:e("settings:developer.packet_logger_title")}),t.jsxs(L,{sx:{display:"flex",gap:1},children:[t.jsx($,{variant:"outlined",color:"primary",startIcon:t.jsx(sr,{}),onClick:d,size:"small",children:e("settings:developer.export_logs")}),t.jsx($,{variant:"outlined",color:"error",startIcon:t.jsx(At,{}),onClick:()=>i(!0),size:"small",children:e("settings:developer.clear_logs")})]})]}),t.jsx(zt,{variant:"outlined",sx:{width:"100%",overflow:"hidden"},children:t.jsx(L,{sx:{maxHeight:400,overflowY:"auto"},children:t.jsxs(yr,{stickyHeader:!0,size:"small",children:[t.jsx(jr,{children:t.jsxs(ut,{children:[t.jsx(re,{children:"Time"}),t.jsx(re,{children:"Dir"}),t.jsx(re,{children:"Opcode"}),t.jsx(re,{children:"Payload (Hex)"})]})}),t.jsx(Sr,{children:a.length>0?a.map(c=>t.jsxs(ut,{hover:!0,children:[t.jsx(re,{sx:{whiteSpace:"nowrap",fontSize:"0.75rem"},children:new Date(c.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3})}),t.jsx(re,{children:t.jsx(bt,{label:c.direction,color:c.direction==="TX"?"primary":"success",size:"small",sx:{fontSize:"0.7rem",height:20}})}),t.jsx(re,{sx:{fontSize:"0.75rem",fontWeight:"bold"},children:h(c.opcode)}),t.jsx(re,{sx:{fontFamily:"monospace",fontSize:"0.75rem",wordBreak:"break-all"},children:c.payload||"-"})]},c.id)):t.jsx(ut,{children:t.jsx(re,{colSpan:4,align:"center",children:t.jsx(C,{variant:"body2",color:"text.secondary",sx:{py:2},children:e("settings:developer.no_records")})})})})]})})}),t.jsxs(or,{open:o,onClose:()=>i(!1),children:[t.jsx(ar,{children:e("settings:developer.clear_logs")}),t.jsx(nr,{children:t.jsx(Er,{children:e("settings:developer.confirm_clear_logs")})}),t.jsxs(lr,{children:[t.jsx($,{onClick:()=>i(!1),color:"primary",children:e("common:cancel")}),t.jsx($,{onClick:p,color:"error",autoFocus:!0,children:e("settings:developer.clear_logs")})]})]})]})},ms=e=>dr[e]||`UNKNOWN_OPCODE_${e}`,Ht={},hs=(e,r)=>{Ht[e]=r},xs=()=>{const{t:e}=be(["settings"]),{sendPacket:r,isConnected:s}=xt(),[o,i]=g.useState(""),[a,h]=g.useState({}),[d,p]=g.useState(null),[c,x]=g.useState(null),_=g.useMemo(()=>Array.from(jt.getRegisteredTXPackets().entries()).sort((u,v)=>u[0]-v[0]),[]),S=g.useMemo(()=>o===""?null:jt.getRegisteredTXPackets().get(o),[o]),z=g.useMemo(()=>!S||!S.schema?null:S.schema instanceof cr?S.schema.shape:null,[S]);g.useEffect(()=>{if(!z){setTimeout(()=>h({}),0);return}const u={};Object.keys(z).forEach(v=>{u[v]=Ht[v]||""}),setTimeout(()=>h(u),0)},[z]);const T=u=>{i(u.target.value),p(null),x(null)},w=(u,v)=>{h(B=>({...B,[u]:v})),hs(u,v),p(null),x(null)},y=async()=>{if(S){p(null),x(null);try{let u={};if(S.schema){const B=S.schema.safeParse(a);if(!B.success){const O=B.error.errors.map(F=>`${F.path.join(".")}: ${F.message}`).join(", ");p(O);return}u=B.data}const v=new S;Object.assign(v,u),await r(v),console.log("Packet sent successfully",v),x(e("settings:developer.packet_sent_success"))}catch(u){console.error("Failed to send packet",u);const v=u instanceof Error?u.message:String(u);p(v||e("settings:developer.packet_send_error"))}}};return t.jsxs(L,{sx:{display:"flex",flexDirection:"column",gap:3},children:[t.jsx(me,{severity:s?"success":"warning",children:e(s?"settings:developer.enabled_success":"settings:developer.not_connected_warning")}),t.jsxs($t,{fullWidth:!0,children:[t.jsx(Et,{children:e("settings:developer.packet_type_label")}),t.jsx(Mt,{value:o,label:e("settings:developer.packet_type_label"),onChange:T,children:_.map(([u])=>t.jsxs(Je,{value:u,children:[ms(u)," (",u,")"]},u))})]}),S&&t.jsxs(zt,{variant:"outlined",sx:{p:2},children:[t.jsx(C,{variant:"h6",gutterBottom:!0,children:e("settings:developer.packet_parameters_title")}),t.jsxs(L,{sx:{display:"flex",flexDirection:"column",gap:2},children:[z?Object.keys(z).length>0?Object.keys(z).map(u=>{const v=z[u];let B=!1;const O=v._def.typeName;return(O==="ZodNumber"||O==="ZodEffects"&&v._def.schema?._def.typeName==="ZodNumber")&&(B=!0),t.jsx(Ze,{label:u,variant:"outlined",fullWidth:!0,type:B?"number":"text",value:a[u]||"",onChange:F=>w(u,F.target.value),helperText:B?"Number":"String"},u)}):t.jsx(C,{color:"text.secondary",children:e("settings:developer.no_parameters")}):t.jsx(C,{color:"text.secondary",children:e("settings:developer.no_schema")}),d&&t.jsx(me,{severity:"error",children:d}),c&&t.jsx(me,{severity:"success",children:c}),t.jsx($,{variant:"contained",onClick:y,disabled:!s&&!window.BOKS_SIMULATOR_ENABLED,children:e("settings:developer.send_packet")})]})]}),t.jsx(gs,{})]})},bs=()=>{const{t:e}=be(["settings"]),[r,s]=g.useState([]),[o,i]=g.useState(null),a=async()=>{if("serviceWorker"in navigator){const c=await navigator.serviceWorker.getRegistrations();s([...c])}};g.useEffect(()=>{a()},[]);const h=async c=>{try{await c.update(),i(e("settings:developer.sw_update_requested")),a()}catch(x){i(e("settings:developer.sw_update_failed",{error:String(x)}))}},d=async c=>{try{const x=await c.unregister();i(e(x?"settings:developer.sw_unregister_success":"settings:developer.sw_unregister_failed")),a()}catch(x){i(e("settings:developer.sw_unregister_error",{error:String(x)}))}},p=()=>{window.location.reload()};return"serviceWorker"in navigator?t.jsx(Q,{sx:{mt:2},children:t.jsxs(ee,{children:[t.jsx(C,{variant:"h6",gutterBottom:!0,children:e("settings:developer.sw_title")}),t.jsx(Ot,{sx:{mb:2}}),o&&t.jsx(me,{severity:"info",sx:{mb:2},onClose:()=>i(null),children:o}),r.length===0?t.jsx(C,{variant:"body2",color:"text.secondary",children:e("settings:developer.sw_no_active")}):r.map((c,x)=>t.jsxs(L,{sx:{mb:2,p:1,border:"1px solid #ddd",borderRadius:1},children:[t.jsx(C,{variant:"subtitle2",children:e("settings:developer.sw_scope",{scope:c.scope})}),t.jsx(C,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:e("settings:developer.sw_status",{status:c.installing?e("settings:developer.sw_installing"):c.waiting?e("settings:developer.sw_waiting"):c.active?e("settings:developer.sw_active"):e("settings:developer.sw_unknown")})}),t.jsxs(L,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1},children:[t.jsx($,{size:"small",variant:"outlined",startIcon:t.jsx(cs,{}),onClick:()=>h(c),children:e("settings:developer.sw_check_update")}),t.jsx($,{size:"small",variant:"outlined",color:"error",startIcon:t.jsx(ns,{}),onClick:()=>d(c),children:e("settings:developer.sw_unregister")})]})]},x)),t.jsx(L,{sx:{mt:2},children:t.jsx($,{fullWidth:!0,variant:"contained",color:"primary",startIcon:t.jsx(ur,{}),onClick:p,children:e("settings:developer.sw_reload")})})]})}):t.jsx(me,{severity:"warning",children:e("settings:developer.sw_not_supported")})},vs=()=>{const{t:e}=be(["settings"]),{toggleSimulator:r,disconnect:s}=xt(),[o,i]=g.useState(()=>window.boksSimulator||null),[a,h]=g.useState(()=>o?.getPublicState()||null),[d,p]=g.useState(()=>localStorage.getItem("BOKS_SIMULATOR_ENABLED")==="true"),[c,x]=g.useState(()=>!!window.boksSimulator),[_,S]=g.useState(()=>window.boksSimulator?.getPublicState().firmwareRevision||"10/125"),[z,T]=g.useState(()=>window.boksSimulator?.getPublicState().softwareRevision||"4.3.3");g.useEffect(()=>{if(o){const y=setTimeout(()=>{h(o.getPublicState())},0),u=setInterval(()=>{h(o.getPublicState())},500);return()=>{clearTimeout(y),clearInterval(u)}}else{const y=setTimeout(()=>{h(null)},0);return()=>clearTimeout(y)}},[o]);const w=(y,u)=>{p(u),r?(r(u),u?setTimeout(()=>{const v=window.boksSimulator;v&&(i(v),x(!0),S(v.getPublicState().firmwareRevision),T(v.getPublicState().softwareRevision))},500):(x(!1),i(null))):(u?localStorage.setItem("BOKS_SIMULATOR_ENABLED","true"):localStorage.removeItem("BOKS_SIMULATOR_ENABLED"),window.location.reload())};return t.jsxs(L,{sx:{p:2,display:"flex",flexDirection:"column",gap:2},children:[t.jsx(C,{variant:"h6",gutterBottom:!0,children:e("settings:developer.simulator.title")}),t.jsx(Q,{variant:"outlined",sx:{mb:1},children:t.jsx(ee,{sx:{py:1,"&:last-child":{pb:1}},children:t.jsx(Ct,{control:t.jsx(Lt,{checked:d,onChange:w}),label:e("settings:developer.simulator.enable_simulator")})})}),!c&&t.jsx(me,{severity:"warning",children:e("settings:developer.simulator.not_active")}),c&&a&&t.jsxs(t.Fragment,{children:[t.jsx(Q,{variant:"outlined",children:t.jsxs(ee,{children:[t.jsxs(L,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t.jsxs(C,{variant:"subtitle1",sx:{display:"flex",alignItems:"center",gap:1},children:[a.isOpen?t.jsx(It,{color:"warning"}):t.jsx(kt,{color:"success"}),e("settings:developer.simulator.status",{status:a.isOpen?e("settings:developer.simulator.open"):e("settings:developer.simulator.closed")})]}),t.jsx(Ct,{control:t.jsx(Lt,{checked:a.chaosMode,onChange:(y,u)=>o?.setChaosMode(u),color:"secondary"}),label:t.jsxs(L,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t.jsx(os,{fontSize:"small"})," ",e("settings:developer.simulator.chaos_mode")]})})]}),t.jsx(Ot,{sx:{my:1}}),t.jsx(L,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:a.laPosteActivated&&t.jsx(bt,{icon:t.jsx(ls,{}),label:"La Poste Active",color:"primary",size:"small",variant:"outlined"})}),t.jsx(C,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{mt:1},children:e("settings:developer.simulator.manual_triggers")}),t.jsxs(Br,{fullWidth:!0,variant:"contained",size:"small",children:[t.jsx($,{onClick:()=>o?.triggerDoorOpen("ble"),disabled:a.isOpen,startIcon:t.jsx(It,{}),children:e("settings:developer.simulator.ble_open")}),t.jsx($,{onClick:()=>o?.triggerNfcDoorOpen("04:55:66:77:88:99:AA",3),disabled:a.isOpen,color:"info",children:e("settings:developer.simulator.nfc_open")}),t.jsx($,{onClick:()=>o?.triggerDoorOpen("button"),disabled:a.isOpen,color:"warning",children:e("settings:developer.simulator.button_open")})]}),t.jsx($,{fullWidth:!0,variant:"outlined",size:"small",sx:{mt:1},onClick:()=>o?.triggerDoorClose(),disabled:!a.isOpen,startIcon:t.jsx(kt,{}),children:e("settings:developer.simulator.force_close")})]})}),t.jsx(Q,{variant:"outlined",children:t.jsxs(ee,{children:[t.jsx(C,{variant:"subtitle2",gutterBottom:!0,children:e("settings:developer.simulator.device_versions")}),t.jsxs(L,{sx:{display:"flex",gap:2,mb:2},children:[t.jsxs(Ze,{select:!0,label:e("settings:developer.simulator.hw_fw_label"),value:_,onChange:y=>S(y.target.value),size:"small",fullWidth:!0,children:[Object.entries(pr).map(([y,u])=>t.jsxs(Je,{value:y,children:["HW ",u," (FW ",y,")"]},y)),t.jsx(Je,{value:"custom",children:e("settings:developer.simulator.custom_version")})]}),t.jsx(Ze,{label:e("settings:developer.simulator.sw_revision"),value:z,onChange:y=>T(y.target.value),size:"small",fullWidth:!0})]}),t.jsx($,{variant:"contained",size:"small",onClick:()=>{o?.setVersion(z,_),s()},children:e("settings:developer.simulator.update_reconnect")})]})}),t.jsx(Q,{variant:"outlined",children:t.jsxs(ee,{children:[t.jsxs(C,{variant:"subtitle2",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[t.jsx(gr,{})," ",e("settings:developer.simulator.battery_level",{level:a.batteryLevel})]}),t.jsx(ss,{value:a.batteryLevel,onChange:(y,u)=>o?.setBatteryLevel(u),valueLabelDisplay:"auto",min:0,max:100,size:"small"})]})}),t.jsx(Q,{variant:"outlined",children:t.jsxs(ee,{children:[t.jsxs(L,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs(C,{variant:"subtitle2",sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(mr,{})," ",e("settings:developer.simulator.logs_count",{count:a.logs.length})]}),t.jsx($,{size:"small",variant:"text",color:"error",onClick:()=>o?.reset(),children:e("settings:developer.simulator.reset")})]}),t.jsx(L,{sx:{mt:1,maxHeight:150,overflow:"auto",fontSize:"0.75rem",fontFamily:"monospace",bgcolor:"rgba(0,0,0,0.03)",p:1,borderRadius:1},children:a.logs.length===0?e("settings:developer.simulator.no_logs"):[...a.logs].reverse().map((y,u)=>t.jsxs("div",{children:["[",new Date(y.timestamp).toLocaleTimeString(),"] Op: 0x",y.opcode.toString(16).toUpperCase()]},u))})]})})]})]})};function Be(e){const{children:r,value:s,index:o,...i}=e;return t.jsx("div",{role:"tabpanel",hidden:s!==o,id:`simple-tabpanel-${o}`,"aria-labelledby":`simple-tab-${o}`,...i,children:s===o&&t.jsx(L,{sx:{p:2},children:r})})}const Ts=()=>{const{t:e}=be(["settings"]),r=hr(),{isDeveloperMode:s,disableDeveloperMode:o}=xr(),i=g.useContext(br),[a,h]=g.useState(0),[d,p]=g.useState(null);g.useEffect(()=>{s||r("/")},[s,r]),g.useEffect(()=>{const T=w=>{const y=w.detail;p(y)};return window.addEventListener(Fe,T),()=>{window.removeEventListener(Fe,T)}},[]);const c=()=>{o(),r("/")},x=async()=>{try{confirm(e("settings:developer.mock_data_confirm"))&&(await St.mockData(),alert(e("settings:developer.mock_data_success")))}catch(T){console.error(T),alert(e("settings:developer.mock_data_failed"))}},_=(T,w)=>{h(w)},S=()=>{i?.mode===Te.MATRIX?(localStorage.removeItem(wt.MATRIX_UNLOCKED),i?.setThemeMode(Te.SYSTEM)):(localStorage.setItem(wt.MATRIX_UNLOCKED,"true"),i?.setThemeMode(Te.MATRIX))},z=async()=>{const T=["UP","UP","DOWN","DOWN","LEFT","RIGHT","LEFT","RIGHT"];let w=0;window.dispatchEvent(new CustomEvent(Fe,{detail:{direction:null,sequenceIndex:0,expected:"UP",status:"reset"}}));const y=u=>new Promise(v=>setTimeout(v,u));await y(500);for(const u of T){w++;const v={direction:u,sequenceIndex:w,expected:T[w]||"NONE",status:w===T.length?"success":"progress"};window.dispatchEvent(new CustomEvent(Fe,{detail:v})),await y(300)}};return t.jsxs(kr,{maxWidth:"md",sx:{py:2},children:[t.jsxs(L,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(C,{variant:"h4",children:e("settings:developer.page_title")}),t.jsx($,{variant:"outlined",color:"error",onClick:c,children:e("settings:developer.disable_mode")})]}),t.jsx(L,{sx:{borderBottom:1,borderColor:"divider"},children:t.jsxs(wr,{value:a,onChange:_,variant:"scrollable",scrollButtons:"auto","aria-label":"developer tabs",children:[t.jsx(Re,{label:e("settings:developer.tabs.general")}),t.jsx(Re,{label:e("settings:developer.tabs.database")}),t.jsx(Re,{label:e("settings:developer.tabs.bluetooth")}),t.jsx(Re,{label:e("settings:developer.tabs.simulator")}),t.jsx(Re,{label:e("settings:developer.tabs.easter_eggs")})]})}),t.jsx(Be,{value:a,index:0,children:t.jsx(bs,{})}),t.jsx(Be,{value:a,index:1,children:t.jsx(Q,{children:t.jsxs(ee,{children:[t.jsxs(L,{sx:{mb:4},children:[t.jsxs(L,{sx:{display:"flex",gap:2},children:[t.jsx($,{variant:"contained",onClick:x,children:e("settings:developer.load_mock_data")}),t.jsx($,{variant:"outlined",color:"error",onClick:()=>{confirm(e("settings:developer.clear_db_confirm"))&&St.clearAllData()},children:e("settings:developer.clear_db")})]}),t.jsx(C,{variant:"caption",display:"block",color:"text.secondary",sx:{mt:1},children:e("settings:developer.mock_data_helper")})]}),t.jsx(C,{variant:"h6",gutterBottom:!0,children:e("settings:developer.db_editor")}),t.jsx(C,{variant:"body2",color:"text.secondary",paragraph:!0,children:e("settings:developer.db_editor_helper")}),t.jsx(ps,{})]})})}),t.jsx(Be,{value:a,index:2,children:t.jsx(Q,{children:t.jsxs(ee,{children:[t.jsx(C,{variant:"h6",gutterBottom:!0,children:"Bluetooth Debugger"}),t.jsx(xs,{})]})})}),t.jsx(Be,{value:a,index:3,children:t.jsx(vs,{})}),t.jsxs(Be,{value:a,index:4,children:[t.jsx(Q,{sx:{mb:2},children:t.jsxs(ee,{children:[t.jsx(C,{variant:"h6",gutterBottom:!0,children:e("settings:developer.easter_eggs.matrix_mode")}),t.jsx(C,{variant:"body2",color:"text.secondary",paragraph:!0,children:e("settings:developer.easter_eggs.matrix_desc")}),t.jsx(L,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:t.jsx($,{variant:"contained",color:i?.mode===Te.MATRIX?"error":"primary",onClick:S,children:i?.mode===Te.MATRIX?e("settings:developer.easter_eggs.disable_matrix"):e("settings:developer.easter_eggs.activate_matrix")})})]})}),t.jsx(Q,{children:t.jsxs(ee,{children:[t.jsx(C,{variant:"h6",gutterBottom:!0,children:e("settings:developer.easter_eggs.konami_debugger")}),t.jsx(C,{variant:"body2",color:"text.secondary",paragraph:!0,children:e("settings:developer.easter_eggs.konami_desc")}),t.jsx(L,{sx:{mb:2},children:t.jsx($,{variant:"outlined",onClick:z,children:e("settings:developer.easter_eggs.simulate_sequence")})}),t.jsx(L,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:2},children:["UP","UP","DOWN","DOWN","LEFT","RIGHT","LEFT","RIGHT"].map((T,w)=>t.jsx(bt,{label:T,color:d&&w<d.sequenceIndex?"success":"default",variant:d&&w===d.sequenceIndex?"filled":"outlined"},w))}),d&&t.jsxs(Dt,{dense:!0,children:[t.jsx(qe,{children:t.jsx(dt,{primary:e("settings:developer.easter_eggs.last_input"),secondary:d.direction||"None"})}),t.jsx(qe,{children:t.jsx(dt,{primary:e("settings:developer.easter_eggs.status"),secondary:d.status})}),t.jsx(qe,{children:t.jsx(dt,{primary:e("settings:developer.easter_eggs.expected_next"),secondary:d.expected})})]}),t.jsx(C,{variant:"caption",color:"text.secondary",children:e("settings:developer.easter_eggs.swipe_note")})]})})]})]})};export{Ts as DeveloperPage};
